(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function e(e){let t=Object.create(null);for(let n of e.split(`,`))t[n]=1;return e=>e in t}var t={},n=[],r=()=>{},i=()=>!1,a=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),o=e=>e.startsWith(`onUpdate:`),s=Object.assign,c=(e,t)=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)},l=Object.prototype.hasOwnProperty,u=(e,t)=>l.call(e,t),d=Array.isArray,f=e=>x(e)===`[object Map]`,p=e=>x(e)===`[object Set]`,m=e=>x(e)===`[object Date]`,h=e=>typeof e==`function`,g=e=>typeof e==`string`,_=e=>typeof e==`symbol`,v=e=>typeof e==`object`&&!!e,y=e=>(v(e)||h(e))&&h(e.then)&&h(e.catch),b=Object.prototype.toString,x=e=>b.call(e),S=e=>x(e).slice(8,-1),ee=e=>x(e)===`[object Object]`,te=e=>g(e)&&e!==`NaN`&&e[0]!==`-`&&``+parseInt(e,10)===e,ne=e(`,key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted`),re=e=>{let t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},ie=/-\w/g,ae=re(e=>e.replace(ie,e=>e.slice(1).toUpperCase())),oe=/\B([A-Z])/g,se=re(e=>e.replace(oe,`-$1`).toLowerCase()),ce=re(e=>e.charAt(0).toUpperCase()+e.slice(1)),le=re(e=>e?`on${ce(e)}`:``),ue=(e,t)=>!Object.is(e,t),de=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},C=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},fe=e=>{let t=parseFloat(e);return isNaN(t)?e:t},pe,me=()=>pe||=typeof globalThis<`u`?globalThis:typeof self<`u`?self:typeof window<`u`?window:typeof global<`u`?global:{};function w(e){if(d(e)){let t={};for(let n=0;n<e.length;n++){let r=e[n],i=g(r)?ve(r):w(r);if(i)for(let e in i)t[e]=i[e]}return t}else if(g(e)||v(e))return e}var he=/;(?![^(]*\))/g,ge=/:([^]+)/,_e=/\/\*[^]*?\*\//g;function ve(e){let t={};return e.replace(_e,``).split(he).forEach(e=>{if(e){let n=e.split(ge);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ye(e){let t=``;if(g(e))t=e;else if(d(e))for(let n=0;n<e.length;n++){let r=ye(e[n]);r&&(t+=r+` `)}else if(v(e))for(let n in e)e[n]&&(t+=n+` `);return t.trim()}var be=`itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`,xe=e(be);be+``;function Se(e){return!!e||e===``}function Ce(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=we(e[r],t[r]);return n}function we(e,t){if(e===t)return!0;let n=m(e),r=m(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=_(e),r=_(t),n||r)return e===t;if(n=d(e),r=d(t),n||r)return n&&r?Ce(e,t):!1;if(n=v(e),r=v(t),n||r){if(!n||!r||Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e){let r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!we(e[n],t[n]))return!1}}return String(e)===String(t)}var Te=e=>!!(e&&e.__v_isRef===!0),T=e=>g(e)?e:e==null?``:d(e)||v(e)&&(e.toString===b||!h(e.toString))?Te(e)?T(e.value):JSON.stringify(e,Ee,2):String(e),Ee=(e,t)=>Te(t)?Ee(e,t.value):f(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],r)=>(e[De(t,r)+` =>`]=n,e),{})}:p(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>De(e))}:_(t)?De(t):v(t)&&!d(t)&&!ee(t)?String(t):t,De=(e,t=``)=>_(e)?`Symbol(${e.description??t})`:e,Oe,ke=class{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.__v_skip=!0,this.parent=Oe,!e&&Oe&&(this.index=(Oe.scopes||=[]).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){let t=Oe;try{return Oe=this,e()}finally{Oe=t}}}on(){++this._on===1&&(this.prevScope=Oe,Oe=this)}off(){this._on>0&&--this._on===0&&(Oe=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){let e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}};function Ae(){return Oe}var E,je=new WeakSet,Me=class{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Oe&&Oe.active&&Oe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,je.has(this)&&(je.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ie(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ye(this),ze(this);let e=E,t=Ge;E=this,Ge=!0;try{return this.fn()}finally{Be(this),E=e,Ge=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ue(e);this.deps=this.depsTail=void 0,Ye(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?je.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ve(this)&&this.run()}get dirty(){return Ve(this)}},Ne=0,Pe,Fe;function Ie(e,t=!1){if(e.flags|=8,t){e.next=Fe,Fe=e;return}e.next=Pe,Pe=e}function Le(){Ne++}function Re(){if(--Ne>0)return;if(Fe){let e=Fe;for(Fe=void 0;e;){let t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;Pe;){let t=Pe;for(Pe=void 0;t;){let n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(t){e||=t}t=n}}if(e)throw e}function ze(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Be(e){let t,n=e.depsTail,r=n;for(;r;){let e=r.prevDep;r.version===-1?(r===n&&(n=e),Ue(r),We(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function Ve(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(He(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function He(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Xe)||(e.globalVersion=Xe,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ve(e))))return;e.flags|=2;let t=e.dep,n=E,r=Ge;E=e,Ge=!0;try{ze(e);let n=e.fn(e._value);(t.version===0||ue(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(e){throw t.version++,e}finally{E=n,Ge=r,Be(e),e.flags&=-3}}function Ue(e,t=!1){let{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)Ue(e,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function We(e){let{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}var Ge=!0,Ke=[];function qe(){Ke.push(Ge),Ge=!1}function Je(){let e=Ke.pop();Ge=e===void 0?!0:e}function Ye(e){let{cleanup:t}=e;if(e.cleanup=void 0,t){let e=E;E=void 0;try{t()}finally{E=e}}}var Xe=0,Ze=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}},Qe=class{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!E||!Ge||E===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==E)t=this.activeLink=new Ze(E,this),E.deps?(t.prevDep=E.depsTail,E.depsTail.nextDep=t,E.depsTail=t):E.deps=E.depsTail=t,$e(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){let e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=E.depsTail,t.nextDep=void 0,E.depsTail.nextDep=t,E.depsTail=t,E.deps===t&&(E.deps=e)}return t}trigger(e){this.version++,Xe++,this.notify(e)}notify(e){Le();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Re()}}};function $e(e){if(e.dep.sc++,e.sub.flags&4){let t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)$e(e)}let n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}var et=new WeakMap,tt=Symbol(``),nt=Symbol(``),rt=Symbol(``);function D(e,t,n){if(Ge&&E){let t=et.get(e);t||et.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new Qe),r.map=t,r.key=n),r.track()}}function it(e,t,n,r,i,a){let o=et.get(e);if(!o){Xe++;return}let s=e=>{e&&e.trigger()};if(Le(),t===`clear`)o.forEach(s);else{let i=d(e),a=i&&te(n);if(i&&n===`length`){let e=Number(r);o.forEach((t,n)=>{(n===`length`||n===rt||!_(n)&&n>=e)&&s(t)})}else switch((n!==void 0||o.has(void 0))&&s(o.get(n)),a&&s(o.get(rt)),t){case`add`:i?a&&s(o.get(`length`)):(s(o.get(tt)),f(e)&&s(o.get(nt)));break;case`delete`:i||(s(o.get(tt)),f(e)&&s(o.get(nt)));break;case`set`:f(e)&&s(o.get(tt));break}}Re()}function O(e){let t=k(e);return t===e?t:(D(t,`iterate`,rt),Wt(e)?t:t.map(qt))}function at(e){return D(e=k(e),`iterate`,rt),e}function ot(e,t){return Ut(e)?A(Ht(e)?qt(t):t):qt(t)}var st={__proto__:null,[Symbol.iterator](){return ct(this,Symbol.iterator,e=>ot(this,e))},concat(...e){return O(this).concat(...e.map(e=>d(e)?O(e):e))},entries(){return ct(this,`entries`,e=>(e[1]=ot(this,e[1]),e))},every(e,t){return ut(this,`every`,e,t,void 0,arguments)},filter(e,t){return ut(this,`filter`,e,t,e=>e.map(e=>ot(this,e)),arguments)},find(e,t){return ut(this,`find`,e,t,e=>ot(this,e),arguments)},findIndex(e,t){return ut(this,`findIndex`,e,t,void 0,arguments)},findLast(e,t){return ut(this,`findLast`,e,t,e=>ot(this,e),arguments)},findLastIndex(e,t){return ut(this,`findLastIndex`,e,t,void 0,arguments)},forEach(e,t){return ut(this,`forEach`,e,t,void 0,arguments)},includes(...e){return ft(this,`includes`,e)},indexOf(...e){return ft(this,`indexOf`,e)},join(e){return O(this).join(e)},lastIndexOf(...e){return ft(this,`lastIndexOf`,e)},map(e,t){return ut(this,`map`,e,t,void 0,arguments)},pop(){return pt(this,`pop`)},push(...e){return pt(this,`push`,e)},reduce(e,...t){return dt(this,`reduce`,e,t)},reduceRight(e,...t){return dt(this,`reduceRight`,e,t)},shift(){return pt(this,`shift`)},some(e,t){return ut(this,`some`,e,t,void 0,arguments)},splice(...e){return pt(this,`splice`,e)},toReversed(){return O(this).toReversed()},toSorted(e){return O(this).toSorted(e)},toSpliced(...e){return O(this).toSpliced(...e)},unshift(...e){return pt(this,`unshift`,e)},values(){return ct(this,`values`,e=>ot(this,e))}};function ct(e,t,n){let r=at(e),i=r[t]();return r!==e&&!Wt(e)&&(i._next=i.next,i.next=()=>{let e=i._next();return e.done||(e.value=n(e.value)),e}),i}var lt=Array.prototype;function ut(e,t,n,r,i,a){let o=at(e),s=o!==e&&!Wt(e),c=o[t];if(c!==lt[t]){let t=c.apply(e,a);return s?qt(t):t}let l=n;o!==e&&(s?l=function(t,r){return n.call(this,ot(e,t),r,e)}:n.length>2&&(l=function(t,r){return n.call(this,t,r,e)}));let u=c.call(o,l,r);return s&&i?i(u):u}function dt(e,t,n,r){let i=at(e),a=n;return i!==e&&(Wt(e)?n.length>3&&(a=function(t,r,i){return n.call(this,t,r,i,e)}):a=function(t,r,i){return n.call(this,t,ot(e,r),i,e)}),i[t](a,...r)}function ft(e,t,n){let r=k(e);D(r,`iterate`,rt);let i=r[t](...n);return(i===-1||i===!1)&&Gt(n[0])?(n[0]=k(n[0]),r[t](...n)):i}function pt(e,t,n=[]){qe(),Le();let r=k(e)[t].apply(e,n);return Re(),Je(),r}var mt=e(`__proto__,__v_isRef,__isVue`),ht=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!==`arguments`&&e!==`caller`).map(e=>Symbol[e]).filter(_));function gt(e){_(e)||(e=String(e));let t=k(this);return D(t,`has`,e),t.hasOwnProperty(e)}var _t=class{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t===`__v_skip`)return e.__v_skip;let r=this._isReadonly,i=this._isShallow;if(t===`__v_isReactive`)return!r;if(t===`__v_isReadonly`)return r;if(t===`__v_isShallow`)return i;if(t===`__v_raw`)return n===(r?i?Ft:Pt:i?Nt:Mt).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;let a=d(e);if(!r){let e;if(a&&(e=st[t]))return e;if(t===`hasOwnProperty`)return gt}let o=Reflect.get(e,t,j(e)?e:n);if((_(t)?ht.has(t):mt(t))||(r||D(e,`get`,t),i))return o;if(j(o)){let e=a&&te(t)?o:o.value;return r&&v(e)?Bt(e):e}return v(o)?r?Bt(o):Rt(o):o}},vt=class extends _t{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t],a=d(e)&&te(t);if(!this._isShallow){let e=Ut(i);if(!Wt(n)&&!Ut(n)&&(i=k(i),n=k(n)),!a&&j(i)&&!j(n))return e||(i.value=n),!0}let o=a?Number(t)<e.length:u(e,t),s=Reflect.set(e,t,n,j(e)?e:r);return e===k(r)&&(o?ue(n,i)&&it(e,`set`,t,n,i):it(e,`add`,t,n)),s}deleteProperty(e,t){let n=u(e,t),r=e[t],i=Reflect.deleteProperty(e,t);return i&&n&&it(e,`delete`,t,void 0,r),i}has(e,t){let n=Reflect.has(e,t);return(!_(t)||!ht.has(t))&&D(e,`has`,t),n}ownKeys(e){return D(e,`iterate`,d(e)?`length`:tt),Reflect.ownKeys(e)}},yt=class extends _t{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}},bt=new vt,xt=new yt,St=new vt(!0),Ct=e=>e,wt=e=>Reflect.getPrototypeOf(e);function Tt(e,t,n){return function(...r){let i=this.__v_raw,a=k(i),o=f(a),c=e===`entries`||e===Symbol.iterator&&o,l=e===`keys`&&o,u=i[e](...r),d=n?Ct:t?A:qt;return!t&&D(a,`iterate`,l?nt:tt),s(Object.create(u),{next(){let{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:c?[d(e[0]),d(e[1])]:d(e),done:t}}})}}function Et(e){return function(...t){return e===`delete`?!1:e===`clear`?void 0:this}}function Dt(e,t){let n={get(n){let r=this.__v_raw,i=k(r),a=k(n);e||(ue(n,a)&&D(i,`get`,n),D(i,`get`,a));let{has:o}=wt(i),s=t?Ct:e?A:qt;if(o.call(i,n))return s(r.get(n));if(o.call(i,a))return s(r.get(a));r!==i&&r.get(n)},get size(){let t=this.__v_raw;return!e&&D(k(t),`iterate`,tt),t.size},has(t){let n=this.__v_raw,r=k(n),i=k(t);return e||(ue(t,i)&&D(r,`has`,t),D(r,`has`,i)),t===i?n.has(t):n.has(t)||n.has(i)},forEach(n,r){let i=this,a=i.__v_raw,o=k(a),s=t?Ct:e?A:qt;return!e&&D(o,`iterate`,tt),a.forEach((e,t)=>n.call(r,s(e),s(t),i))}};return s(n,e?{add:Et(`add`),set:Et(`set`),delete:Et(`delete`),clear:Et(`clear`)}:{add(e){!t&&!Wt(e)&&!Ut(e)&&(e=k(e));let n=k(this);return wt(n).has.call(n,e)||(n.add(e),it(n,`add`,e,e)),this},set(e,n){!t&&!Wt(n)&&!Ut(n)&&(n=k(n));let r=k(this),{has:i,get:a}=wt(r),o=i.call(r,e);o||=(e=k(e),i.call(r,e));let s=a.call(r,e);return r.set(e,n),o?ue(n,s)&&it(r,`set`,e,n,s):it(r,`add`,e,n),this},delete(e){let t=k(this),{has:n,get:r}=wt(t),i=n.call(t,e);i||=(e=k(e),n.call(t,e));let a=r?r.call(t,e):void 0,o=t.delete(e);return i&&it(t,`delete`,e,void 0,a),o},clear(){let e=k(this),t=e.size!==0,n=e.clear();return t&&it(e,`clear`,void 0,void 0,void 0),n}}),[`keys`,`values`,`entries`,Symbol.iterator].forEach(r=>{n[r]=Tt(r,e,t)}),n}function Ot(e,t){let n=Dt(e,t);return(t,r,i)=>r===`__v_isReactive`?!e:r===`__v_isReadonly`?e:r===`__v_raw`?t:Reflect.get(u(n,r)&&r in t?n:t,r,i)}var kt={get:Ot(!1,!1)},At={get:Ot(!1,!0)},jt={get:Ot(!0,!1)},Mt=new WeakMap,Nt=new WeakMap,Pt=new WeakMap,Ft=new WeakMap;function It(e){switch(e){case`Object`:case`Array`:return 1;case`Map`:case`Set`:case`WeakMap`:case`WeakSet`:return 2;default:return 0}}function Lt(e){return e.__v_skip||!Object.isExtensible(e)?0:It(S(e))}function Rt(e){return Ut(e)?e:Vt(e,!1,bt,kt,Mt)}function zt(e){return Vt(e,!1,St,At,Nt)}function Bt(e){return Vt(e,!0,xt,jt,Pt)}function Vt(e,t,n,r,i){if(!v(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;let a=Lt(e);if(a===0)return e;let o=i.get(e);if(o)return o;let s=new Proxy(e,a===2?r:n);return i.set(e,s),s}function Ht(e){return Ut(e)?Ht(e.__v_raw):!!(e&&e.__v_isReactive)}function Ut(e){return!!(e&&e.__v_isReadonly)}function Wt(e){return!!(e&&e.__v_isShallow)}function Gt(e){return e?!!e.__v_raw:!1}function k(e){let t=e&&e.__v_raw;return t?k(t):e}function Kt(e){return!u(e,`__v_skip`)&&Object.isExtensible(e)&&C(e,`__v_skip`,!0),e}var qt=e=>v(e)?Rt(e):e,A=e=>v(e)?Bt(e):e;function j(e){return e?e.__v_isRef===!0:!1}function M(e){return Jt(e,!1)}function Jt(e,t){return j(e)?e:new Yt(e,t)}var Yt=class{constructor(e,t){this.dep=new Qe,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:k(e),this._value=t?e:qt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){let t=this._rawValue,n=this.__v_isShallow||Wt(e)||Ut(e);e=n?e:k(e),ue(e,t)&&(this._rawValue=e,this._value=n?e:qt(e),this.dep.trigger())}};function Xt(e){return j(e)?e.value:e}var Zt={get:(e,t,n)=>t===`__v_raw`?e:Xt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{let i=e[t];return j(i)&&!j(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Qt(e){return Ht(e)?e:new Proxy(e,Zt)}var $t=class{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Qe(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Xe-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&E!==this)return Ie(this,!0),!0}get value(){let e=this.dep.track();return He(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}};function en(e,t,n=!1){let r,i;return h(e)?r=e:(r=e.get,i=e.set),new $t(r,i,n)}var tn={},nn=new WeakMap,rn=void 0;function an(e,t=!1,n=rn){if(n){let t=nn.get(n);t||nn.set(n,t=[]),t.push(e)}}function on(e,n,i=t){let{immediate:a,deep:o,once:s,scheduler:l,augmentJob:u,call:f}=i,p=e=>o?e:Wt(e)||o===!1||o===0?sn(e,1):sn(e),m,g,_,v,y=!1,b=!1;if(j(e)?(g=()=>e.value,y=Wt(e)):Ht(e)?(g=()=>p(e),y=!0):d(e)?(b=!0,y=e.some(e=>Ht(e)||Wt(e)),g=()=>e.map(e=>{if(j(e))return e.value;if(Ht(e))return p(e);if(h(e))return f?f(e,2):e()})):g=h(e)?n?f?()=>f(e,2):e:()=>{if(_){qe();try{_()}finally{Je()}}let t=rn;rn=m;try{return f?f(e,3,[v]):e(v)}finally{rn=t}}:r,n&&o){let e=g,t=o===!0?1/0:o;g=()=>sn(e(),t)}let x=Ae(),S=()=>{m.stop(),x&&x.active&&c(x.effects,m)};if(s&&n){let e=n;n=(...t)=>{e(...t),S()}}let ee=b?Array(e.length).fill(tn):tn,te=e=>{if(!(!(m.flags&1)||!m.dirty&&!e))if(n){let e=m.run();if(o||y||(b?e.some((e,t)=>ue(e,ee[t])):ue(e,ee))){_&&_();let t=rn;rn=m;try{let t=[e,ee===tn?void 0:b&&ee[0]===tn?[]:ee,v];ee=e,f?f(n,3,t):n(...t)}finally{rn=t}}}else m.run()};return u&&u(te),m=new Me(g),m.scheduler=l?()=>l(te,!1):te,v=e=>an(e,!1,m),_=m.onStop=()=>{let e=nn.get(m);if(e){if(f)f(e,4);else for(let t of e)t();nn.delete(m)}},n?a?te(!0):ee=m.run():l?l(te.bind(null,!0),!0):m.run(),S.pause=m.pause.bind(m),S.resume=m.resume.bind(m),S.stop=S,S}function sn(e,t=1/0,n){if(t<=0||!v(e)||e.__v_skip||(n||=new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,j(e))sn(e.value,t,n);else if(d(e))for(let r=0;r<e.length;r++)sn(e[r],t,n);else if(p(e)||f(e))e.forEach(e=>{sn(e,t,n)});else if(ee(e)){for(let r in e)sn(e[r],t,n);for(let r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&sn(e[r],t,n)}return e}function cn(e,t,n,r){try{return r?e(...r):e()}catch(e){un(e,t,n)}}function ln(e,t,n,r){if(h(e)){let i=cn(e,t,n,r);return i&&y(i)&&i.catch(e=>{un(e,t,n)}),i}if(d(e)){let i=[];for(let a=0;a<e.length;a++)i.push(ln(e[a],t,n,r));return i}}function un(e,n,r,i=!0){let a=n?n.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=n&&n.appContext.config||t;if(n){let t=n.parent,i=n.proxy,a=`https://vuejs.org/error-reference/#runtime-${r}`;for(;t;){let n=t.ec;if(n){for(let t=0;t<n.length;t++)if(n[t](e,i,a)===!1)return}t=t.parent}if(o){qe(),cn(o,null,10,[e,i,a]),Je();return}}dn(e,r,a,i,s)}function dn(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}var fn=[],pn=-1,mn=[],hn=null,gn=0,_n=Promise.resolve(),vn=null;function yn(e){let t=vn||_n;return e?t.then(this?e.bind(this):e):t}function bn(e){let t=pn+1,n=fn.length;for(;t<n;){let r=t+n>>>1,i=fn[r],a=Tn(i);a<e||a===e&&i.flags&2?t=r+1:n=r}return t}function N(e){if(!(e.flags&1)){let t=Tn(e),n=fn[fn.length-1];!n||!(e.flags&2)&&t>=Tn(n)?fn.push(e):fn.splice(bn(t),0,e),e.flags|=1,xn()}}function xn(){vn||=_n.then(En)}function Sn(e){d(e)?mn.push(...e):hn&&e.id===-1?hn.splice(gn+1,0,e):e.flags&1||(mn.push(e),e.flags|=1),xn()}function Cn(e,t,n=pn+1){for(;n<fn.length;n++){let t=fn[n];if(t&&t.flags&2){if(e&&t.id!==e.uid)continue;fn.splice(n,1),n--,t.flags&4&&(t.flags&=-2),t(),t.flags&4||(t.flags&=-2)}}}function wn(e){if(mn.length){let e=[...new Set(mn)].sort((e,t)=>Tn(e)-Tn(t));if(mn.length=0,hn){hn.push(...e);return}for(hn=e,gn=0;gn<hn.length;gn++){let e=hn[gn];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}hn=null,gn=0}}var Tn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function En(e){try{for(pn=0;pn<fn.length;pn++){let e=fn[pn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),cn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;pn<fn.length;pn++){let e=fn[pn];e&&(e.flags&=-2)}pn=-1,fn.length=0,wn(e),vn=null,(fn.length||mn.length)&&En(e)}}var Dn=null,On=null;function kn(e){let t=Dn;return Dn=e,On=e&&e.type.__scopeId||null,t}function An(e,t=Dn,n){if(!t||e._n)return e;let r=(...n)=>{r._d&&Ri(-1);let i=kn(t),a;try{a=e(...n)}finally{kn(i),r._d&&Ri(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function jn(e,n){if(Dn===null)return e;let r=Sa(Dn),i=e.dirs||=[];for(let e=0;e<n.length;e++){let[a,o,s,c=t]=n[e];a&&(h(a)&&(a={mounted:a,updated:a}),a.deep&&sn(o),i.push({dir:a,instance:r,value:o,oldValue:void 0,arg:s,modifiers:c}))}return e}function Mn(e,t,n,r){let i=e.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){let s=i[o];a&&(s.oldValue=a[o].value);let c=s.dir[r];c&&(qe(),ln(c,n,8,[e.el,s,e,t]),Je())}}function Nn(e,t){if(oa){let n=oa.provides,r=oa.parent&&oa.parent.provides;r===n&&(n=oa.provides=Object.create(r)),n[e]=t}}function Pn(e,t,n=!1){let r=sa();if(r||Br){let i=Br?Br._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&h(t)?t.call(r&&r.proxy):t}}var Fn=Symbol.for(`v-scx`),In=()=>Pn(Fn);function Ln(e,t,n){return Rn(e,t,n)}function Rn(e,n,i=t){let{immediate:a,deep:o,flush:c,once:l}=i,u=s({},i),d=n&&a||!n&&c!==`post`,f;if(pa){if(c===`sync`){let e=In();f=e.__watcherHandles||=[]}else if(!d){let e=()=>{};return e.stop=r,e.resume=r,e.pause=r,e}}let p=oa;u.call=(e,t,n)=>ln(e,p,t,n);let m=!1;c===`post`?u.scheduler=e=>{_i(e,p&&p.suspense)}:c!==`sync`&&(m=!0,u.scheduler=(e,t)=>{t?e():N(e)}),u.augmentJob=e=>{n&&(e.flags|=4),m&&(e.flags|=2,p&&(e.id=p.uid,e.i=p))};let h=on(e,n,u);return pa&&(f?f.push(h):d&&h()),h}function zn(e,t,n){let r=this.proxy,i=g(e)?e.includes(`.`)?Bn(r,e):()=>r[e]:e.bind(r,r),a;h(t)?a=t:(a=t.handler,n=t);let o=ua(this),s=Rn(i,a.bind(r),n);return o(),s}function Bn(e,t){let n=t.split(`.`);return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}var Vn=Symbol(`_vte`),Hn=e=>e.__isTeleport,Un=Symbol(`_leaveCb`);function Wn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Wn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Gn(e,t){return h(e)?s({name:e.name},t,{setup:e}):e}function Kn(e){e.ids=[e.ids[0]+ e.ids[2]+++`-`,0,0]}function qn(e,t){let n;return!!((n=Object.getOwnPropertyDescriptor(e,t))&&!n.configurable)}var Jn=new WeakMap;function Yn(e,n,r,a,o=!1){if(d(e)){e.forEach((e,t)=>Yn(e,n&&(d(n)?n[t]:n),r,a,o));return}if(Zn(a)&&!o){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&Yn(e,n,r,a.component.subTree);return}let s=a.shapeFlag&4?Sa(a.component):a.el,l=o?null:s,{i:f,r:p}=e,m=n&&n.r,_=f.refs===t?f.refs={}:f.refs,v=f.setupState,y=k(v),b=v===t?i:e=>qn(_,e)?!1:u(y,e),x=(e,t)=>!(t&&qn(_,t));if(m!=null&&m!==p){if(Xn(n),g(m))_[m]=null,b(m)&&(v[m]=null);else if(j(m)){let e=n;x(m,e.k)&&(m.value=null),e.k&&(_[e.k]=null)}}if(h(p))cn(p,f,12,[l,_]);else{let t=g(p),n=j(p);if(t||n){let i=()=>{if(e.f){let n=t?b(p)?v[p]:_[p]:x(p)||!e.k?p.value:_[e.k];if(o)d(n)&&c(n,s);else if(d(n))n.includes(s)||n.push(s);else if(t)_[p]=[s],b(p)&&(v[p]=_[p]);else{let t=[s];x(p,e.k)&&(p.value=t),e.k&&(_[e.k]=t)}}else t?(_[p]=l,b(p)&&(v[p]=l)):n&&(x(p,e.k)&&(p.value=l),e.k&&(_[e.k]=l))};if(l){let t=()=>{i(),Jn.delete(e)};t.id=-1,Jn.set(e,t),_i(t,r)}else Xn(e),i()}}}function Xn(e){let t=Jn.get(e);t&&(t.flags|=8,Jn.delete(e))}me().requestIdleCallback,me().cancelIdleCallback;var Zn=e=>!!e.type.__asyncLoader,Qn=e=>e.type.__isKeepAlive;function $n(e,t){tr(e,`a`,t)}function er(e,t){tr(e,`da`,t)}function tr(e,t,n=oa){let r=e.__wdc||=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()};if(rr(t,r,n),n){let e=n.parent;for(;e&&e.parent;)Qn(e.parent.vnode)&&nr(r,t,n,e),e=e.parent}}function nr(e,t,n,r){let i=rr(t,e,r,!0);ur(()=>{c(r[t],i)},n)}function rr(e,t,n=oa,r=!1){if(n){let i=n[e]||(n[e]=[]),a=t.__weh||=(...r)=>{qe();let i=ua(n),a=ln(t,n,e,r);return i(),Je(),a};return r?i.unshift(a):i.push(a),a}}var ir=e=>(t,n=oa)=>{(!pa||e===`sp`)&&rr(e,(...e)=>t(...e),n)},ar=ir(`bm`),or=ir(`m`),sr=ir(`bu`),cr=ir(`u`),lr=ir(`bum`),ur=ir(`um`),dr=ir(`sp`),fr=ir(`rtg`),pr=ir(`rtc`);function mr(e,t=oa){rr(`ec`,e,t)}var hr=Symbol.for(`v-ndc`);function gr(e,t,n,r){let i,a=n&&n[r],o=d(e);if(o||g(e)){let n=o&&Ht(e),r=!1,s=!1;n&&(r=!Wt(e),s=Ut(e),e=at(e)),i=Array(e.length);for(let n=0,o=e.length;n<o;n++)i[n]=t(r?s?A(qt(e[n])):qt(e[n]):e[n],n,void 0,a&&a[n])}else if(typeof e==`number`){i=Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,a&&a[n])}else if(v(e))if(e[Symbol.iterator])i=Array.from(e,(e,n)=>t(e,n,void 0,a&&a[n]));else{let n=Object.keys(e);i=Array(n.length);for(let r=0,o=n.length;r<o;r++){let o=n[r];i[r]=t(e[o],o,r,a&&a[r])}}else i=[];return n&&(n[r]=i),i}var _r=e=>e?fa(e)?Sa(e):_r(e.parent):null,vr=s(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>_r(e.parent),$root:e=>_r(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Dr(e),$forceUpdate:e=>e.f||=()=>{N(e.update)},$nextTick:e=>e.n||=yn.bind(e.proxy),$watch:e=>zn.bind(e)}),yr=(e,n)=>e!==t&&!e.__isScriptSetup&&u(e,n),br={get({_:e},n){if(n===`__v_skip`)return!0;let{ctx:r,setupState:i,data:a,props:o,accessCache:s,type:c,appContext:l}=e;if(n[0]!==`$`){let e=s[n];if(e!==void 0)switch(e){case 1:return i[n];case 2:return a[n];case 4:return r[n];case 3:return o[n]}else if(yr(i,n))return s[n]=1,i[n];else if(a!==t&&u(a,n))return s[n]=2,a[n];else if(u(o,n))return s[n]=3,o[n];else if(r!==t&&u(r,n))return s[n]=4,r[n];else Sr&&(s[n]=0)}let d=vr[n],f,p;if(d)return n===`$attrs`&&D(e.attrs,`get`,``),d(e);if((f=c.__cssModules)&&(f=f[n]))return f;if(r!==t&&u(r,n))return s[n]=4,r[n];if(p=l.config.globalProperties,u(p,n))return p[n]},set({_:e},n,r){let{data:i,setupState:a,ctx:o}=e;return yr(a,n)?(a[n]=r,!0):i!==t&&u(i,n)?(i[n]=r,!0):u(e.props,n)||n[0]===`$`&&n.slice(1)in e?!1:(o[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:i,appContext:a,props:o,type:s}},c){let l;return!!(r[c]||e!==t&&c[0]!==`$`&&u(e,c)||yr(n,c)||u(o,c)||u(i,c)||u(vr,c)||u(a.config.globalProperties,c)||(l=s.__cssModules)&&l[c])},defineProperty(e,t,n){return n.get==null?u(n,`value`)&&this.set(e,t,n.value,null):e._.accessCache[t]=0,Reflect.defineProperty(e,t,n)}};function xr(e){return d(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}var Sr=!0;function Cr(e){let t=Dr(e),n=e.proxy,i=e.ctx;Sr=!1,t.beforeCreate&&Tr(t.beforeCreate,e,`bc`);let{data:a,computed:o,methods:s,watch:c,provide:l,inject:u,created:f,beforeMount:p,mounted:m,beforeUpdate:g,updated:_,activated:y,deactivated:b,beforeDestroy:x,beforeUnmount:S,destroyed:ee,unmounted:te,render:ne,renderTracked:re,renderTriggered:ie,errorCaptured:ae,serverPrefetch:oe,expose:se,inheritAttrs:ce,components:le,directives:ue,filters:de}=t;if(u&&wr(u,i,null),s)for(let e in s){let t=s[e];h(t)&&(i[e]=t.bind(n))}if(a){let t=a.call(n,n);v(t)&&(e.data=Rt(t))}if(Sr=!0,o)for(let e in o){let t=o[e],a=wa({get:h(t)?t.bind(n,n):h(t.get)?t.get.bind(n,n):r,set:!h(t)&&h(t.set)?t.set.bind(n):r});Object.defineProperty(i,e,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(c)for(let e in c)Er(c[e],i,n,e);if(l){let e=h(l)?l.call(n):l;Reflect.ownKeys(e).forEach(t=>{Nn(t,e[t])})}f&&Tr(f,e,`c`);function C(e,t){d(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(C(ar,p),C(or,m),C(sr,g),C(cr,_),C($n,y),C(er,b),C(mr,ae),C(pr,re),C(fr,ie),C(lr,S),C(ur,te),C(dr,oe),d(se))if(se.length){let t=e.exposed||={};se.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t,enumerable:!0})})}else e.exposed||={};ne&&e.render===r&&(e.render=ne),ce!=null&&(e.inheritAttrs=ce),le&&(e.components=le),ue&&(e.directives=ue),oe&&Kn(e)}function wr(e,t,n=r){d(e)&&(e=Mr(e));for(let n in e){let r=e[n],i;i=v(r)?`default`in r?Pn(r.from||n,r.default,!0):Pn(r.from||n):Pn(r),j(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e}):t[n]=i}}function Tr(e,t,n){ln(d(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function Er(e,t,n,r){let i=r.includes(`.`)?Bn(n,r):()=>n[r];if(g(e)){let n=t[e];h(n)&&Ln(i,n)}else if(h(e))Ln(i,e.bind(n));else if(v(e))if(d(e))e.forEach(e=>Er(e,t,n,r));else{let r=h(e.handler)?e.handler.bind(n):t[e.handler];h(r)&&Ln(i,r,e)}}function Dr(e){let t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t),c;return s?c=s:!i.length&&!n&&!r?c=t:(c={},i.length&&i.forEach(e=>Or(c,e,o,!0)),Or(c,t,o)),v(t)&&a.set(t,c),c}function Or(e,t,n,r=!1){let{mixins:i,extends:a}=t;a&&Or(e,a,n,!0),i&&i.forEach(t=>Or(e,t,n,!0));for(let i in t)if(!(r&&i===`expose`)){let r=kr[i]||n&&n[i];e[i]=r?r(e[i],t[i]):t[i]}return e}var kr={data:Ar,props:Fr,emits:Fr,methods:Pr,computed:Pr,beforeCreate:Nr,created:Nr,beforeMount:Nr,mounted:Nr,beforeUpdate:Nr,updated:Nr,beforeDestroy:Nr,beforeUnmount:Nr,destroyed:Nr,unmounted:Nr,activated:Nr,deactivated:Nr,errorCaptured:Nr,serverPrefetch:Nr,components:Pr,directives:Pr,watch:Ir,provide:Ar,inject:jr};function Ar(e,t){return t?e?function(){return s(h(e)?e.call(this,this):e,h(t)?t.call(this,this):t)}:t:e}function jr(e,t){return Pr(Mr(e),Mr(t))}function Mr(e){if(d(e)){let t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Nr(e,t){return e?[...new Set([].concat(e,t))]:t}function Pr(e,t){return e?s(Object.create(null),e,t):t}function Fr(e,t){return e?d(e)&&d(t)?[...new Set([...e,...t])]:s(Object.create(null),xr(e),xr(t??{})):t}function Ir(e,t){if(!e)return t;if(!t)return e;let n=s(Object.create(null),e);for(let r in t)n[r]=Nr(e[r],t[r]);return n}function Lr(){return{app:null,config:{isNativeTag:i,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}var Rr=0;function zr(e,t){return function(n,r=null){h(n)||(n=s({},n)),r!=null&&!v(r)&&(r=null);let i=Lr(),a=new WeakSet,o=[],c=!1,l=i.app={_uid:Rr++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Ta,get config(){return i.config},set config(e){},use(e,...t){return a.has(e)||(e&&h(e.install)?(a.add(e),e.install(l,...t)):h(e)&&(a.add(e),e(l,...t))),l},mixin(e){return i.mixins.includes(e)||i.mixins.push(e),l},component(e,t){return t?(i.components[e]=t,l):i.components[e]},directive(e,t){return t?(i.directives[e]=t,l):i.directives[e]},mount(a,o,s){if(!c){let u=l._ceVNode||Gi(n,r);return u.appContext=i,s===!0?s=`svg`:s===!1&&(s=void 0),o&&t?t(u,a):e(u,a,s),c=!0,l._container=a,a.__vue_app__=l,Sa(u.component)}},onUnmount(e){o.push(e)},unmount(){c&&(ln(o,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(e,t){return i.provides[e]=t,l},runWithContext(e){let t=Br;Br=l;try{return e()}finally{Br=t}}};return l}}var Br=null,Vr=(e,t)=>t===`modelValue`||t===`model-value`?e.modelModifiers:e[`${t}Modifiers`]||e[`${ae(t)}Modifiers`]||e[`${se(t)}Modifiers`];function Hr(e,n,...r){if(e.isUnmounted)return;let i=e.vnode.props||t,a=r,o=n.startsWith(`update:`),s=o&&Vr(i,n.slice(7));s&&(s.trim&&(a=r.map(e=>g(e)?e.trim():e)),s.number&&(a=r.map(fe)));let c,l=i[c=le(n)]||i[c=le(ae(n))];!l&&o&&(l=i[c=le(se(n))]),l&&ln(l,e,6,a);let u=i[c+`Once`];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,ln(u,e,6,a)}}var Ur=new WeakMap;function Wr(e,t,n=!1){let r=n?Ur:t.emitsCache,i=r.get(e);if(i!==void 0)return i;let a=e.emits,o={},c=!1;if(!h(e)){let r=e=>{let n=Wr(e,t,!0);n&&(c=!0,s(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return!a&&!c?(v(e)&&r.set(e,null),null):(d(a)?a.forEach(e=>o[e]=null):s(o,a),v(e)&&r.set(e,o),o)}function Gr(e,t){return!e||!a(t)?!1:(t=t.slice(2).replace(/Once$/,``),u(e,t[0].toLowerCase()+t.slice(1))||u(e,se(t))||u(e,t))}function Kr(e){let{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[a],slots:s,attrs:c,emit:l,render:u,renderCache:d,props:f,data:p,setupState:m,ctx:h,inheritAttrs:g}=e,_=kn(e),v,y;try{if(n.shapeFlag&4){let e=i||r,t=e;v=Qi(u.call(t,e,d,f,m,p,h)),y=c}else{let e=t;v=Qi(e.length>1?e(f,{attrs:c,slots:s,emit:l}):e(f,null)),y=t.props?c:qr(c)}}catch(t){Pi.length=0,un(t,e,1),v=Gi(Mi)}let b=v;if(y&&g!==!1){let e=Object.keys(y),{shapeFlag:t}=b;e.length&&t&7&&(a&&e.some(o)&&(y=Jr(y,a)),b=Ji(b,y,!1,!0))}return n.dirs&&(b=Ji(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&Wn(b,n.transition),v=b,kn(_),v}var qr=e=>{let t;for(let n in e)(n===`class`||n===`style`||a(n))&&((t||={})[n]=e[n]);return t},Jr=(e,t)=>{let n={};for(let r in e)(!o(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Yr(e,t,n){let{props:r,children:i,component:a}=e,{props:o,children:s,patchFlag:c}=t,l=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Xr(r,o,l):!!o;if(c&8){let e=t.dynamicProps;for(let t=0;t<e.length;t++){let n=e[t];if(Zr(o,r,n)&&!Gr(l,n))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===o?!1:r?o?Xr(r,o,l):!0:!!o;return!1}function Xr(e,t,n){let r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){let a=r[i];if(Zr(t,e,a)&&!Gr(n,a))return!0}return!1}function Zr(e,t,n){let r=e[n],i=t[n];return n===`style`&&v(r)&&v(i)?!we(r,i):r!==i}function Qr({vnode:e,parent:t},n){for(;t;){let r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}var $r={},ei=()=>Object.create($r),ti=e=>Object.getPrototypeOf(e)===$r;function ni(e,t,n,r=!1){let i={},a=ei();e.propsDefaults=Object.create(null),ii(e,t,i,a);for(let t in e.propsOptions[0])t in i||(i[t]=void 0);n?e.props=r?i:zt(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function ri(e,t,n,r){let{props:i,attrs:a,vnode:{patchFlag:o}}=e,s=k(i),[c]=e.propsOptions,l=!1;if((r||o>0)&&!(o&16)){if(o&8){let n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(Gr(e.emitsOptions,o))continue;let d=t[o];if(c)if(u(a,o))d!==a[o]&&(a[o]=d,l=!0);else{let t=ae(o);i[t]=ai(c,s,t,d,e,!1)}else d!==a[o]&&(a[o]=d,l=!0)}}}else{ii(e,t,i,a)&&(l=!0);let r;for(let a in s)(!t||!u(t,a)&&((r=se(a))===a||!u(t,r)))&&(c?n&&(n[a]!==void 0||n[r]!==void 0)&&(i[a]=ai(c,s,a,void 0,e,!0)):delete i[a]);if(a!==s)for(let e in a)(!t||!u(t,e))&&(delete a[e],l=!0)}l&&it(e.attrs,`set`,``)}function ii(e,n,r,i){let[a,o]=e.propsOptions,s=!1,c;if(n)for(let t in n){if(ne(t))continue;let l=n[t],d;a&&u(a,d=ae(t))?!o||!o.includes(d)?r[d]=l:(c||={})[d]=l:Gr(e.emitsOptions,t)||(!(t in i)||l!==i[t])&&(i[t]=l,s=!0)}if(o){let n=k(r),i=c||t;for(let t=0;t<o.length;t++){let s=o[t];r[s]=ai(a,n,s,i[s],e,!u(i,s))}}return s}function ai(e,t,n,r,i,a){let o=e[n];if(o!=null){let e=u(o,`default`);if(e&&r===void 0){let e=o.default;if(o.type!==Function&&!o.skipFactory&&h(e)){let{propsDefaults:a}=i;if(n in a)r=a[n];else{let o=ua(i);r=a[n]=e.call(null,t),o()}}else r=e;i.ce&&i.ce._setProp(n,r)}o[0]&&(a&&!e?r=!1:o[1]&&(r===``||r===se(n))&&(r=!0))}return r}var oi=new WeakMap;function si(e,r,i=!1){let a=i?oi:r.propsCache,o=a.get(e);if(o)return o;let c=e.props,l={},f=[],p=!1;if(!h(e)){let t=e=>{p=!0;let[t,n]=si(e,r,!0);s(l,t),n&&f.push(...n)};!i&&r.mixins.length&&r.mixins.forEach(t),e.extends&&t(e.extends),e.mixins&&e.mixins.forEach(t)}if(!c&&!p)return v(e)&&a.set(e,n),n;if(d(c))for(let e=0;e<c.length;e++){let n=ae(c[e]);ci(n)&&(l[n]=t)}else if(c)for(let e in c){let t=ae(e);if(ci(t)){let n=c[e],r=l[t]=d(n)||h(n)?{type:n}:s({},n),i=r.type,a=!1,o=!0;if(d(i))for(let e=0;e<i.length;++e){let t=i[e],n=h(t)&&t.name;if(n===`Boolean`){a=!0;break}else n===`String`&&(o=!1)}else a=h(i)&&i.name===`Boolean`;r[0]=a,r[1]=o,(a||u(r,`default`))&&f.push(t)}}let m=[l,f];return v(e)&&a.set(e,m),m}function ci(e){return e[0]!==`$`&&!ne(e)}var li=e=>e===`_`||e===`_ctx`||e===`$stable`,ui=e=>d(e)?e.map(Qi):[Qi(e)],di=(e,t,n)=>{if(t._n)return t;let r=An((...e)=>ui(t(...e)),n);return r._c=!1,r},fi=(e,t,n)=>{let r=e._ctx;for(let n in e){if(li(n))continue;let i=e[n];if(h(i))t[n]=di(n,i,r);else if(i!=null){let e=ui(i);t[n]=()=>e}}},pi=(e,t)=>{let n=ui(t);e.slots.default=()=>n},mi=(e,t,n)=>{for(let r in t)(n||!li(r))&&(e[r]=t[r])},hi=(e,t,n)=>{let r=e.slots=ei();if(e.vnode.shapeFlag&32){let e=t._;e?(mi(r,t,n),n&&C(r,`_`,e,!0)):fi(t,r)}else t&&pi(e,t)},gi=(e,n,r)=>{let{vnode:i,slots:a}=e,o=!0,s=t;if(i.shapeFlag&32){let e=n._;e?r&&e===1?o=!1:mi(a,n,r):(o=!n.$stable,fi(n,a)),s=n}else n&&(pi(e,n),s={default:1});if(o)for(let e in a)!li(e)&&s[e]==null&&delete a[e]},_i=ki;function vi(e){return yi(e)}function yi(e,i){let a=me();a.__VUE__=!0;let{insert:o,remove:s,patchProp:c,createElement:l,createText:u,createComment:d,setText:f,setElementText:p,parentNode:m,nextSibling:h,setScopeId:g=r,insertStaticContent:_}=e,v=(e,t,n,r=null,i=null,a=null,o=void 0,s=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Hi(e,t)&&(r=we(e),ye(e,i,a,!0),e=null),t.patchFlag===-2&&(c=!1,t.dynamicChildren=null);let{type:l,ref:u,shapeFlag:d}=t;switch(l){case ji:y(e,t,n,r);break;case Mi:b(e,t,n,r);break;case Ni:e??x(t,n,r,o);break;case Ai:le(e,t,n,r,i,a,o,s,c);break;default:d&1?te(e,t,n,r,i,a,o,s,c):d&6?ue(e,t,n,r,i,a,o,s,c):(d&64||d&128)&&l.process(e,t,n,r,i,a,o,s,c,Ee)}u!=null&&i?Yn(u,e&&e.ref,a,t||e,!t):u==null&&e&&e.ref!=null&&Yn(e.ref,null,a,e,!0)},y=(e,t,n,r)=>{if(e==null)o(t.el=u(t.children),n,r);else{let n=t.el=e.el;t.children!==e.children&&f(n,t.children)}},b=(e,t,n,r)=>{e==null?o(t.el=d(t.children||``),n,r):t.el=e.el},x=(e,t,n,r)=>{[e.el,e.anchor]=_(e.children,t,n,r,e.el,e.anchor)},S=({el:e,anchor:t},n,r)=>{let i;for(;e&&e!==t;)i=h(e),o(e,n,r),e=i;o(t,n,r)},ee=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=h(e),s(e),e=n;s(t)},te=(e,t,n,r,i,a,o,s,c)=>{if(t.type===`svg`?o=`svg`:t.type===`math`&&(o=`mathml`),e==null)re(t,n,r,i,a,o,s,c);else{let n=e.el&&e.el._isVueCE?e.el:null;try{n&&n._beginPatch(),oe(e,t,i,a,o,s,c)}finally{n&&n._endPatch()}}},re=(e,t,n,r,i,a,s,u)=>{let d,f,{props:m,shapeFlag:h,transition:g,dirs:_}=e;if(d=e.el=l(e.type,a,m&&m.is,m),h&8?p(d,e.children):h&16&&ae(e.children,d,null,r,i,bi(e,a),s,u),_&&Mn(e,null,r,`created`),ie(d,e,e.scopeId,s,r),m){for(let e in m)e!==`value`&&!ne(e)&&c(d,e,null,m[e],a,r);`value`in m&&c(d,`value`,null,m.value,a),(f=m.onVnodeBeforeMount)&&na(f,r,e)}_&&Mn(e,null,r,`beforeMount`);let v=Si(i,g);v&&g.beforeEnter(d),o(d,t,n),((f=m&&m.onVnodeMounted)||v||_)&&_i(()=>{f&&na(f,r,e),v&&g.enter(d),_&&Mn(e,null,r,`mounted`)},i)},ie=(e,t,n,r,i)=>{if(n&&g(e,n),r)for(let t=0;t<r.length;t++)g(e,r[t]);if(i){let n=i.subTree;if(t===n||Oi(n.type)&&(n.ssContent===t||n.ssFallback===t)){let t=i.vnode;ie(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},ae=(e,t,n,r,i,a,o,s,c=0)=>{for(let l=c;l<e.length;l++)v(null,e[l]=s?$i(e[l]):Qi(e[l]),t,n,r,i,a,o,s)},oe=(e,n,r,i,a,o,s)=>{let l=n.el=e.el,{patchFlag:u,dynamicChildren:d,dirs:f}=n;u|=e.patchFlag&16;let m=e.props||t,h=n.props||t,g;if(r&&xi(r,!1),(g=h.onVnodeBeforeUpdate)&&na(g,r,n,e),f&&Mn(n,e,r,`beforeUpdate`),r&&xi(r,!0),(m.innerHTML&&h.innerHTML==null||m.textContent&&h.textContent==null)&&p(l,``),d?se(e.dynamicChildren,d,l,r,i,bi(n,a),o):s||he(e,n,l,null,r,i,bi(n,a),o,!1),u>0){if(u&16)ce(l,m,h,r,a);else if(u&2&&m.class!==h.class&&c(l,`class`,null,h.class,a),u&4&&c(l,`style`,m.style,h.style,a),u&8){let e=n.dynamicProps;for(let t=0;t<e.length;t++){let n=e[t],i=m[n],o=h[n];(o!==i||n===`value`)&&c(l,n,i,o,a,r)}}u&1&&e.children!==n.children&&p(l,n.children)}else !s&&d==null&&ce(l,m,h,r,a);((g=h.onVnodeUpdated)||f)&&_i(()=>{g&&na(g,r,n,e),f&&Mn(n,e,r,`updated`)},i)},se=(e,t,n,r,i,a,o)=>{for(let s=0;s<t.length;s++){let c=e[s],l=t[s];v(c,l,c.el&&(c.type===Ai||!Hi(c,l)||c.shapeFlag&198)?m(c.el):n,null,r,i,a,o,!0)}},ce=(e,n,r,i,a)=>{if(n!==r){if(n!==t)for(let t in n)!ne(t)&&!(t in r)&&c(e,t,n[t],null,a,i);for(let t in r){if(ne(t))continue;let o=r[t],s=n[t];o!==s&&t!==`value`&&c(e,t,s,o,a,i)}`value`in r&&c(e,`value`,n.value,r.value,a)}},le=(e,t,n,r,i,a,s,c,l)=>{let d=t.el=e?e.el:u(``),f=t.anchor=e?e.anchor:u(``),{patchFlag:p,dynamicChildren:m,slotScopeIds:h}=t;h&&(c=c?c.concat(h):h),e==null?(o(d,n,r),o(f,n,r),ae(t.children||[],n,f,i,a,s,c,l)):p>0&&p&64&&m&&e.dynamicChildren&&e.dynamicChildren.length===m.length?(se(e.dynamicChildren,m,n,i,a,s,c),(t.key!=null||i&&t===i.subTree)&&Ci(e,t,!0)):he(e,t,n,f,i,a,s,c,l)},ue=(e,t,n,r,i,a,o,s,c)=>{t.slotScopeIds=s,e==null?t.shapeFlag&512?i.ctx.activate(t,n,r,o,c):C(t,n,r,i,a,o,c):fe(e,t,c)},C=(e,t,n,r,i,a,o)=>{let s=e.component=aa(e,r,i);if(Qn(e)&&(s.ctx.renderer=Ee),ma(s,!1,o),s.asyncDep){if(i&&i.registerDep(s,pe,o),!e.el){let r=s.subTree=Gi(Mi);b(null,r,t,n),e.placeholder=r.el}}else pe(s,e,t,n,i,a,o)},fe=(e,t,n)=>{let r=t.component=e.component;if(Yr(e,t,n))if(r.asyncDep&&!r.asyncResolved){w(r,t,n);return}else r.next=t,r.update();else t.el=e.el,r.vnode=t},pe=(e,t,n,r,i,a,o)=>{let s=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:s,vnode:c}=e;{let n=Ti(e);if(n){t&&(t.el=c.el,w(e,t,o)),n.asyncDep.then(()=>{_i(()=>{e.isUnmounted||l()},i)});return}}let u=t,d;xi(e,!1),t?(t.el=c.el,w(e,t,o)):t=c,n&&de(n),(d=t.props&&t.props.onVnodeBeforeUpdate)&&na(d,s,t,c),xi(e,!0);let f=Kr(e),p=e.subTree;e.subTree=f,v(p,f,m(p.el),we(p),e,i,a),t.el=f.el,u===null&&Qr(e,f.el),r&&_i(r,i),(d=t.props&&t.props.onVnodeUpdated)&&_i(()=>na(d,s,t,c),i)}else{let o,{el:s,props:c}=t,{bm:l,m:u,parent:d,root:f,type:p}=e,m=Zn(t);if(xi(e,!1),l&&de(l),!m&&(o=c&&c.onVnodeBeforeMount)&&na(o,d,t),xi(e,!0),s&&Oe){let t=()=>{e.subTree=Kr(e),Oe(s,e.subTree,e,i,null)};m&&p.__asyncHydrate?p.__asyncHydrate(s,e,t):t()}else{f.ce&&f.ce._hasShadowRoot()&&f.ce._injectChildStyle(p);let o=e.subTree=Kr(e);v(null,o,n,r,e,i,a),t.el=o.el}if(u&&_i(u,i),!m&&(o=c&&c.onVnodeMounted)){let e=t;_i(()=>na(o,d,e),i)}(t.shapeFlag&256||d&&Zn(d.vnode)&&d.vnode.shapeFlag&256)&&e.a&&_i(e.a,i),e.isMounted=!0,t=n=r=null}};e.scope.on();let c=e.effect=new Me(s);e.scope.off();let l=e.update=c.run.bind(c),u=e.job=c.runIfDirty.bind(c);u.i=e,u.id=e.uid,c.scheduler=()=>N(u),xi(e,!0),l()},w=(e,t,n)=>{t.component=e;let r=e.vnode.props;e.vnode=t,e.next=null,ri(e,t.props,r,n),gi(e,t.children,n),qe(),Cn(e),Je()},he=(e,t,n,r,i,a,o,s,c=!1)=>{let l=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:m}=t;if(f>0){if(f&128){_e(l,d,n,r,i,a,o,s,c);return}else if(f&256){ge(l,d,n,r,i,a,o,s,c);return}}m&8?(u&16&&Ce(l,i,a),d!==l&&p(n,d)):u&16?m&16?_e(l,d,n,r,i,a,o,s,c):Ce(l,i,a,!0):(u&8&&p(n,``),m&16&&ae(d,n,r,i,a,o,s,c))},ge=(e,t,r,i,a,o,s,c,l)=>{e||=n,t||=n;let u=e.length,d=t.length,f=Math.min(u,d),p;for(p=0;p<f;p++){let n=t[p]=l?$i(t[p]):Qi(t[p]);v(e[p],n,r,null,a,o,s,c,l)}u>d?Ce(e,a,o,!0,!1,f):ae(t,r,i,a,o,s,c,l,f)},_e=(e,t,r,i,a,o,s,c,l)=>{let u=0,d=t.length,f=e.length-1,p=d-1;for(;u<=f&&u<=p;){let n=e[u],i=t[u]=l?$i(t[u]):Qi(t[u]);if(Hi(n,i))v(n,i,r,null,a,o,s,c,l);else break;u++}for(;u<=f&&u<=p;){let n=e[f],i=t[p]=l?$i(t[p]):Qi(t[p]);if(Hi(n,i))v(n,i,r,null,a,o,s,c,l);else break;f--,p--}if(u>f){if(u<=p){let e=p+1,n=e<d?t[e].el:i;for(;u<=p;)v(null,t[u]=l?$i(t[u]):Qi(t[u]),r,n,a,o,s,c,l),u++}}else if(u>p)for(;u<=f;)ye(e[u],a,o,!0),u++;else{let m=u,h=u,g=new Map;for(u=h;u<=p;u++){let e=t[u]=l?$i(t[u]):Qi(t[u]);e.key!=null&&g.set(e.key,u)}let _,y=0,b=p-h+1,x=!1,S=0,ee=Array(b);for(u=0;u<b;u++)ee[u]=0;for(u=m;u<=f;u++){let n=e[u];if(y>=b){ye(n,a,o,!0);continue}let i;if(n.key!=null)i=g.get(n.key);else for(_=h;_<=p;_++)if(ee[_-h]===0&&Hi(n,t[_])){i=_;break}i===void 0?ye(n,a,o,!0):(ee[i-h]=u+1,i>=S?S=i:x=!0,v(n,t[i],r,null,a,o,s,c,l),y++)}let te=x?wi(ee):n;for(_=te.length-1,u=b-1;u>=0;u--){let e=h+u,n=t[e],f=t[e+1],p=e+1<d?f.el||Di(f):i;ee[u]===0?v(null,n,r,p,a,o,s,c,l):x&&(_<0||u!==te[_]?ve(n,r,p,2):_--)}}},ve=(e,t,n,r,i=null)=>{let{el:a,type:c,transition:l,children:u,shapeFlag:d}=e;if(d&6){ve(e.component.subTree,t,n,r);return}if(d&128){e.suspense.move(t,n,r);return}if(d&64){c.move(e,t,n,Ee);return}if(c===Ai){o(a,t,n);for(let e=0;e<u.length;e++)ve(u[e],t,n,r);o(e.anchor,t,n);return}if(c===Ni){S(e,t,n);return}if(r!==2&&d&1&&l)if(r===0)l.beforeEnter(a),o(a,t,n),_i(()=>l.enter(a),i);else{let{leave:r,delayLeave:i,afterLeave:c}=l,u=()=>{e.ctx.isUnmounted?s(a):o(a,t,n)},d=()=>{a._isLeaving&&a[Un](!0),r(a,()=>{u(),c&&c()})};i?i(a,u,d):d()}else o(a,t,n)},ye=(e,t,n,r=!1,i=!1)=>{let{type:a,props:o,ref:s,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:d,dirs:f,cacheIndex:p}=e;if(d===-2&&(i=!1),s!=null&&(qe(),Yn(s,null,n,e,!0),Je()),p!=null&&(t.renderCache[p]=void 0),u&256){t.ctx.deactivate(e);return}let m=u&1&&f,h=!Zn(e),g;if(h&&(g=o&&o.onVnodeBeforeUnmount)&&na(g,t,e),u&6)Se(e.component,n,r);else{if(u&128){e.suspense.unmount(n,r);return}m&&Mn(e,null,t,`beforeUnmount`),u&64?e.type.remove(e,t,n,Ee,r):l&&!l.hasOnce&&(a!==Ai||d>0&&d&64)?Ce(l,t,n,!1,!0):(a===Ai&&d&384||!i&&u&16)&&Ce(c,t,n),r&&be(e)}(h&&(g=o&&o.onVnodeUnmounted)||m)&&_i(()=>{g&&na(g,t,e),m&&Mn(e,null,t,`unmounted`)},n)},be=e=>{let{type:t,el:n,anchor:r,transition:i}=e;if(t===Ai){xe(n,r);return}if(t===Ni){ee(e);return}let a=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(e.shapeFlag&1&&i&&!i.persisted){let{leave:t,delayLeave:r}=i,o=()=>t(n,a);r?r(e.el,a,o):o()}else a()},xe=(e,t)=>{let n;for(;e!==t;)n=h(e),s(e),e=n;s(t)},Se=(e,t,n)=>{let{bum:r,scope:i,job:a,subTree:o,um:s,m:c,a:l}=e;Ei(c),Ei(l),r&&de(r),i.stop(),a&&(a.flags|=8,ye(o,e,t,n)),s&&_i(s,t),_i(()=>{e.isUnmounted=!0},t)},Ce=(e,t,n,r=!1,i=!1,a=0)=>{for(let o=a;o<e.length;o++)ye(e[o],t,n,r,i)},we=e=>{if(e.shapeFlag&6)return we(e.component.subTree);if(e.shapeFlag&128)return e.suspense.next();let t=h(e.anchor||e.el),n=t&&t[Vn];return n?h(n):t},Te=!1,T=(e,t,n)=>{let r;e==null?t._vnode&&(ye(t._vnode,null,null,!0),r=t._vnode.component):v(t._vnode||null,e,t,null,null,null,n),t._vnode=e,Te||=(Te=!0,Cn(r),wn(),!1)},Ee={p:v,um:ye,m:ve,r:be,mt:C,mc:ae,pc:he,pbc:se,n:we,o:e},De,Oe;return i&&([De,Oe]=i(Ee)),{render:T,hydrate:De,createApp:zr(T,De)}}function bi({type:e,props:t},n){return n===`svg`&&e===`foreignObject`||n===`mathml`&&e===`annotation-xml`&&t&&t.encoding&&t.encoding.includes(`html`)?void 0:n}function xi({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Si(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ci(e,t,n=!1){let r=e.children,i=t.children;if(d(r)&&d(i))for(let e=0;e<r.length;e++){let t=r[e],a=i[e];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[e]=$i(i[e]),a.el=t.el),!n&&a.patchFlag!==-2&&Ci(t,a)),a.type===ji&&(a.patchFlag===-1&&(a=i[e]=$i(a)),a.el=t.el),a.type===Mi&&!a.el&&(a.el=t.el)}}function wi(e){let t=e.slice(),n=[0],r,i,a,o,s,c=e.length;for(r=0;r<c;r++){let c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(a=0,o=n.length-1;a<o;)s=a+o>>1,e[n[s]]<c?a=s+1:o=s;c<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}function Ti(e){let t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ti(t)}function Ei(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Di(e){if(e.placeholder)return e.placeholder;let t=e.component;return t?Di(t.subTree):null}var Oi=e=>e.__isSuspense;function ki(e,t){t&&t.pendingBranch?d(e)?t.effects.push(...e):t.effects.push(e):Sn(e)}var Ai=Symbol.for(`v-fgt`),ji=Symbol.for(`v-txt`),Mi=Symbol.for(`v-cmt`),Ni=Symbol.for(`v-stc`),Pi=[],Fi=null;function P(e=!1){Pi.push(Fi=e?null:[])}function Ii(){Pi.pop(),Fi=Pi[Pi.length-1]||null}var Li=1;function Ri(e,t=!1){Li+=e,e<0&&Fi&&t&&(Fi.hasOnce=!0)}function zi(e){return e.dynamicChildren=Li>0?Fi||n:null,Ii(),Li>0&&Fi&&Fi.push(e),e}function F(e,t,n,r,i,a){return zi(I(e,t,n,r,i,a,!0))}function Bi(e,t,n,r,i){return zi(Gi(e,t,n,r,i,!0))}function Vi(e){return e?e.__v_isVNode===!0:!1}function Hi(e,t){return e.type===t.type&&e.key===t.key}var Ui=({key:e})=>e??null,Wi=({ref:e,ref_key:t,ref_for:n})=>(typeof e==`number`&&(e=``+e),e==null?null:g(e)||j(e)||h(e)?{i:Dn,r:e,k:t,f:!!n}:e);function I(e,t=null,n=null,r=0,i=null,a=e===Ai?0:1,o=!1,s=!1){let c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ui(t),ref:t&&Wi(t),scopeId:On,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Dn};return s?(ea(c,n),a&128&&e.normalize(c)):n&&(c.shapeFlag|=g(n)?8:16),Li>0&&!o&&Fi&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&Fi.push(c),c}var Gi=Ki;function Ki(e,t=null,n=null,r=0,i=null,a=!1){if((!e||e===hr)&&(e=Mi),Vi(e)){let r=Ji(e,t,!0);return n&&ea(r,n),Li>0&&!a&&Fi&&(r.shapeFlag&6?Fi[Fi.indexOf(e)]=r:Fi.push(r)),r.patchFlag=-2,r}if(Ca(e)&&(e=e.__vccOpts),t){t=qi(t);let{class:e,style:n}=t;e&&!g(e)&&(t.class=ye(e)),v(n)&&(Gt(n)&&!d(n)&&(n=s({},n)),t.style=w(n))}let o=g(e)?1:Oi(e)?128:Hn(e)?64:v(e)?4:h(e)?2:0;return I(e,t,n,r,i,o,a,!0)}function qi(e){return e?Gt(e)||ti(e)?s({},e):e:null}function Ji(e,t,n=!1,r=!1){let{props:i,ref:a,patchFlag:o,children:s,transition:c}=e,l=t?ta(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Ui(l),ref:t&&t.ref?n&&a?d(a)?a.concat(Wi(t)):[a,Wi(t)]:Wi(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ai?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ji(e.ssContent),ssFallback:e.ssFallback&&Ji(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Wn(u,c.clone(u)),u}function Yi(e=` `,t=0){return Gi(ji,null,e,t)}function Xi(e,t){let n=Gi(Ni,null,e);return n.staticCount=t,n}function Zi(e=``,t=!1){return t?(P(),Bi(Mi,null,e)):Gi(Mi,null,e)}function Qi(e){return e==null||typeof e==`boolean`?Gi(Mi):d(e)?Gi(Ai,null,e.slice()):Vi(e)?$i(e):Gi(ji,null,String(e))}function $i(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ji(e)}function ea(e,t){let n=0,{shapeFlag:r}=e;if(t==null)t=null;else if(d(t))n=16;else if(typeof t==`object`)if(r&65){let n=t.default;n&&(n._c&&(n._d=!1),ea(e,n()),n._c&&(n._d=!0));return}else{n=32;let r=t._;!r&&!ti(t)?t._ctx=Dn:r===3&&Dn&&(Dn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else h(t)?(t={default:t,_ctx:Dn},n=32):(t=String(t),r&64?(n=16,t=[Yi(t)]):n=8);e.children=t,e.shapeFlag|=n}function ta(...e){let t={};for(let n=0;n<e.length;n++){let r=e[n];for(let e in r)if(e===`class`)t.class!==r.class&&(t.class=ye([t.class,r.class]));else if(e===`style`)t.style=w([t.style,r.style]);else if(a(e)){let n=t[e],i=r[e];i&&n!==i&&!(d(n)&&n.includes(i))&&(t[e]=n?[].concat(n,i):i)}else e!==``&&(t[e]=r[e])}return t}function na(e,t,n,r=null){ln(e,t,7,[n,r])}var ra=Lr(),ia=0;function aa(e,n,r){let i=e.type,a=(n?n.appContext:e.appContext)||ra,o={uid:ia++,vnode:e,type:i,parent:n,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ke(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(a.provides),ids:n?n.ids:[``,0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:si(i,a),emitsOptions:Wr(i,a),emit:null,emitted:null,propsDefaults:t,inheritAttrs:i.inheritAttrs,ctx:t,data:t,props:t,attrs:t,slots:t,refs:t,setupState:t,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=n?n.root:o,o.emit=Hr.bind(null,o),e.ce&&e.ce(o),o}var oa=null,sa=()=>oa||Dn,ca,la;{let e=me(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach(t=>t(e)):r[0](e)}};ca=t(`__VUE_INSTANCE_SETTERS__`,e=>oa=e),la=t(`__VUE_SSR_SETTERS__`,e=>pa=e)}var ua=e=>{let t=oa;return ca(e),e.scope.on(),()=>{e.scope.off(),ca(t)}},da=()=>{oa&&oa.scope.off(),ca(null)};function fa(e){return e.vnode.shapeFlag&4}var pa=!1;function ma(e,t=!1,n=!1){t&&la(t);let{props:r,children:i}=e.vnode,a=fa(e);ni(e,r,a,t),hi(e,i,n||t);let o=a?ha(e,t):void 0;return t&&la(!1),o}function ha(e,t){let n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,br);let{setup:r}=n;if(r){qe();let n=e.setupContext=r.length>1?xa(e):null,i=ua(e),a=cn(r,e,0,[e.props,n]),o=y(a);if(Je(),i(),(o||e.sp)&&!Zn(e)&&Kn(e),o){if(a.then(da,da),t)return a.then(n=>{ga(e,n,t)}).catch(t=>{un(t,e,0)});e.asyncDep=a}else ga(e,a,t)}else ya(e,t)}function ga(e,t,n){h(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:v(t)&&(e.setupState=Qt(t)),ya(e,n)}var _a,va;function ya(e,t,n){let i=e.type;if(!e.render){if(!t&&_a&&!i.render){let t=i.template||Dr(e).template;if(t){let{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:o}=i;i.render=_a(t,s(s({isCustomElement:n,delimiters:a},r),o))}}e.render=i.render||r,va&&va(e)}{let t=ua(e);qe();try{Cr(e)}finally{Je(),t()}}}var ba={get(e,t){return D(e,`get`,``),e[t]}};function xa(e){return{attrs:new Proxy(e.attrs,ba),slots:e.slots,emit:e.emit,expose:t=>{e.exposed=t||{}}}}function Sa(e){return e.exposed?e.exposeProxy||=new Proxy(Qt(Kt(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in vr)return vr[n](e)},has(e,t){return t in e||t in vr}}):e.proxy}function Ca(e){return h(e)&&`__vccOpts`in e}var wa=(e,t)=>en(e,t,pa),Ta=`3.5.28`,Ea=void 0,Da=typeof window<`u`&&window.trustedTypes;if(Da)try{Ea=Da.createPolicy(`vue`,{createHTML:e=>e})}catch{}var Oa=Ea?e=>Ea.createHTML(e):e=>e,ka=`http://www.w3.org/2000/svg`,Aa=`http://www.w3.org/1998/Math/MathML`,ja=typeof document<`u`?document:null,Ma=ja&&ja.createElement(`template`),Na={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{let t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{let i=t===`svg`?ja.createElementNS(ka,e):t===`mathml`?ja.createElementNS(Aa,e):n?ja.createElement(e,{is:n}):ja.createElement(e);return e===`select`&&r&&r.multiple!=null&&i.setAttribute(`multiple`,r.multiple),i},createText:e=>ja.createTextNode(e),createComment:e=>ja.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ja.querySelector(e),setScopeId(e,t){e.setAttribute(t,``)},insertStaticContent(e,t,n,r,i,a){let o=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{Ma.innerHTML=Oa(r===`svg`?`<svg>${e}</svg>`:r===`mathml`?`<math>${e}</math>`:e);let i=Ma.content;if(r===`svg`||r===`mathml`){let e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Pa=Symbol(`_vtc`);function Fa(e,t,n){let r=e[Pa];r&&(t=(t?[t,...r]:[...r]).join(` `)),t==null?e.removeAttribute(`class`):n?e.setAttribute(`class`,t):e.className=t}var Ia=Symbol(`_vod`),La=Symbol(`_vsh`),Ra=Symbol(``),za=/(?:^|;)\s*display\s*:/;function Ba(e,t,n){let r=e.style,i=g(n),a=!1;if(n&&!i){if(t)if(g(t))for(let e of t.split(`;`)){let t=e.slice(0,e.indexOf(`:`)).trim();n[t]??Ha(r,t,``)}else for(let e in t)n[e]??Ha(r,e,``);for(let e in n)e===`display`&&(a=!0),Ha(r,e,n[e])}else if(i){if(t!==n){let e=r[Ra];e&&(n+=`;`+e),r.cssText=n,a=za.test(n)}}else t&&e.removeAttribute(`style`);Ia in e&&(e[Ia]=a?r.display:``,e[La]&&(r.display=`none`))}var Va=/\s*!important$/;function Ha(e,t,n){if(d(n))n.forEach(n=>Ha(e,t,n));else if(n??=``,t.startsWith(`--`))e.setProperty(t,n);else{let r=Ga(e,t);Va.test(n)?e.setProperty(se(r),n.replace(Va,``),`important`):e[r]=n}}var Ua=[`Webkit`,`Moz`,`ms`],Wa={};function Ga(e,t){let n=Wa[t];if(n)return n;let r=ae(t);if(r!==`filter`&&r in e)return Wa[t]=r;r=ce(r);for(let n=0;n<Ua.length;n++){let i=Ua[n]+r;if(i in e)return Wa[t]=i}return t}var Ka=`http://www.w3.org/1999/xlink`;function qa(e,t,n,r,i,a=xe(t)){r&&t.startsWith(`xlink:`)?n==null?e.removeAttributeNS(Ka,t.slice(6,t.length)):e.setAttributeNS(Ka,t,n):n==null||a&&!Se(n)?e.removeAttribute(t):e.setAttribute(t,a?``:_(n)?String(n):n)}function Ja(e,t,n,r,i){if(t===`innerHTML`||t===`textContent`){n!=null&&(e[t]=t===`innerHTML`?Oa(n):n);return}let a=e.tagName;if(t===`value`&&a!==`PROGRESS`&&!a.includes(`-`)){let r=a===`OPTION`?e.getAttribute(`value`)||``:e.value,i=n==null?e.type===`checkbox`?`on`:``:String(n);(r!==i||!(`_value`in e))&&(e.value=i),n??e.removeAttribute(t),e._value=n;return}let o=!1;if(n===``||n==null){let r=typeof e[t];r===`boolean`?n=Se(n):n==null&&r===`string`?(n=``,o=!0):r===`number`&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function Ya(e,t,n,r){e.addEventListener(t,n,r)}function Xa(e,t,n,r){e.removeEventListener(t,n,r)}var Za=Symbol(`_vei`);function Qa(e,t,n,r,i=null){let a=e[Za]||(e[Za]={}),o=a[t];if(r&&o)o.value=r;else{let[n,s]=eo(t);r?Ya(e,n,a[t]=io(r,i),s):o&&(Xa(e,n,o,s),a[t]=void 0)}}var $a=/(?:Once|Passive|Capture)$/;function eo(e){let t;if($a.test(e)){t={};let n;for(;n=e.match($a);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===`:`?e.slice(3):se(e.slice(2)),t]}var to=0,no=Promise.resolve(),ro=()=>to||=(no.then(()=>to=0),Date.now());function io(e,t){let n=e=>{if(!e._vts)e._vts=Date.now();else if(e._vts<=n.attached)return;ln(ao(e,n.value),t,5,[e])};return n.value=e,n.attached=ro(),n}function ao(e,t){if(d(t)){let n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}else return t}var oo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,so=(e,t,n,r,i,s)=>{let c=i===`svg`;t===`class`?Fa(e,r,c):t===`style`?Ba(e,n,r):a(t)?o(t)||Qa(e,t,n,r,s):(t[0]===`.`?(t=t.slice(1),!0):t[0]===`^`?(t=t.slice(1),!1):co(e,t,r,c))?(Ja(e,t,r),!e.tagName.includes(`-`)&&(t===`value`||t===`checked`||t===`selected`)&&qa(e,t,r,c,s,t!==`value`)):e._isVueCE&&(/[A-Z]/.test(t)||!g(r))?Ja(e,ae(t),r,s,t):(t===`true-value`?e._trueValue=r:t===`false-value`&&(e._falseValue=r),qa(e,t,r,c))};function co(e,t,n,r){if(r)return!!(t===`innerHTML`||t===`textContent`||t in e&&oo(t)&&h(n));if(t===`spellcheck`||t===`draggable`||t===`translate`||t===`autocorrect`||t===`sandbox`&&e.tagName===`IFRAME`||t===`form`||t===`list`&&e.tagName===`INPUT`||t===`type`&&e.tagName===`TEXTAREA`)return!1;if(t===`width`||t===`height`){let t=e.tagName;if(t===`IMG`||t===`VIDEO`||t===`CANVAS`||t===`SOURCE`)return!1}return oo(t)&&g(n)?!1:t in e}var lo=e=>{let t=e.props[`onUpdate:modelValue`]||!1;return d(t)?e=>de(t,e):t};function uo(e){e.target.composing=!0}function fo(e){let t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event(`input`)))}var po=Symbol(`_assign`);function mo(e,t,n){return t&&(e=e.trim()),n&&(e=fe(e)),e}var ho={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[po]=lo(i);let a=r||i.props&&i.props.type===`number`;Ya(e,t?`change`:`input`,t=>{t.target.composing||e[po](mo(e.value,n,a))}),(n||a)&&Ya(e,`change`,()=>{e.value=mo(e.value,n,a)}),t||(Ya(e,`compositionstart`,uo),Ya(e,`compositionend`,fo),Ya(e,`change`,fo))},mounted(e,{value:t}){e.value=t??``},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:a}},o){if(e[po]=lo(o),e.composing)return;let s=(a||e.type===`number`)&&!/^0\d/.test(e.value)?fe(e.value):e.value,c=t??``;s!==c&&(document.activeElement===e&&e.type!==`range`&&(r&&t===n||i&&e.value.trim()===c)||(e.value=c))}},go={esc:`escape`,space:` `,up:`arrow-up`,left:`arrow-left`,right:`arrow-right`,down:`arrow-down`,delete:`backspace`},_o=(e,t)=>{let n=e._withKeys||={},r=t.join(`.`);return n[r]||(n[r]=(n=>{if(!(`key`in n))return;let r=se(n.key);if(t.some(e=>e===r||go[e]===r))return e(n)}))},vo=s({patchProp:so},Na),yo;function bo(){return yo||=vi(vo)}var xo=((...e)=>{let t=bo().createApp(...e),{mount:n}=t;return t.mount=e=>{let r=Co(e);if(!r)return;let i=t._component;!h(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent=``);let a=n(r,!1,So(r));return r instanceof Element&&(r.removeAttribute(`v-cloak`),r.setAttribute(`data-v-app`,``)),a},t});function So(e){if(e instanceof SVGElement)return`svg`;if(typeof MathMLElement==`function`&&e instanceof MathMLElement)return`mathml`}function Co(e){return g(e)?document.querySelector(e):e}var wo=()=>void 0,To=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Eo=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},Do={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(To(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Eo(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new Oo;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Oo=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},ko=function(e){let t=To(e);return Do.encodeByteArray(t,!0)},Ao=function(e){return ko(e).replace(/\./g,``)},jo=function(e){try{return Do.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function Mo(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var No=()=>Mo().__FIREBASE_DEFAULTS__,Po=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Fo=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&jo(e[1]);return t&&JSON.parse(t)},Io=()=>{try{return wo()||No()||Po()||Fo()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Lo=e=>Io()?.emulatorHosts?.[e],Ro=e=>{let t=Lo(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},zo=()=>Io()?.config,Bo=e=>Io()?.[`_${e}`],Vo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function Ho(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function Uo(e){return(await fetch(e,{credentials:`include`})).ok}function Wo(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}}},e);return[Ao(JSON.stringify(n)),Ao(JSON.stringify(o)),``].join(`.`)}var Go={};function Ko(){let e={prod:[],emulator:[]};for(let t of Object.keys(Go))Go[t]?e.emulator.push(t):e.prod.push(t);return e}function qo(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var Jo=!1;function Yo(e,t){if(typeof window>`u`||typeof document>`u`||!Ho(window.location.host)||Go[e]===t||Go[e]||Jo)return;Go[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=Ko().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{Jo=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=qo(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function Xo(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function Zo(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xo())}function Qo(){let e=Io()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function $o(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function es(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function ts(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function ns(){let e=Xo();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function rs(){return!Qo()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function is(){try{return typeof indexedDB==`object`}catch{return!1}}function as(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var os=`FirebaseError`,ss=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=os,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cs.prototype.create)}},cs=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?ls(i,n):`Error`;return new ss(r,`${this.serviceName}: ${a} (${r}).`,n)}};function ls(e,t){return e.replace(us,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var us=/\{\$([^}]+)}/g;function ds(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function fs(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(ps(n)&&ps(a)){if(!fs(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function ps(e){return typeof e==`object`&&!!e}function ms(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function hs(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function gs(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function _s(e,t){let n=new vs(e,t);return n.subscribe.bind(n)}var vs=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=ys(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=bs),r.error===void 0&&(r.error=bs),r.complete===void 0&&(r.complete=bs);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ys(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function bs(){}function xs(e){return e&&e._delegate?e._delegate:e}var Ss=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Cs=`[DEFAULT]`,ws=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new Vo;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Es(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cs){return this.instances.has(e)}getOptions(e=Cs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ts(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Cs){return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Ts(e){return e===Cs?void 0:e}function Es(e){return e.instantiationMode===`EAGER`}var Ds=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ws(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Os=[],L;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(L||={});var ks={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},As=L.INFO,js={[L.DEBUG]:`log`,[L.VERBOSE]:`log`,[L.INFO]:`info`,[L.WARN]:`warn`,[L.ERROR]:`error`},Ms=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=js[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Ns=class{constructor(e){this.name=e,this._logLevel=As,this._logHandler=Ms,this._userLogHandler=null,Os.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in L))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?ks[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...e),this._logHandler(this,L.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...e),this._logHandler(this,L.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,L.INFO,...e),this._logHandler(this,L.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,L.WARN,...e),this._logHandler(this,L.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...e),this._logHandler(this,L.ERROR,...e)}},Ps=(e,t)=>t.some(t=>e instanceof t),Fs,Is;function Ls(){return Fs||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function Rs(){return Is||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var zs=new WeakMap,Bs=new WeakMap,Vs=new WeakMap,Hs=new WeakMap,Us=new WeakMap;function Ws(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(Xs(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&zs.set(t,e)}).catch(()=>{}),Us.set(t,e),t}function Gs(e){if(Bs.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});Bs.set(e,t)}var Ks={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return Bs.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||Vs.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xs(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function qs(e){Ks=e(Ks)}function Js(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(Zs(this),t,...n);return Vs.set(r,t.sort?t.sort():[t]),Xs(r)}:Rs().includes(e)?function(...t){return e.apply(Zs(this),t),Xs(zs.get(this))}:function(...t){return Xs(e.apply(Zs(this),t))}}function Ys(e){return typeof e==`function`?Js(e):(e instanceof IDBTransaction&&Gs(e),Ps(e,Ls())?new Proxy(e,Ks):e)}function Xs(e){if(e instanceof IDBRequest)return Ws(e);if(Hs.has(e))return Hs.get(e);let t=Ys(e);return t!==e&&(Hs.set(e,t),Us.set(t,e)),t}var Zs=e=>Us.get(e);function Qs(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=Xs(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(Xs(o.result),e.oldVersion,e.newVersion,Xs(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var $s=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],ec=[`put`,`add`,`delete`,`clear`],tc=new Map;function nc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(tc.get(t))return tc.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=ec.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$s.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return tc.set(t,a),a}qs(e=>({...e,get:(t,n,r)=>nc(t,n)||e.get(t,n,r),has:(t,n)=>!!nc(t,n)||e.has(t,n)}));var rc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(ic(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function ic(e){return e.getComponent()?.type===`VERSION`}var ac=`@firebase/app`,oc=`0.13.2`,sc=new Ns(`@firebase/app`),cc=`@firebase/app-compat`,lc=`@firebase/analytics-compat`,uc=`@firebase/analytics`,dc=`@firebase/app-check-compat`,fc=`@firebase/app-check`,pc=`@firebase/auth`,mc=`@firebase/auth-compat`,hc=`@firebase/database`,gc=`@firebase/data-connect`,_c=`@firebase/database-compat`,vc=`@firebase/functions`,yc=`@firebase/functions-compat`,bc=`@firebase/installations`,xc=`@firebase/installations-compat`,Sc=`@firebase/messaging`,Cc=`@firebase/messaging-compat`,wc=`@firebase/performance`,Tc=`@firebase/performance-compat`,Ec=`@firebase/remote-config`,Dc=`@firebase/remote-config-compat`,Oc=`@firebase/storage`,kc=`@firebase/storage-compat`,Ac=`@firebase/firestore`,jc=`@firebase/ai`,Mc=`@firebase/firestore-compat`,Nc=`firebase`,Pc=`11.10.0`,Fc=`[DEFAULT]`,Ic={[ac]:`fire-core`,[cc]:`fire-core-compat`,[uc]:`fire-analytics`,[lc]:`fire-analytics-compat`,[fc]:`fire-app-check`,[dc]:`fire-app-check-compat`,[pc]:`fire-auth`,[mc]:`fire-auth-compat`,[hc]:`fire-rtdb`,[gc]:`fire-data-connect`,[_c]:`fire-rtdb-compat`,[vc]:`fire-fn`,[yc]:`fire-fn-compat`,[bc]:`fire-iid`,[xc]:`fire-iid-compat`,[Sc]:`fire-fcm`,[Cc]:`fire-fcm-compat`,[wc]:`fire-perf`,[Tc]:`fire-perf-compat`,[Ec]:`fire-rc`,[Dc]:`fire-rc-compat`,[Oc]:`fire-gcs`,[kc]:`fire-gcs-compat`,[Ac]:`fire-fst`,[Mc]:`fire-fst-compat`,[jc]:`fire-vertex`,"fire-js":`fire-js`,[Nc]:`fire-js-all`},Lc=new Map,Rc=new Map,zc=new Map;function Bc(e,t){try{e.container.addComponent(t)}catch(n){sc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Vc(e){let t=e.name;if(zc.has(t))return sc.debug(`There were multiple attempts to register component ${t}.`),!1;zc.set(t,e);for(let t of Lc.values())Bc(t,e);for(let t of Rc.values())Bc(t,e);return!0}function Hc(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Uc(e){return e==null?!1:e.settings!==void 0}var Wc=new cs(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),Gc=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ss(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wc.create(`app-deleted`,{appName:this._name})}},Kc=Pc;function qc(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r=Object.assign({name:Fc,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!=`string`||!i)throw Wc.create(`bad-app-name`,{appName:String(i)});if(n||=zo(),!n)throw Wc.create(`no-options`);let a=Lc.get(i);if(a){if(fs(n,a.options)&&fs(r,a.config))return a;throw Wc.create(`duplicate-app`,{appName:i})}let o=new Ds(i);for(let e of zc.values())o.addComponent(e);let s=new Gc(n,r,o);return Lc.set(i,s),s}function Jc(e=Fc){let t=Lc.get(e);if(!t&&e===`[DEFAULT]`&&zo())return qc();if(!t)throw Wc.create(`no-app`,{appName:e});return t}function Yc(e,t,n){let r=Ic[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sc.warn(e.join(` `));return}Vc(new Ss(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var Xc=`firebase-heartbeat-database`,Zc=1,Qc=`firebase-heartbeat-store`,$c=null;function el(){return $c||=Qs(Xc,Zc,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Qc)}catch(e){console.warn(e)}}}}).catch(e=>{throw Wc.create(`idb-open`,{originalErrorMessage:e.message})}),$c}async function tl(e){try{let t=(await el()).transaction(Qc),n=await t.objectStore(Qc).get(rl(e));return await t.done,n}catch(e){if(e instanceof ss)sc.warn(e.message);else{let t=Wc.create(`idb-get`,{originalErrorMessage:e?.message});sc.warn(t.message)}}}async function nl(e,t){try{let n=(await el()).transaction(Qc,`readwrite`);await n.objectStore(Qc).put(t,rl(e)),await n.done}catch(e){if(e instanceof ss)sc.warn(e.message);else{let t=Wc.create(`idb-set`,{originalErrorMessage:e?.message});sc.warn(t.message)}}}function rl(e){return`${e.name}!${e.options.appId}`}var il=1024,al=30,ol=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new ll(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=sl();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>al){let e=dl(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){sc.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=sl(),{heartbeatsToSend:t,unsentEntries:n}=cl(this._heartbeatsCache.heartbeats),r=Ao(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return sc.warn(e),``}}};function sl(){return new Date().toISOString().substring(0,10)}function cl(e,t=il){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(!e){if(n.push({agent:i.agent,dates:[i.date]}),ul(n)>t){n.pop();break}}else if(e.dates.push(i.date),ul(n)>t){e.dates.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ll=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return is()?as().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await tl(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return nl(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return nl(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function ul(e){return Ao(JSON.stringify({version:2,heartbeats:e})).length}function dl(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function fl(e){Vc(new Ss(`platform-logger`,e=>new rc(e),`PRIVATE`)),Vc(new Ss(`heartbeat`,e=>new ol(e),`PRIVATE`)),Yc(ac,oc,e),Yc(ac,oc,`esm2017`),Yc(`fire-js`,``)}fl(``);function pl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ml(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var hl=ml,gl=new cs(`auth`,`Firebase`,ml()),_l=new Ns(`@firebase/auth`);function vl(e,...t){_l.logLevel<=L.WARN&&_l.warn(`Auth (${Kc}): ${e}`,...t)}function yl(e,...t){_l.logLevel<=L.ERROR&&_l.error(`Auth (${Kc}): ${e}`,...t)}function bl(e,...t){throw wl(e,...t)}function xl(e,...t){return wl(e,...t)}function Sl(e,t,n){return new cs(`auth`,`Firebase`,Object.assign(Object.assign({},hl()),{[t]:n})).create(t,{appName:e.name})}function Cl(e){return Sl(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function wl(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return gl.create(e,...t)}function R(e,t,...n){if(!e)throw wl(t,...n)}function Tl(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw yl(t),Error(t)}function El(e,t){e||Tl(t)}function Dl(){return typeof self<`u`&&self.location?.href||``}function Ol(){return kl()===`http:`||kl()===`https:`}function kl(){return typeof self<`u`&&self.location?.protocol||null}function Al(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(Ol()||es()||`connection`in navigator)?navigator.onLine:!0}function jl(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Ml=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,El(t>e,`Short delay should be less than long delay!`),this.isMobile=Zo()||ts()}get(){return Al()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Nl(e,t){El(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var Pl=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;Tl(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;Tl(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;Tl(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},Fl={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},Il=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],Ll=new Ml(3e4,6e4);function Rl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function zl(e,t,n,r,i={}){return Bl(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=ms(Object.assign({key:e.config.apiKey},a)).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c=Object.assign({method:t,headers:s},i);return $o()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&Ho(e.emulatorConfig.host)&&(c.credentials=`include`),Pl.fetch()(await Hl(e,e.config.apiHost,n,o),c)})}async function Bl(e,t,n){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},Fl),t);try{let t=new Wl(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw Gl(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw Gl(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw Gl(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw Gl(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw Sl(e,o,n);bl(e,o)}}catch(t){if(t instanceof ss)throw t;bl(e,`network-request-failed`,{message:String(t)})}}async function Vl(e,t,n,r,i={}){let a=await zl(e,t,n,r,i);return`mfaPendingCredential`in a&&bl(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function Hl(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?Nl(e.config,i):`${e.config.apiScheme}://${i}`;return Il.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function Ul(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var Wl=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(xl(this.auth,`network-request-failed`)),Ll.get())})}};function Gl(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=xl(e,t,r);return i.customData._tokenResponse=n,i}function Kl(e){return e!==void 0&&e.enterprise!==void 0}var ql=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ul(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function Jl(e,t){return zl(e,`GET`,`/v2/recaptchaConfig`,Rl(e,t))}async function Yl(e,t){return zl(e,`POST`,`/v1/accounts:delete`,t)}async function Xl(e,t){return zl(e,`POST`,`/v1/accounts:lookup`,t)}function Zl(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ql(e,t=!1){let n=xs(e),r=await n.getIdToken(t),i=eu(r);R(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Zl($l(i.auth_time)),issuedAtTime:Zl($l(i.iat)),expirationTime:Zl($l(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function $l(e){return Number(e)*1e3}function eu(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return yl(`JWT malformed, contained fewer than 3 sections`),null;try{let e=jo(n);return e?JSON.parse(e):(yl(`Failed to decode base64 JWT payload`),null)}catch(e){return yl(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function tu(e){let t=eu(e);return R(t,`internal-error`),R(t.exp!==void 0,`internal-error`),R(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function nu(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof ss&&ru(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function ru({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var iu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},au=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function ou(e){let t=e.auth,n=await nu(e,Xl(t,{idToken:await e.getIdToken()}));R(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?lu(r.providerUserInfo):[],a=cu(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new au(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function su(e){let t=xs(e);await ou(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function cu(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function lu(e){return e.map(e=>{var{providerId:t}=e,n=pl(e,[`providerId`]);return{providerId:t,uid:n.rawId||``,displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function uu(e,t){let n=await Bl(e,{},async()=>{let n=ms({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await Hl(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&Ho(e.emulatorConfig.host)&&(s.credentials=`include`),Pl.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function du(e,t){return zl(e,`POST`,`/v2/accounts:revokeToken`,Rl(e,t))}var fu=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,`internal-error`),R(e.idToken!==void 0,`internal-error`),R(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):tu(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){R(e.length!==0,`internal-error`);let t=tu(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(R(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await uu(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(R(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(R(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(R(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Tl(`not implemented`)}};function pu(e,t){R(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var mu=class e{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=pl(e,[`uid`,`auth`,`stsTokenManager`]);this.providerId=`firebase`,this.proactiveRefresh=new iu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new au(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await nu(this,this.stsTokenManager.getToken(this.auth,e));return R(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ql(this,e)}reload(){return su(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){R(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ou(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Uc(this.auth.app))return Promise.reject(Cl(this.auth));let e=await this.getIdToken();return await nu(this,Yl(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;R(d&&h,t,`internal-error`);let g=fu.fromJSON(this.name,h);R(typeof d==`string`,t,`internal-error`),pu(r,t.name),pu(i,t.name),R(typeof f==`boolean`,t,`internal-error`),R(typeof p==`boolean`,t,`internal-error`),pu(a,t.name),pu(o,t.name),pu(s,t.name),pu(c,t.name),pu(l,t.name),pu(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>Object.assign({},e))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new fu;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await ou(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];R(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:lu(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new fu;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new au(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},hu=new Map;function gu(e){El(e instanceof Function,`Expected a class definition`);let t=hu.get(e);return t?(El(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,hu.set(e,t),t)}var _u=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};_u.type=`NONE`;var vu=_u;function yu(e,t,n){return`firebase:${e}:${t}:${n}`}var bu=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=yu(this.userKey,r.apiKey,i),this.fullPersistenceKey=yu(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await Xl(this.auth,{idToken:e}).catch(()=>void 0);return t?mu._fromGetAccountInfoResponse(this.auth,t,e):null}return mu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(gu(vu),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||gu(vu),o=yu(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await Xl(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await mu._fromGetAccountInfoResponse(t,e,n)}else r=mu._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function xu(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(Tu(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(Su(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(Du(t))return`Blackberry`;if(Ou(t))return`Webos`;if(Cu(t))return`Safari`;if((t.includes(`chrome/`)||wu(t))&&!t.includes(`edge/`))return`Chrome`;if(Eu(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function Su(e=Xo()){return/firefox\//i.test(e)}function Cu(e=Xo()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function wu(e=Xo()){return/crios\//i.test(e)}function Tu(e=Xo()){return/iemobile/i.test(e)}function Eu(e=Xo()){return/android/i.test(e)}function Du(e=Xo()){return/blackberry/i.test(e)}function Ou(e=Xo()){return/webos/i.test(e)}function ku(e=Xo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Au(e=Xo()){return ku(e)&&!!window.navigator?.standalone}function ju(){return ns()&&document.documentMode===10}function Mu(e=Xo()){return ku(e)||Eu(e)||Ou(e)||Du(e)||/windows phone/i.test(e)||Tu(e)}function Nu(e,t=[]){let n;switch(e){case`Browser`:n=xu(Xo());break;case`Worker`:n=`${xu(Xo())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${Kc}/${r}`}var Pu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function Fu(e,t={}){return zl(e,`GET`,`/v2/passwordPolicy`,Rl(e,t))}var Iu=6,Lu=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Iu,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},Ru=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bu(this),this.idTokenSubscription=new Bu(this),this.beforeStateQueue=new Pu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gl,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gu(t)),this._initializationPromise=this.queue(async()=>{var n;if(!this._deleted&&(this.persistenceManager=await bu.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Xl(this,{idToken:e}),n=await mu._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Uc(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return R(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ou(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jl()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Uc(this.app))return Promise.reject(Cl(this));let t=e?xs(e):null;return t&&R(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&R(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Uc(this.app)?Promise.reject(Cl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Uc(this.app)?Promise.reject(Cl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new Lu(await Fu(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cs(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await du(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&gu(e)||this._popupRedirectResolver;R(t,this,`argument-error`),this.redirectPersistenceManager=await bu.create(this,[gu(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(Uc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&vl(`Error while retrieving App Check token: ${e.error}`),e?.token}};function zu(e){return xs(e)}var Bu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=_s(e=>this.observer=e)}get next(){return R(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},Vu={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function Hu(e){Vu=e}function Uu(e){return Vu.loadJS(e)}function Wu(){return Vu.recaptchaEnterpriseScript}function Gu(){return Vu.gapiScript}function Ku(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var qu=class{constructor(){this.enterprise=new Ju}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Ju=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Yu=`recaptcha-enterprise`,Xu=`NO_RECAPTCHA`,Zu=class{constructor(e){this.type=Yu,this.auth=zu(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Jl(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new ql(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;Kl(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Xu)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new qu().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&Kl(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=Wu();t.length!==0&&(t+=n),Uu(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function Qu(e,t,n,r=!1,i=!1){let a=new Zu(e),o;if(i)o=Xu;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s=Object.assign({},t);if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function $u(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await Qu(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await Qu(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await Qu(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await Qu(e,t,n,!1,!0))):Promise.reject(i)):r(e,await Qu(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function ed(e){let t=zu(e),n=new ql(await Jl(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new Zu(t).verify()}function td(e,t){let n=Hc(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(fs(n.getOptions(),t??{}))return e;bl(e,`already-initialized`)}return n.initialize({options:t})}function nd(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(gu);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function rd(e,t,n){let r=zu(e);R(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=id(t),{host:o,port:s}=ad(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){R(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),R(fs(l,r.config.emulator)&&fs(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ho(o)?(Uo(`${a}//${o}${c}`),Yo(`Auth`,!0)):i||sd()}function id(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function ad(e){let t=id(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:od(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:od(t)}}}function od(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function sd(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var cd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Tl(`not implemented`)}_getIdTokenResponse(e){return Tl(`not implemented`)}_linkToIdToken(e,t){return Tl(`not implemented`)}_getReauthenticationResolver(e){return Tl(`not implemented`)}};async function ld(e,t){return zl(e,`POST`,`/v1/accounts:signUp`,t)}async function ud(e,t){return Vl(e,`POST`,`/v1/accounts:signInWithPassword`,Rl(e,t))}async function dd(e,t){return Vl(e,`POST`,`/v1/accounts:signInWithEmailLink`,Rl(e,t))}async function fd(e,t){return Vl(e,`POST`,`/v1/accounts:signInWithEmailLink`,Rl(e,t))}var pd=class e extends cd{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return $u(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,ud,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return dd(e,{email:this._email,oobCode:this._password});default:bl(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return $u(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,ld,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return fd(e,{idToken:t,email:this._email,oobCode:this._password});default:bl(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function md(e,t){return Vl(e,`POST`,`/v1/accounts:signInWithIdp`,Rl(e,t))}var hd=`http://localhost`,gd=class e extends cd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):bl(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let n=typeof t==`string`?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,a=pl(n,[`providerId`,`signInMethod`]);if(!r||!i)return null;let o=new e(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){return md(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,md(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,md(e,t)}buildRequest(){let e={requestUri:hd,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ms(t)}return e}};async function _d(e,t){return zl(e,`POST`,`/v1/accounts:sendVerificationCode`,Rl(e,t))}async function vd(e,t){return Vl(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Rl(e,t))}async function yd(e,t){let n=await Vl(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Rl(e,t));if(n.temporaryProof)throw Gl(e,`account-exists-with-different-credential`,n);return n}var bd={USER_NOT_FOUND:`user-not-found`};async function xd(e,t){return Vl(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Rl(e,Object.assign(Object.assign({},t),{operation:`REAUTH`})),bd)}var Sd=class e extends cd{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return vd(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return yd(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return xd(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function Cd(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function wd(e){let t=hs(gs(e)).link,n=t?hs(gs(t)).deep_link_id:null,r=hs(gs(e)).deep_link_id;return(r?hs(gs(r)).link:null)||r||n||t||e}var Td=class e{constructor(e){let t=hs(gs(e)),n=t.apiKey??null,r=t.oobCode??null,i=Cd(t.mode??null);R(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=wd(t);try{return new e(n)}catch{return null}}},Ed=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return pd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=Td.parseLink(t);return R(n,`argument-error`),pd._fromEmailAndCode(e,n.code,n.tenantId)}};Ed.PROVIDER_ID=`password`,Ed.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,Ed.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var Dd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},Od=class extends Dd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},kd=class e extends Od{constructor(){super(`facebook.com`)}static credential(t){return gd._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};kd.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,kd.PROVIDER_ID=`facebook.com`;var Ad=class e extends Od{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return gd._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};Ad.GOOGLE_SIGN_IN_METHOD=`google.com`,Ad.PROVIDER_ID=`google.com`;var jd=class e extends Od{constructor(){super(`github.com`)}static credential(t){return gd._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};jd.GITHUB_SIGN_IN_METHOD=`github.com`,jd.PROVIDER_ID=`github.com`;var Md=class e extends Od{constructor(){super(`twitter.com`)}static credential(t,n){return gd._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};Md.TWITTER_SIGN_IN_METHOD=`twitter.com`,Md.PROVIDER_ID=`twitter.com`;async function Nd(e,t){return Vl(e,`POST`,`/v1/accounts:signUp`,Rl(e,t))}var Pd=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await mu._fromIdTokenResponse(t,r,i),providerId:Fd(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:Fd(r),_tokenResponse:r,operationType:n})}};function Fd(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}async function Id(e){if(Uc(e.app))return Promise.reject(Cl(e));let t=zu(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Pd({user:t.currentUser,providerId:null,operationType:`signIn`});let n=await Nd(t,{returnSecureToken:!0}),r=await Pd._fromIdTokenResponse(t,`signIn`,n,!0);return await t._updateCurrentUser(r.user),r}var Ld=class e extends ss{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function Rd(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?Ld._fromErrorAndOperation(e,n,t,r):n})}async function zd(e,t,n=!1){let r=await nu(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Pd._forOperation(e,`link`,r)}async function Bd(e,t,n=!1){let{auth:r}=e;if(Uc(r.app))return Promise.reject(Cl(r));let i=`reauthenticate`;try{let a=await nu(e,Rd(r,i,t,e),n);R(a.idToken,r,`internal-error`);let o=eu(a.idToken);R(o,r,`internal-error`);let{sub:s}=o;return R(e.uid===s,r,`user-mismatch`),Pd._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&bl(r,`user-mismatch`),e}}async function Vd(e,t,n=!1){if(Uc(e.app))return Promise.reject(Cl(e));let r=`signIn`,i=await Rd(e,r,t),a=await Pd._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}function Hd(e,t,n,r){return xs(e).onIdTokenChanged(t,n,r)}function Ud(e,t,n){return xs(e).beforeAuthStateChanged(t,n)}function Wd(e,t){return zl(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Rl(e,t))}function Gd(e,t){return zl(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Rl(e,t))}function Kd(e,t){return zl(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Rl(e,t))}function qd(e,t){return zl(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Rl(e,t))}var Jd=`__sak`,Yd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jd,`1`),this.storage.removeItem(Jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},Xd=1e3,Zd=10,Qd=class extends Yd{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mu(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);ju()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Zd):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Xd)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};Qd.type=`LOCAL`;var $d=Qd,ef=1e3;function tf(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function nf(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var rf=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=nf(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:tf(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=nf(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=nf(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=tf(n),i=setInterval(()=>{let e=tf(n);e!==r&&(t(e),r=e)},ef);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};rf.type=`COOKIE`;var af=class extends Yd{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};af.type=`SESSION`;var of=af;function sf(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var cf=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await sf(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};cf.receivers=[];function lf(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var uf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=lf(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function df(){return window}function ff(e){df().location.href=e}function pf(){return df().WorkerGlobalScope!==void 0&&typeof df().importScripts==`function`}async function mf(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hf(){return(navigator==null?void 0:navigator.serviceWorker)?.controller||null}function gf(){return pf()?self:null}var _f=`firebaseLocalStorageDb`,vf=1,yf=`firebaseLocalStorage`,bf=`fbase_key`,xf=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function Sf(e,t){return e.transaction([yf],t?`readwrite`:`readonly`).objectStore(yf)}function Cf(){return new xf(indexedDB.deleteDatabase(_f)).toPromise()}function wf(){let e=indexedDB.open(_f,vf);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(yf,{keyPath:bf})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(yf)?t(n):(n.close(),await Cf(),t(await wf()))})})}async function Tf(e,t,n){return new xf(Sf(e,!0).put({[bf]:t,value:n})).toPromise()}async function Ef(e,t){let n=await new xf(Sf(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function Df(e,t){return new xf(Sf(e,!0).delete(t)).toPromise()}var Of=800,kf=3,Af=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await wf(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>kf)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return pf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(gf()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await mf(),!this.activeServiceWorker)return;this.sender=new uf(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hf()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await wf();return await Tf(e,Jd,`1`),await Df(e,Jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tf(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>Ef(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Df(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new xf(Sf(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Of)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Af.type=`LOCAL`;var jf=Af;function Mf(e,t){return zl(e,`POST`,`/v2/accounts/mfaSignIn:start`,Rl(e,t))}function Nf(e,t){return zl(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Rl(e,t))}function Pf(e,t){return zl(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Rl(e,t))}Ku(`rcb`),new Ml(3e4,6e4);var Ff=`recaptcha`;async function If(e,t,n){if(!e._getRecaptchaConfig())try{await ed(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return R(t.type===`enroll`,e,`internal-error`),(await $u(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===Xu?(R(n?.type===Ff,e,`argument-error`),Wd(e,await Lf(e,t,n))):Wd(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{R(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return R(i,e,`missing-multi-factor-info`),(await $u(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===Xu?(R(n?.type===Ff,e,`argument-error`),Mf(e,await Lf(e,t,n))):Mf(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await $u(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===Xu?(R(n?.type===Ff,e,`argument-error`),_d(e,await Lf(e,t,n))):_d(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function Lf(e,t,n){R(n.type===Ff,e,`argument-error`);let r=await n.verify();R(typeof r==`string`,e,`argument-error`);let i=Object.assign({},t);if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var Rf=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=zu(t)}verifyPhoneNumber(e,t){return If(this.auth,e,xs(t))}static credential(e,t){return Sd._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?Sd._fromTokenResponse(t,n):null}};Rf.PROVIDER_ID=`phone`,Rf.PHONE_SIGN_IN_METHOD=`phone`;function zf(e,t){return t?gu(t):(R(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var Bf=class extends cd{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return md(e,this._buildIdpRequest())}_linkToIdToken(e,t){return md(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return md(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Vf(e){return Vd(e.auth,new Bf(e),e.bypassAuthState)}function Hf(e){let{auth:t,user:n}=e;return R(n,t,`internal-error`),Bd(n,new Bf(e),e.bypassAuthState)}async function Uf(e){let{auth:t,user:n}=e;return R(n,t,`internal-error`),zd(n,new Bf(e),e.bypassAuthState)}var Wf=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return Vf;case`linkViaPopup`:case`linkViaRedirect`:return Uf;case`reauthViaPopup`:case`reauthViaRedirect`:return Hf;default:bl(this.auth,`internal-error`)}}resolve(e){El(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){El(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},Gf=new Ml(2e3,1e4),Kf=class e extends Wf{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return R(e,this.auth,`internal-error`),e}async onExecution(){El(this.filter.length===1,`Popup operations only handle one event`);let e=lf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(xl(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xl(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xl(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,Gf.get())};e()}};Kf.currentPopupAction=null;var qf=`pendingRedirect`,Jf=new Map,Yf=class extends Wf{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=Jf.get(this.auth._key());if(!e){try{let t=await Xf(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Jf.set(this.auth._key(),e)}return this.bypassAuthState||Jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Xf(e,t){let n=$f(t),r=Qf(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function Zf(e,t){Jf.set(e._key(),t)}function Qf(e){return gu(e._redirectPersistence)}function $f(e){return yu(qf,e.config.apiKey,e.name)}async function ep(e,t,n=!1){if(Uc(e.app))return Promise.reject(Cl(e));let r=zu(e),i=await new Yf(r,zf(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var tp=600*1e3,np=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ap(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!ip(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(xl(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tp&&this.cachedEventUids.clear(),this.cachedEventUids.has(rp(e))}saveEventToCache(e){this.cachedEventUids.add(rp(e)),this.lastProcessedEventTime=Date.now()}};function rp(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function ip({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function ap(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return ip(e);default:return!1}}async function op(e,t={}){return zl(e,`GET`,`/v1/projects`,t)}var sp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cp=/^https?/;async function lp(e){if(e.config.emulator)return;let{authorizedDomains:t}=await op(e);for(let e of t)try{if(up(e))return}catch{}bl(e,`unauthorized-domain`)}function up(e){let t=Dl(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!cp.test(n))return!1;if(sp.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var dp=new Ml(3e4,6e4);function fp(){let e=df().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function pp(e){return new Promise((t,n)=>{function r(){fp(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{fp(),n(xl(e,`network-request-failed`))},timeout:dp.get()})}if(df().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(df().gapi?.load)r();else{let t=Ku(`iframefcb`);return df()[t]=()=>{gapi.load?r():n(xl(e,`network-request-failed`))},Uu(`${Gu()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw mp=null,e})}var mp=null;function hp(e){return mp||=pp(e),mp}var gp=new Ml(5e3,15e3),_p=`__/auth/iframe`,vp=`emulator/auth/iframe`,yp={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},bp=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function xp(e){let t=e.config;R(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?Nl(t,vp):`https://${e.config.authDomain}/${_p}`,r={apiKey:t.apiKey,appName:e.name,v:Kc},i=bp.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${ms(r).slice(1)}`}async function Sp(e){let t=await hp(e),n=df().gapi;return R(n,e,`internal-error`),t.open({where:document.body,url:xp(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yp,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=xl(e,`network-request-failed`),a=df().setTimeout(()=>{r(i)},gp.get());function o(){df().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var Cp={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},wp=500,Tp=600,Ep=`_blank`,Dp=`http://localhost`,Op=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function kp(e,t,n,r=wp,i=Tp){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c=Object.assign(Object.assign({},Cp),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Xo().toLowerCase();n&&(s=wu(l)?Ep:n),Su(l)&&(t||=Dp,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(Au(l)&&s!==`_self`)return Ap(t||``,s),new Op(null);let d=window.open(t||``,s,u);R(d,e,`popup-blocked`);try{d.focus()}catch{}return new Op(d)}function Ap(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var jp=`__/auth/handler`,Mp=`emulator/auth/handler`,Np=`fac`;async function Pp(e,t,n,r,i,a){R(e.config.authDomain,e,`auth-domain-config-required`),R(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Kc,eventId:i};if(t instanceof Dd){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,ds(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof Od){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${Np}=${encodeURIComponent(c)}`:``;return`${Fp(e)}?${ms(s).slice(1)}${l}`}function Fp({config:e}){return e.emulator?Nl(e,Mp):`https://${e.authDomain}/${jp}`}var Ip=`webStorageSupport`,Lp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=of,this._completeRedirectFn=ep,this._overrideRedirectResult=Zf}async _openPopup(e,t,n,r){return El(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),kp(e,await Pp(e,t,n,Dl(),r),lf())}async _openRedirect(e,t,n,r){return await this._originValidation(e),ff(await Pp(e,t,n,Dl(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(El(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await Sp(e),n=new np(e);return t.register(`authEvent`,t=>(R(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ip,{type:Ip},n=>{let r=n?.[0]?.[Ip];r!==void 0&&t(!!r),bl(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Mu()||Cu()||ku()}},Rp=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return Tl(`unexpected MultiFactorSessionType`)}}},zp=class e extends Rp{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return Gd(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Nf(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Bp=class{constructor(){}static assertion(e){return zp._fromCredential(e)}};Bp.FACTOR_ID=`phone`;var Vp=class{static assertionForEnrollment(e,t){return Hp._fromSecret(e,t)}static assertionForSignIn(e,t){return Hp._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;R(t.user?.auth!==void 0,`internal-error`);let n=await Kd(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Up._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};Vp.FACTOR_ID=`totp`;var Hp=class e extends Rp{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return R(this.secret!==void 0,e,`argument-error`),qd(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){R(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return Pf(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},Up=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(Wp(e)||Wp(t))&&(n=!0),n&&(Wp(e)&&(e=this.auth.currentUser?.email||`unknownuser`),Wp(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function Wp(e){return e===void 0||e?.length===0}var Gp=`@firebase/auth`,Kp=`1.10.8`,qp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Jp(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function Yp(e){Vc(new Ss(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;R(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new Ru(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:Nu(e)});return nd(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),Vc(new Ss(`auth-internal`,e=>(e=>new qp(e))(zu(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),Yc(Gp,Kp,Jp(e)),Yc(Gp,Kp,`esm2017`)}var Xp=Bo(`authIdTokenMaxAge`)||300,Zp=null,Qp=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Xp)return;let i=n?.token;Zp!==i&&(Zp=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function $p(e=Jc()){let t=Hc(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=td(e,{popupRedirectResolver:Lp,persistence:[jf,$d,of]}),r=Bo(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=Qp(e.toString());Ud(n,t,()=>t(n.currentUser)),Hd(n,e=>t(e))}}let i=Lo(`auth`);return i&&rd(n,`http://${i}`),n}function em(){return document.getElementsByTagName(`head`)?.[0]??document}Hu({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=xl(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,em().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),Yp(`Browser`);var tm=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},nm={},rm,im;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;var r=Array(16);if(typeof t==`string`)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.u=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.B,a=this.h,o=0;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&128>e?a(e,function(e){return new o([e|0],0>e?-1:0)}):new o([e|0],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(0>e)return g(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,2>t||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(0<=e.indexOf(`-`))throw Error(`number format error: interior "-" character`);for(var n=l(t**8),r=d,i=0;i<e.length;i+=8){var a=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+a),t);8>a?(a=l(t**+a),r=r.j(a).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,2>e||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);for(var t=l(e**6),n=this,r=``;;){var i=b(n,t).g;n=_(n,i.j(t));var a=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;6>a.length;)a=`0`+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(this.i(i)&65535)+(e.i(i)&65535),s=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=s>>>16,a&=65535,s&=65535,n[i]=s<<16|a}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(0>this.l(p)&&0>e.l(p))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.i(r)>>>16,s=this.i(r)&65535,c=e.i(i)>>>16,u=e.i(i)&65535;n[2*r+2*i]+=s*u,v(n,2*r+2*i),n[2*r+2*i+1]+=a*u,v(n,2*r+2*i+1),n[2*r+2*i+1]+=s*c,v(n,2*r+2*i+1),n[2*r+2*i+2]+=a*c,v(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;0>=r.l(e);)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);0>=o.l(e)&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:2**(r-48),a=l(n),o=a.j(t);h(o)||0<o.l(e);)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,im=nm.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,rm=nm.Integer=o}).apply(tm===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:tm);var am=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},om={},sm,cm,lm,um,dm,fm,pm,mm;(function(){var e,t=typeof Object.defineProperties==`function`?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof am==`object`&&am];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}function a(e,t){e instanceof String&&(e+=``);var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}i(`Array.prototype.values`,function(e){return e||function(){return a(this,function(e,t){return t})}});var o=o||{},s=this||self;function c(e){var t=typeof e;return t=t==`object`?e?Array.isArray(e)?`array`:t:`null`:t,t==`array`||t==`object`&&typeof e.length==`number`}function l(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function u(e,t,n){return e.call.apply(e.bind,arguments)}function d(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function f(e,t,n){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf(`native code`)!=-1?u:d,f.apply(null,arguments)}function p(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function m(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function h(e){let t=e.length;if(0<t){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function g(e,t){for(let t=1;t<arguments.length;t++){let n=arguments[t];if(c(n)){let t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}class _{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function v(e){return/^[\s\xa0]*$/.test(e)}function y(){var e=s.navigator;return(e&&=e.userAgent)?e:``}function b(e){return b[` `](e),e}b[` `]=function(){};var x=y().indexOf(`Gecko`)!=-1&&!(y().toLowerCase().indexOf(`webkit`)!=-1&&y().indexOf(`Edge`)==-1)&&!(y().indexOf(`Trident`)!=-1||y().indexOf(`MSIE`)!=-1)&&y().indexOf(`Edge`)==-1;function S(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function ee(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function te(e){let t={};for(let n in e)t[n]=e[n];return t}let ne=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function re(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<ne.length;t++)n=ne[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ie(e){var t=1;e=e.split(`:`);let n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function ae(e){s.setTimeout(()=>{throw e},0)}function oe(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class se{constructor(){this.h=this.g=null}add(e,t){let n=ce.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var ce=new _(()=>new le,e=>e.reset());class le{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,de=!1,C=new se,fe=()=>{let e=s.Promise.resolve(void 0);ue=()=>{e.then(pe)}};var pe=()=>{for(var e;e=oe();){try{e.h.call(e.g)}catch(e){ae(e)}var t=ce;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}de=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};s.addEventListener(`test`,e,t),s.removeEventListener(`test`,e,t)}catch{}return e}();function ge(e,t){if(w.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(x){a:{try{b(t.nodeName);var i=!0;break a}catch{}i=!1}i||(t=null)}}else n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType==`string`?e.pointerType:_e[e.pointerType]||``,this.state=e.state,this.i=e,e.defaultPrevented&&ge.aa.h.call(this)}}m(ge,w);var _e={2:`touch`,3:`pen`,4:`mouse`};ge.prototype.h=function(){ge.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ve=`closure_listenable_`+(1e6*Math.random()|0),ye=0;function be(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ye,this.da=this.fa=!1}function xe(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Se(e){this.src=e,this.g={},this.h=0}Se.prototype.add=function(e,t,n,r,i){var a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);var o=we(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):(t=new be(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function Ce(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(xe(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function we(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var Te=`closure_lm_`+(1e6*Math.random()|0),T={};function Ee(e,t,n,r,i){if(r&&r.once)return ke(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ee(e,t[a],n,r,i);return null}return n=Fe(n),e&&e[ve]?e.K(t,n,l(r)?!!r.capture:!!r,i):De(e,t,n,!1,r,i)}function De(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);var o=l(i)?!!i.capture:!!i,s=Ne(e);if(s||(e[Te]=s=new Se(e)),n=s.add(t,n,r,o,a),n.proxy)return n;if(r=Oe(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)he||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(je(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function Oe(){function e(n){return t.call(e.src,e.listener,n)}let t=Me;return e}function ke(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ke(e,t[a],n,r,i);return null}return n=Fe(n),e&&e[ve]?e.L(t,n,l(r)?!!r.capture:!!r,i):De(e,t,n,!0,r,i)}function Ae(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ae(e,t[a],n,r,i);else r=l(r)?!!r.capture:!!r,n=Fe(n),e&&e[ve]?(e=e.i,t=String(t).toString(),t in e.g&&(a=e.g[t],n=we(a,n,r,i),-1<n&&(xe(a[n]),Array.prototype.splice.call(a,n,1),a.length==0&&(delete e.g[t],e.h--)))):(e&&=Ne(e))&&(t=e.g[t.toString()],e=-1,t&&(e=we(t,n,r,i)),(n=-1<e?t[e]:null)&&E(n))}function E(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[ve])Ce(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(je(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ne(t))?(Ce(n,e),n.h==0&&(n.src=null,t[Te]=null)):xe(e)}}}function je(e){return e in T?T[e]:T[e]=`on`+e}function Me(e,t){if(e.da)e=!0;else{t=new ge(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&E(e),e=n.call(r,t)}return e}function Ne(e){return e=e[Te],e instanceof Se?e:null}var Pe=`__closure_events_fn_`+(1e9*Math.random()>>>0);function Fe(e){return typeof e==`function`?e:(e[Pe]||(e[Pe]=function(t){return e.handleEvent(t)}),e[Pe])}function Ie(){me.call(this),this.i=new Se(this),this.M=this,this.F=null}m(Ie,me),Ie.prototype[ve]=!0,Ie.prototype.removeEventListener=function(e,t,n,r){Ae(this,e,t,n,r)};function Le(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new w(t,e);else if(t instanceof w)t.target=t.target||e;else{var i=t;t=new w(r,e),re(t,i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Re(o,r,!0,t)&&i}if(o=t.g=e,i=Re(o,r,!0,t)&&i,i=Re(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)o=t.g=n[a],i=Re(o,r,!1,t)&&i}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)xe(n[r]);delete e.g[t],e.h--}}this.F=null},Ie.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ie.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Re(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.da&&o.capture==n){var s=o.listener,c=o.ha||o.src;o.fa&&Ce(e.i,o),i=!1!==s.call(c,r)&&i}}return i&&!r.defaultPrevented}function ze(e,t,n){if(typeof e==`function`)n&&(e=f(e,n));else if(e&&typeof e.handleEvent==`function`)e=f(e.handleEvent,e);else throw Error(`Invalid listener argument`);return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function Be(e){e.g=ze(()=>{e.g=null,e.i&&(e.i=!1,Be(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Ve extends me{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Be(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function He(e){me.call(this),this.h=e,this.g={}}m(He,me);var Ue=[];function We(e){S(e.g,function(e,t){this.g.hasOwnProperty(t)&&E(e)},e),e.g={}}He.prototype.N=function(){He.aa.N.call(this),We(this)},He.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Ge=s.JSON.stringify,Ke=s.JSON.parse,qe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function Je(){}Je.prototype.h=null;function Ye(e){return e.h||=e.i()}function Xe(){}var Ze={OPEN:`a`,kb:`b`,Ja:`c`,wb:`d`};function Qe(){w.call(this,`d`)}m(Qe,w);function $e(){w.call(this,`c`)}m($e,w);var et={},tt=null;function nt(){return tt||=new Ie}et.La=`serverreachability`;function rt(e){w.call(this,et.La,e)}m(rt,w);function D(e){let t=nt();Le(t,new rt(t))}et.STAT_EVENT=`statevent`;function it(e,t){w.call(this,et.STAT_EVENT,e),this.stat=t}m(it,w);function O(e){let t=nt();Le(t,new it(t,e))}et.Ma=`timingevent`;function at(e,t){w.call(this,et.Ma,e),this.size=t}m(at,w);function ot(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return s.setTimeout(function(){e()},t)}function st(){this.g=!0}st.prototype.xa=function(){this.g=!1};function ct(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o=``,s=a.split(`&`),c=0;c<s.length;c++){var l=s[c].split(`=`);if(1<l.length){var u=l[0];l=l[1];var d=u.split(`_`);o=2<=d.length&&d[1]==`type`?o+(u+`=`+l+`&`):o+(u+`=redacted&`)}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function lt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function ut(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+ft(e,n)+(r?` `+r:``)})}function dt(e,t){e.info(function(){return`TIMEOUT: `+t})}st.prototype.info=function(){};function ft(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if(a!=`noop`&&a!=`stop`&&a!=`close`)for(var o=1;o<i.length;o++)i[o]=``}}}}return Ge(n)}catch{return t}}var pt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mt={lb:`complete`,Hb:`success`,Ja:`error`,Ia:`abort`,zb:`ready`,Ab:`readystatechange`,TIMEOUT:`timeout`,vb:`incrementaldata`,yb:`progress`,ob:`downloadprogress`,Pb:`uploadprogress`},ht;function gt(){}m(gt,Je),gt.prototype.g=function(){return new XMLHttpRequest},gt.prototype.i=function(){return{}},ht=new gt;function _t(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new He(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g=``,this.h=!1}var yt={},bt={};function xt(e,t,n){e.L=1,e.v=j(Gt(t)),e.m=n,e.P=!0,St(e,null)}function St(e,t){e.F=Date.now(),Tt(e),e.A=Gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),on(n.i,`t`,r),e.C=0,n=e.j.J,e.h=new vt,e.g=Zn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new Ve(f(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i=`readystatechange`;Array.isArray(i)||(i&&(Ue[0]=i.toString()),i=Ue);for(var a=0;a<i.length;a++){var o=Ee(n,i[a],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?te(e.H):{},e.m?(e.u||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.A,e.u,e.m,t)):(e.u=`GET`,e.g.ea(e.A,e.u,null,t)),D(),ct(e.i,e.u,e.A,e.l,e.R,e.m)}_t.prototype.ca=function(e){e=e.target;let t=this.M;t&&On(e)==3?t.j():this.Y(e)},_t.prototype.Y=function(e){try{if(e==this.g)a:{let f=On(this.g);var t=this.g.Ba();let p=this.g.Z();if(!(3>f)&&(f!=3||this.g&&(this.h.h||this.g.oa()||kn(this.g)))){this.J||f!=4||t==7||D(t==8||0>=p?3:2),Dt(this);var n=this.g.Z();this.X=n;b:if(Ct(this)){var r=kn(this.g);e=``;var i=r.length,a=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>`u`){kt(this),Ot(this);var o=``;break b}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=n==200,lt(this.i,this.u,this.A,this.l,this.R,f,n),this.o){if(this.T&&!this.K){b:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!v(c)){var u=c;break b}}u=null}if(n=u)ut(this.i,this.l,n,`Initial handshake response via X-HTTP-Initial-Response`),this.K=!0,At(this,n);else{this.o=!1,this.s=3,O(12),kt(this),Ot(this);break a}}if(this.P){n=!0;let e;for(;!this.J&&this.C<o.length;)if(e=wt(this,o),e==bt){f==4&&(this.s=4,O(14),n=!1),ut(this.i,this.l,null,`[Incomplete Response]`);break}else if(e==yt){this.s=4,O(15),ut(this.i,this.l,o,`[Invalid Chunk]`),n=!1;break}else ut(this.i,this.l,e,null),At(this,e);if(Ct(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),f!=4||o.length!=0||this.h.h||(this.s=1,O(16),n=!1),this.o=this.o&&n,!n)ut(this.i,this.l,o,`[Invalid Chunked Response]`),kt(this),Ot(this);else if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info(`Great, no buffering proxy detected. Bytes received: `+o.length),Un(d),d.M=!0,O(11))}}else ut(this.i,this.l,o,null),At(this,o);f==4&&kt(this),this.o&&!this.J&&(f==4?Kn(this.j,this):(this.o=!1,Tt(this)))}else An(this.g),n==400&&0<o.indexOf(`Unknown SID`)?(this.s=3,O(12)):(this.s=0,O(13)),kt(this),Ot(this)}}}catch{}};function Ct(e){return e.g?e.u==`GET`&&e.L!=2&&e.j.Ca:!1}function wt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?bt:(n=Number(t.substring(n,r)),isNaN(n)?yt:(r+=1,r+n>t.length?bt:(t=t.slice(r,r+n),e.C=r+n,t)))}_t.prototype.cancel=function(){this.J=!0,kt(this)};function Tt(e){e.S=Date.now()+e.I,Et(e,e.I)}function Et(e,t){if(e.B!=null)throw Error(`WatchDog timer not null`);e.B=ot(f(e.ba,e),t)}function Dt(e){e.B&&=(s.clearTimeout(e.B),null)}_t.prototype.ba=function(){this.B=null;let e=Date.now();0<=e-this.S?(dt(this.i,this.A),this.L!=2&&(D(),O(17)),kt(this),this.s=2,Ot(this)):Et(this,this.S-e)};function Ot(e){e.j.G==0||e.J||Kn(e.j,e)}function kt(e){Dt(e);var t=e.M;t&&typeof t.ma==`function`&&t.ma(),e.M=null,We(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function At(e,t){try{var n=e.j;if(n.G!=0&&(n.g==e||Ft(n.h,e))){if(!e.K&&Ft(n.h,e)&&n.G==3){try{var r=n.Da.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)Gn(n),Pn(n);else break a;Hn(n),O(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&n.v==0&&!n.C&&(n.C=ot(f(n.Za,n),6e3));if(1>=Pt(n.h)&&n.ca){try{n.ca()}catch{}n.ca=void 0}}else Jn(n,11)}else if((e.K||n.g==e)&&Gn(n),!v(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.T=l[0],l=l[1],n.G==2)if(l[0]==`c`){n.K=l[1],n.ia=l[2];let t=l[3];t!=null&&(n.la=t,n.j.info(`VER=`+n.la));let i=l[4];i!=null&&(n.Aa=i,n.j.info(`SVER=`+n.Aa));let u=l[5];u!=null&&typeof u==`number`&&0<u&&(r=1.5*u,n.L=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(It(a,a.h),null))}if(r.D){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.ya=e,A(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.R+`ms`)),r=n;var o=e;if(r.qa=Xn(r,r.J?r.ia:null,r.W),o.K){Lt(r.h,o);var s=o,c=r.L;c&&(s.I=c),s.B&&(Dt(s),Tt(s)),r.g=o}else Vn(r);0<n.i.length&&In(n)}else l[0]!=`stop`&&l[0]!=`close`||Jn(n,7);else n.G==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Jn(n,7):Nn(n):l[0]!=`noop`&&n.l&&n.l.ta(l),n.v=0)}}D(4)}catch{}}var jt=class{constructor(e,t){this.g=e,this.map=t}};function Mt(e){this.l=e||10,s.PerformanceNavigationTiming?(e=s.performance.getEntriesByType(`navigation`),e=0<e.length&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Pt(e){return e.h?1:e.g?e.g.size:0}function Ft(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function It(e,t){e.g?e.g.add(t):e.h=t}function Lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Mt.prototype.cancel=function(){if(this.i=Rt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Rt(e){if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function zt(e){if(e.V&&typeof e.V==`function`)return e.V();if(typeof Map<`u`&&e instanceof Map||typeof Set<`u`&&e instanceof Set)return Array.from(e.values());if(typeof e==`string`)return e.split(``);if(c(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Bt(e){if(e.na&&typeof e.na==`function`)return e.na();if(!e.V||typeof e.V!=`function`){if(typeof Map<`u`&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<`u`&&e instanceof Set)){if(c(e)||typeof e==`string`){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(let r in e)t[n++]=r;return t}}}function Vt(e,t){if(e.forEach&&typeof e.forEach==`function`)e.forEach(t,void 0);else if(c(e)||typeof e==`string`)Array.prototype.forEach.call(e,t,void 0);else for(var n=Bt(e),r=zt(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}var Ht=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Ut(e,t){if(e){e=e.split(`&`);for(var n=0;n<e.length;n++){var r=e[n].indexOf(`=`),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g,` `)):``)}}}function Wt(e){if(this.g=this.o=this.j=``,this.s=null,this.m=this.l=``,this.h=!1,e instanceof Wt){this.h=e.h,k(this,e.j),this.o=e.o,this.g=e.g,Kt(this,e.s),this.l=e.l;var t=e.i,n=new tn;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),qt(this,n),this.m=e.m}else e&&(t=String(e).match(Ht))?(this.h=!1,k(this,t[1]||``,!0),this.o=M(t[2]||``),this.g=M(t[3]||``,!0),Kt(this,t[4]),this.l=M(t[5]||``,!0),qt(this,t[6]||``,!0),this.m=M(t[7]||``)):(this.h=!1,this.i=new tn(null,this.h))}Wt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Jt(t,Xt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Jt(t,Xt,!0),`@`),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.s,n!=null&&e.push(`:`,String(n))),(n=this.l)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Jt(n,n.charAt(0)==`/`?Qt:Zt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Jt(n,en)),e.join(``)};function Gt(e){return new Wt(e)}function k(e,t,n){e.j=n?M(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Kt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error(`Bad port number `+t);e.s=t}else e.s=null}function qt(e,t,n){t instanceof tn?(e.i=t,cn(e.i,e.h)):(n||(t=Jt(t,$t)),e.i=new tn(t,e.h))}function A(e,t,n){e.i.set(t,n)}function j(e){return A(e,`zx`,Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function M(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Jt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Yt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Yt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Xt=/[#\/\?@]/g,Zt=/[#\?:]/g,Qt=/[#\?]/g,$t=/[#\?@]/g,en=/#/g;function tn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function nn(e){e.g||(e.g=new Map,e.h=0,e.i&&Ut(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=tn.prototype,e.add=function(e,t){nn(this),this.i=null,e=sn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function rn(e,t){nn(e),t=sn(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function an(e,t){return nn(e),t=sn(e,t),e.g.has(t)}e.forEach=function(e,t){nn(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){nn(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){let i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){nn(this);let t=[];if(typeof e==`string`)an(this,e)&&(t=t.concat(this.g.get(sn(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return nn(this),this.i=null,e=sn(this,e),an(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=this.V(e),0<e.length?String(e[0]):t):t};function on(e,t,n){rn(e,t),0<n.length&&(e.i=null,e.g.set(sn(e,t),h(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];let a=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=a;o[r]!==``&&(i+=`=`+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join(`&`)};function sn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function cn(e,t){t&&!e.j&&(nn(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(rn(this,t),on(this,n,e))},e)),e.j=t}function ln(e,t){let n=new st;if(s.Image){let r=new Image;r.onload=p(dn,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=p(dn,n,`TestLoadImage: error`,!1,t,r),r.onabort=p(dn,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=p(dn,n,`TestLoadImage: timeout`,!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function un(e,t){let n=new st,r=new AbortController,i=setTimeout(()=>{r.abort(),dn(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?dn(n,`TestPingServer: ok`,!0,t):dn(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),dn(n,`TestPingServer: error`,!1,t)})}function dn(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function fn(){this.g=new qe}function pn(e,t,n){let r=n||``;try{Vt(e,function(e,n){let i=e;l(e)&&(i=Ge(e)),t.push(r+n+`=`+encodeURIComponent(i))})}catch(e){throw t.push(r+`type=_badmap`),e}}function mn(e){this.l=e.Ub||null,this.j=e.eb||!1}m(mn,Je),mn.prototype.g=function(){return new hn(this.l,this.j)},mn.prototype.i=function(e){return function(){return e}}({});function hn(e,t){Ie.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B=`GET`,this.A=``,this.g=!1,this.v=this.j=this.l=null}m(hn,Ie),e=hn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.B=e,this.A=t,this.readyState=1,vn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);this.g=!0;let t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.u=new Headers,this.status=0,this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_n(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,vn(this)),this.g&&(this.readyState=3,vn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(s.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.v=new TextDecoder;gn(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))};function gn(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_n(this):vn(this),this.readyState==3&&gn(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,_n(this))},e.Qa=function(e){this.g&&(this.response=e,_n(this))},e.ga=function(){this.g&&_n(this)};function _n(e){e.readyState=4,e.l=null,e.j=null,e.v=null,vn(e)}e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function vn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(hn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function yn(e){let t=``;return S(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function bn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=yn(n),typeof e==`string`?n!=null&&encodeURIComponent(String(n)):A(e,t,n))}function N(e){Ie.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D=``,this.m=0,this.l=``,this.j=this.B=this.u=this.A=!1,this.I=null,this.H=``,this.J=!1}m(N,Ie);var xn=/^https?$/i,Sn=[`POST`,`PUT`];e=N.prototype,e.Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ht.g(),this.v=this.o?Ye(this.o):Ye(ht),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){Cn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Sn,t,void 0))||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),`withCredentials`in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dn(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){Cn(this,e)}};function Cn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,wn(e),En(e)}function wn(e){e.A||(e.A=!0,Le(e,`complete`),Le(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,Le(this,`complete`),Le(this,`abort`),En(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),En(this,!0)),N.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Tn(this):this.bb())},e.bb=function(){Tn(this)};function Tn(e){if(e.h&&o!==void 0&&(!e.v[1]||On(e)!=4||e.Z()!=2)){if(e.u&&On(e)==4)ze(e.Ea,0,e);else if(Le(e,`readystatechange`),On(e)==4){e.h=!1;try{let o=e.Z();a:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.D).match(Ht)[1]||null;!i&&s.self&&s.self.location&&(i=s.self.location.protocol.slice(0,-1)),r=!xn.test(i?i.toLowerCase():``)}n=r}if(n)Le(e,`complete`),Le(e,`success`);else{e.m=6;try{var a=2<On(e)?e.g.statusText:``}catch{a=``}e.l=a+` [`+e.Z()+`]`,wn(e)}}finally{En(e)}}}}function En(e,t){if(e.g){Dn(e);let n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||Le(e,`ready`);try{n.onreadystatechange=r}catch{}}}function Dn(e){e.I&&=(s.clearTimeout(e.I),null)}e.isActive=function(){return!!this.g};function On(e){return e.g?e.g.readyState:0}e.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Ke(t)}};function kn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.H){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function An(e){let t={};e=(e.g&&2<=On(e)&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(v(e[r]))continue;var n=ie(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}ee(t,function(e){return e.join(`, `)})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l==`string`?this.l:String(this.l)};function jn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Mn(e){this.Aa=0,this.i=[],this.j=new st,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jn(`failFast`,!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jn(`baseRetryDelayMs`,5e3,e),this.cb=jn(`retryDelaySeedMs`,1e4,e),this.Wa=jn(`forwardChannelMaxRetries`,2,e),this.wa=jn(`forwardChannelRequestTimeoutMs`,2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K=``,this.h=new Mt(e&&e.concurrentRequestLimit),this.Da=new fn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Mn.prototype,e.la=8,e.G=1,e.connect=function(e,t,n,r){O(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Xn(this,null,this.W),In(this)};function Nn(e){if(Fn(e),e.G==3){var t=e.U++,n=Gt(e.I);if(A(n,`SID`,e.K),A(n,`RID`,t),A(n,`TYPE`,`terminate`),zn(e,n),t=new _t(e,e.j,t),t.L=2,t.v=j(Gt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),``)}catch{}!n&&s.Image&&(new Image().src=t.v,n=!0),n||(t.g=Zn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Tt(t)}Yn(e)}function Pn(e){e.g&&=(Un(e),e.g.cancel(),null)}function Fn(e){Pn(e),e.u&&=(s.clearTimeout(e.u),null),Gn(e),e.h.cancel(),e.s&&=(typeof e.s==`number`&&s.clearTimeout(e.s),null)}function In(e){if(!Nt(e.h)&&!e.s){e.s=!0;var t=e.Ga;ue||fe(),de||=(ue(),!0),C.add(t,e),e.B=0}}function Ln(e,t){return Pt(e.h)>=e.h.j-(e.s?1:0)?!1:e.s?(e.i=t.D.concat(e.i),!0):e.G==1||e.G==2||e.B>=(e.Va?0:e.Wa)?!1:(e.s=ot(f(e.Ga,e,t),qn(e,e.B)),e.B++,!0)}e.Ga=function(e){if(this.s)if(this.s=null,this.G==1){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let i=new _t(this,this.j,e),a=this.o;if(this.S&&(a?(a=te(a),re(a,this.S)):a=this.S),this.m!==null||this.O||(i.H=a,a=null),this.P)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Bn(this,i,t),n=Gt(this.I),A(n,`RID`,e),A(n,`CVER`,22),this.D&&A(n,`X-HTTP-Session-Id`,this.D),zn(this,n),a&&(this.O?t=`headers=`+encodeURIComponent(String(yn(a)))+`&`+t:this.m&&bn(n,this.m,a)),It(this.h,i),this.Ua&&A(n,`TYPE`,`init`),this.P?(A(n,`$req`,t),A(n,`SID`,`null`),i.T=!0,xt(i,n,null)):xt(i,n,t),this.G=2}}else this.G==3&&(e?Rn(this,e):this.i.length==0||Nt(this.h)||Rn(this))};function Rn(e,t){var n=t?t.l:e.U++;let r=Gt(e.I);A(r,`SID`,e.K),A(r,`RID`,n),A(r,`AID`,e.T),zn(e,r),e.m&&e.o&&bn(r,e.m,e.o),n=new _t(e,e.j,n,e.B+1),e.m===null&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Bn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),It(e.h,n),xt(n,r,t)}function zn(e,t){e.H&&S(e.H,function(e,n){A(t,n,e)}),e.l&&Vt({},function(e,n){A(t,n,e)})}function Bn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?f(e.l.Na,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?0<n?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g,s=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{pn(s,e,`req`+n+`_`)}catch{r&&r(s)}}if(a){r=e.join(`&`);break a}}}return e=e.i.splice(0,n),t.D=e,r}function Vn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;ue||fe(),de||=(ue(),!0),C.add(t,e),e.v=0}}function Hn(e){return e.g||e.u||3<=e.v?!1:(e.Y++,e.u=ot(f(e.Fa,e),qn(e,e.v)),e.v++,!0)}e.Fa=function(){if(this.u=null,Wn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var e=2*this.R;this.j.info(`BP detection timer enabled: `+e),this.A=ot(f(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.M=!0,O(10),Pn(this),Wn(this))};function Un(e){e.A!=null&&(s.clearTimeout(e.A),e.A=null)}function Wn(e){e.g=new _t(e,e.j,`rpc`,e.Y),e.m===null&&(e.g.H=e.o),e.g.O=0;var t=Gt(e.qa);A(t,`RID`,`rpc`),A(t,`SID`,e.K),A(t,`AID`,e.T),A(t,`CI`,e.F?`0`:`1`),!e.F&&e.ja&&A(t,`TO`,e.ja),A(t,`TYPE`,`xmlhttp`),zn(e,t),e.m&&e.o&&bn(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=j(Gt(t)),n.m=null,n.P=!0,St(n,e)}e.Za=function(){this.C!=null&&(this.C=null,Pn(this),Hn(this),O(19))};function Gn(e){e.C!=null&&(s.clearTimeout(e.C),e.C=null)}function Kn(e,t){var n=null;if(e.g==t){Gn(e),Un(e),e.g=null;var r=2}else if(Ft(e.h,t))n=t.D,Lt(e.h,t),r=1;else return;if(e.G!=0){if(t.o)if(r==1){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;r=nt(),Le(r,new at(r,n)),In(e)}else Vn(e);else if(i=t.s,i==3||i==0&&0<t.X||!(r==1&&Ln(e,t)||r==2&&Hn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Jn(e,5);break;case 4:Jn(e,10);break;case 3:Jn(e,6);break;default:Jn(e,2)}}}function qn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function Jn(e,t){if(e.j.info(`Error code `+t),t==2){var n=f(e.fb,e),r=e.Xa;let t=!r;r=new Wt(r||`//www.google.com/images/cleardot.gif`),s.location&&s.location.protocol==`http`||k(r,`https`),j(r),t?ln(r.toString(),n):un(r.toString(),n)}else O(2);e.G=0,e.l&&e.l.sa(t),Yn(e),Fn(e)}e.fb=function(e){e?(this.j.info(`Successfully pinged google.com`),O(2)):(this.j.info(`Failed to ping google.com`),O(1))};function Yn(e){if(e.G=0,e.ka=[],e.l){let t=Rt(e.h);(t.length!=0||e.i.length!=0)&&(g(e.ka,t),g(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function Xn(e,t,n){var r=n instanceof Wt?Gt(n):new Wt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Kt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;var a=new Wt(null);r&&k(a,r),t&&(a.g=t),i&&Kt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&A(r,n,t),A(r,`VER`,e.la),zn(e,r),r}function Zn(e,t,n){if(t&&!e.J)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Ca&&!e.pa?new N(new mn({eb:n})):new N(e.pa),t.Ha(e.J),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qn(){}e=Qn.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function $n(){}$n.prototype.g=function(e,t){return new er(e,t)};function er(e,t){Ie.call(this),this.g=new Mn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e[`X-WebChannel-Client-Profile`]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!v(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!v(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new rr(this)}m(er,Ie),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Nn(this.g)},er.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.u&&(n={},n.__data__=Ge(e),e=n);t.i.push(new jt(t.Ya++,e)),t.G==3&&In(t)},er.prototype.N=function(){this.g.l=null,delete this.j,Nn(this.g),delete this.g,er.aa.N.call(this)};function tr(e){Qe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}m(tr,Qe);function nr(){$e.call(this),this.status=1}m(nr,$e);function rr(e){this.g=e}m(rr,Qn),rr.prototype.ua=function(){Le(this.g,`a`)},rr.prototype.ta=function(e){Le(this.g,new tr(e))},rr.prototype.sa=function(e){Le(this.g,new nr)},rr.prototype.ra=function(){Le(this.g,`b`)},$n.prototype.createWebChannel=$n.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,mm=om.createWebChannelTransport=function(){return new $n},pm=om.getStatEventTarget=function(){return nt()},fm=om.Event=et,dm=om.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,um=om.ErrorCode=pt,mt.COMPLETE=`complete`,lm=om.EventType=mt,Xe.EventType=Ze,Ze.OPEN=`a`,Ze.CLOSE=`b`,Ze.ERROR=`c`,Ze.MESSAGE=`d`,Ie.prototype.listen=Ie.prototype.K,cm=om.WebChannel=Xe,om.FetchXmlHttpFactory=mn,N.prototype.listenOnce=N.prototype.L,N.prototype.getLastError=N.prototype.Ka,N.prototype.getLastErrorCode=N.prototype.Ba,N.prototype.getStatus=N.prototype.Z,N.prototype.getResponseJson=N.prototype.Oa,N.prototype.getResponseText=N.prototype.oa,N.prototype.send=N.prototype.ea,N.prototype.setWithCredentials=N.prototype.Ha,sm=om.XhrIo=N}).apply(am===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:am);var hm=`@firebase/firestore`,gm=`4.8.0`,_m=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};_m.UNAUTHENTICATED=new _m(null),_m.GOOGLE_CREDENTIALS=new _m(`google-credentials-uid`),_m.FIRST_PARTY=new _m(`first-party-uid`),_m.MOCK_USER=new _m(`mock-user`);var vm=`11.10.0`,ym=new Ns(`@firebase/firestore`);function bm(){return ym.logLevel}function z(e,...t){if(ym.logLevel<=L.DEBUG){let n=t.map(Cm);ym.debug(`Firestore (${vm}): ${e}`,...n)}}function xm(e,...t){if(ym.logLevel<=L.ERROR){let n=t.map(Cm);ym.error(`Firestore (${vm}): ${e}`,...n)}}function Sm(e,...t){if(ym.logLevel<=L.WARN){let n=t.map(Cm);ym.warn(`Firestore (${vm}): ${e}`,...n)}}function Cm(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function B(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,wm(e,r,n)}function wm(e,t,n){let r=`FIRESTORE (${vm}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw xm(r),Error(r)}function V(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||wm(t,i,r)}function H(e,t){return e}var U={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},W=class extends ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Tm=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},Em=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Dm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_m.UNAUTHENTICATED)))}shutdown(){}},Om=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},km=class{constructor(e){this.t=e,this.currentUser=_m.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){V(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Tm;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tm,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{z(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(z(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Tm)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(V(typeof t.accessToken==`string`,31837,{l:t}),new Em(t.accessToken,this.currentUser)):null:(z(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return V(e===null||typeof e==`string`,2055,{h:e}),new _m(e)}},Am=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=_m.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},jm=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Am(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_m.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Mm=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},Nm=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Uc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){V(this.o===void 0,3512);let n=e=>{e.error!=null&&z(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,z(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{z(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):z(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new Mm(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(V(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new Mm(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Pm(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}function Fm(){return new TextEncoder}var Im=class{static newId(){let e=``;for(;e.length<20;){let t=Pm(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function G(e,t){return e<t?-1:e>t?1:0}function Lm(e,t){let n=0;for(;n<e.length&&n<t.length;){let r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return G(r,i);{let a=Fm(),o=zm(a.encode(Rm(e,n)),a.encode(Rm(t,n)));return o===0?G(r,i):o}}n+=r>65535?2:1}return G(e.length,t.length)}function Rm(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function zm(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return G(e[n],t[n]);return G(e.length,t.length)}function Bm(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var Vm=`__name__`,Hm=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&B(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&B(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return G(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):Lm(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return rm.fromString(e.substring(4,e.length-2))}},Um=class e extends Hm{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new W(U.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},Wm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gm=class e extends Hm{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return Wm.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vm}static keyField(){return new e([Vm])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new W(U.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new W(U.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new W(U.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new W(U.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},K=class e{constructor(e){this.path=e}static fromPath(t){return new e(Um.fromString(t))}static fromName(t){return new e(Um.fromString(t).popFirst(5))}static empty(){return new e(Um.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Um.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Um.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new Um(t.slice()))}};function Km(e,t,n){if(!n)throw new W(U.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function qm(e,t,n,r){if(!0===t&&!0===r)throw new W(U.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Jm(e){if(!K.isDocumentKey(e))throw new W(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ym(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Xm(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:B(12329,{type:typeof e})}function Zm(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new W(U.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Xm(e);throw new W(U.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function q(e,t){let n={typeString:e};return t&&(n.value=t),n}function Qm(e,t){if(!Ym(e))throw new W(U.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new W(U.INVALID_ARGUMENT,n);return!0}var $m=-62135596800,eh=1e6,th=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*eh))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new W(U.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<$m||e>=253402300800)throw new W(U.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eh}_compareTo(e){return this.seconds===e.seconds?G(this.nanoseconds,e.nanoseconds):G(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qm(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-$m;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};th._jsonSchemaVersion=`firestore/timestamp/1.0`,th._jsonSchema={type:q(`string`,th._jsonSchemaVersion),seconds:q(`number`),nanoseconds:q(`number`)};var J=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new th(0,0))}static max(){return new e(new th(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},nh=-1,rh=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};rh.UNKNOWN_ID=-1;function ih(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new oh(J.fromTimestamp(r===1e9?new th(n+1,0):new th(n,r)),K.empty(),t)}function ah(e){return new oh(e.readTime,e.key,nh)}var oh=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(J.min(),K.empty(),nh)}static max(){return new e(J.max(),K.empty(),nh)}};function sh(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=K.comparator(e.documentKey,t.documentKey),n===0?G(e.largestBatchId,t.largestBatchId):n):n}var ch=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,lh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function uh(e){if(e.code!==U.FAILED_PRECONDITION||e.message!==ch)throw e;z(`LocalStore`,`Unexpectedly lost primary lease`)}var Y=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function dh(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function fh(e){return e.name===`IndexedDbTransactionError`}var ph=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ae&&this.ae(e),e}};ph.ue=-1;var mh=-1;function hh(e){return e==null}function gh(e){return e===0&&1/e==-1/0}function _h(e){return typeof e==`number`&&Number.isInteger(e)&&!gh(e)&&e<=2**53-1&&e>=-(2**53-1)}var vh=``;function yh(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=xh(t)),t=bh(e.get(n),t);return xh(t)}function bh(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case vh:n+=``;break;default:n+=r}}return n}function xh(e){return e+vh+``}function Sh(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ch(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wh(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var X=class e{constructor(e,t){this.comparator=e,this.root=t||Eh.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Eh.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Eh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Th(this.root,e,this.comparator,!1)}getReverseIterator(){return new Th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Th(this.root,e,this.comparator,!0)}},Th=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Eh=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};Eh.EMPTY=null,Eh.RED=!0,Eh.BLACK=!1,Eh.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Eh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Dh=class e{constructor(e){this.comparator=e,this.data=new X(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oh(this.data.getIterator())}getIteratorFrom(e){return new Oh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},Oh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},kh=class e{constructor(e){this.fields=e,e.sort(Gm.comparator)}static empty(){return new e([])}unionWith(t){let n=new Dh(Gm.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bm(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},Ah=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},jh=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new Ah(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return G(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};jh.EMPTY_BYTE_STRING=new jh(``);var Mh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nh(e){if(V(!!e,39018),typeof e==`string`){let t=0,n=Mh.exec(e);if(V(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Z(e.seconds),nanos:Z(e.nanos)}}function Z(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Ph(e){return typeof e==`string`?jh.fromBase64String(e):jh.fromUint8Array(e)}var Fh=`server_timestamp`,Ih=`__type__`,Lh=`__previous_value__`,Rh=`__local_write_time__`;function zh(e){return(e?.mapValue?.fields||{})[Ih]?.stringValue===Fh}function Bh(e){let t=e.mapValue.fields[Lh];return zh(t)?Bh(t):t}function Vh(e){let t=Nh(e.mapValue.fields[Rh].timestampValue);return new th(t.seconds,t.nanos)}var Hh=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},Uh=`(default)`,Wh=class e{constructor(e,t){this.projectId=e,this.database=t||Uh}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===Uh}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},Gh=`__type__`,Kh=`__max__`,qh={mapValue:{fields:{__type__:{stringValue:Kh}}}},Jh=`__vector__`,Yh=`value`;function Xh(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?zh(e)?4:fg(e)?9007199254740991:ug(e)?10:11:B(28295,{value:e})}function Zh(e,t){if(e===t)return!0;let n=Xh(e);if(n!==Xh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vh(e).isEqual(Vh(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=Nh(e.timestampValue),r=Nh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ph(e.bytesValue).isEqual(Ph(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Z(e.geoPointValue.latitude)===Z(t.geoPointValue.latitude)&&Z(e.geoPointValue.longitude)===Z(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return Z(e.integerValue)===Z(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=Z(e.doubleValue),r=Z(t.doubleValue);return n===r?gh(n)===gh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Bm(e.arrayValue.values||[],t.arrayValue.values||[],Zh);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Sh(n)!==Sh(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Zh(n[e],r[e])))return!1;return!0}(e,t);default:return B(52216,{left:e})}}function Qh(e,t){return(e.values||[]).find((e=>Zh(e,t)))!==void 0}function $h(e,t){if(e===t)return 0;let n=Xh(e),r=Xh(t);if(n!==r)return G(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return G(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=Z(e.integerValue||e.doubleValue),r=Z(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return eg(e.timestampValue,t.timestampValue);case 4:return eg(Vh(e),Vh(t));case 5:return Lm(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Ph(e),r=Ph(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=G(n[e],r[e]);if(t!==0)return t}return G(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=G(Z(e.latitude),Z(t.latitude));return n===0?G(Z(e.longitude),Z(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return tg(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[Yh]?.arrayValue,a=r[Yh]?.arrayValue,o=G(i?.values?.length||0,a?.values?.length||0);return o===0?tg(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===qh.mapValue&&t===qh.mapValue)return 0;if(e===qh.mapValue)return 1;if(t===qh.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=Lm(r[e],a[e]);if(t!==0)return t;let o=$h(n[r[e]],i[a[e]]);if(o!==0)return o}return G(r.length,a.length)}(e.mapValue,t.mapValue);default:throw B(23264,{le:n})}}function eg(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return G(e,t);let n=Nh(e),r=Nh(t),i=G(n.seconds,r.seconds);return i===0?G(n.nanos,r.nanos):i}function tg(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=$h(n[e],r[e]);if(t)return t}return G(n.length,r.length)}function ng(e){return rg(e)}function rg(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=Nh(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Ph(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return K.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=rg(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${rg(e.fields[i])}`;return n+`}`}(e.mapValue):B(61005,{value:e})}function ig(e){switch(Xh(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Bh(e);return t?16+ig(t):16;case 5:return 2*e.stringValue.length;case 6:return Ph(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+ig(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Ch(e.fields,((e,n)=>{t+=e.length+ig(n)})),t}(e.mapValue);default:throw B(13486,{value:e})}}function ag(e){return!!e&&`integerValue`in e}function og(e){return!!e&&`arrayValue`in e}function sg(e){return!!e&&`nullValue`in e}function cg(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function lg(e){return!!e&&`mapValue`in e}function ug(e){return(e?.mapValue?.fields||{})[Gh]?.stringValue===Jh}function dg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return Ch(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=dg(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=dg(e.arrayValue.values[n]);return t}return Object.assign({},e)}function fg(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Kh}var pg=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!lg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dg(t)}setAll(e){let t=Gm.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=dg(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());lg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];lg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ch(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(dg(this.value))}};function mg(e){let t=[];return Ch(e.fields,((e,n)=>{let r=new Gm([e]);if(lg(n)){let e=mg(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new kh(t)}var hg=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,J.min(),J.min(),J.min(),pg.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,J.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,J.min(),J.min(),pg.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,J.min(),J.min(),pg.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pg.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pg.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},gg=class{constructor(e,t){this.position=e,this.inclusive=t}};function _g(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?K.comparator(K.fromName(o.referenceValue),n.key):$h(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function vg(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zh(e.position[n],t.position[n]))return!1;return!0}var yg=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function bg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var xg=class{},Sg=class e extends xg{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new Ag(t,n,r):n===`array-contains`?new Pg(t,r):n===`in`?new Fg(t,r):n===`not-in`?new Ig(t,r):n===`array-contains-any`?new Lg(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new jg(e,n):new Mg(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison($h(t,this.value)):t!==null&&Xh(this.value)===Xh(t)&&this.matchesComparison($h(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Cg=class e extends xg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(t,n){return new e(t,n)}matches(e){return wg(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function wg(e){return e.op===`and`}function Tg(e){return Eg(e)&&wg(e)}function Eg(e){for(let t of e.filters)if(t instanceof Cg)return!1;return!0}function Dg(e){if(e instanceof Sg)return e.field.canonicalString()+e.op.toString()+ng(e.value);if(Tg(e))return e.filters.map((e=>Dg(e))).join(`,`);{let t=e.filters.map((e=>Dg(e))).join(`,`);return`${e.op}(${t})`}}function Og(e,t){return e instanceof Sg?function(e,t){return t instanceof Sg&&e.op===t.op&&e.field.isEqual(t.field)&&Zh(e.value,t.value)}(e,t):e instanceof Cg?function(e,t){return t instanceof Cg&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&Og(n,t.filters[r])),!0):!1}(e,t):void B(19439)}function kg(e){return e instanceof Sg?function(e){return`${e.field.canonicalString()} ${e.op} ${ng(e.value)}`}(e):e instanceof Cg?function(e){return e.op.toString()+` {`+e.getFilters().map(kg).join(` ,`)+`}`}(e):`Filter`}var Ag=class extends Sg{constructor(e,t,n){super(e,t,n),this.key=K.fromName(n.referenceValue)}matches(e){let t=K.comparator(e.key,this.key);return this.matchesComparison(t)}},jg=class extends Sg{constructor(e,t){super(e,`in`,t),this.keys=Ng(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},Mg=class extends Sg{constructor(e,t){super(e,`not-in`,t),this.keys=Ng(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function Ng(e,t){return(t.arrayValue?.values||[]).map((e=>K.fromName(e.referenceValue)))}var Pg=class extends Sg{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return og(t)&&Qh(t.arrayValue,this.value)}},Fg=class extends Sg{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Qh(this.value.arrayValue,t)}},Ig=class extends Sg{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Qh(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Qh(this.value.arrayValue,t)}},Lg=class extends Sg{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!og(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Qh(this.value.arrayValue,e)))}},Rg=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Pe=null}};function zg(e,t=null,n=[],r=[],i=null,a=null,o=null){return new Rg(e,t,n,r,i,a,o)}function Bg(e){let t=H(e);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>Dg(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),hh(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>ng(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>ng(e))).join(`,`)),t.Pe=e}return t.Pe}function Vg(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Og(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vg(e.startAt,t.startAt)&&vg(e.endAt,t.endAt)}function Hg(e){return K.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var Ug=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Wg(e,t,n,r,i,a,o,s){return new Ug(e,t,n,r,i,a,o,s)}function Gg(e){return new Ug(e)}function Kg(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function qg(e){return e.collectionGroup!==null}function Jg(e){let t=H(e);if(t.Te===null){t.Te=[];let e=new Set;for(let n of t.explicitOrderBy)t.Te.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new Dh(Gm.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new yg(r,n))})),e.has(Gm.keyField().canonicalString())||t.Te.push(new yg(Gm.keyField(),n))}return t.Te}function Yg(e){let t=H(e);return t.Ie||=Xg(t,Jg(e)),t.Ie}function Xg(e,t){if(e.limitType===`F`)return zg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new yg(e.field,t)}));let n=e.endAt?new gg(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new gg(e.startAt.position,e.startAt.inclusive):null;return zg(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Zg(e,t,n){return new Ug(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qg(e,t){return Vg(Yg(e),Yg(t))&&e.limitType===t.limitType}function $g(e){return`${Bg(Yg(e))}|lt:${e.limitType}`}function e_(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>kg(e))).join(`, `)}]`),hh(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>ng(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>ng(e))).join(`,`)),`Target(${t})`}(Yg(e))}; limitType=${e.limitType})`}function t_(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?K.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of Jg(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=_g(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Jg(e),t)||e.endAt&&!function(e,t,n){let r=_g(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Jg(e),t))}(e,t)}function n_(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function r_(e){return(t,n)=>{let r=!1;for(let i of Jg(e)){let e=i_(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function i_(e,t,n){let r=e.field.isKeyField()?K.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?$h(r,i):B(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return B(19790,{direction:e.dir})}}var a_=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ch(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return wh(this.inner)}size(){return this.innerSize}},o_=new X(K.comparator);function s_(){return o_}var c_=new X(K.comparator);function l_(...e){let t=c_;for(let n of e)t=t.insert(n.key,n);return t}function u_(e){let t=c_;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function d_(){return p_()}function f_(){return p_()}function p_(){return new a_((e=>e.toString()),((e,t)=>e.isEqual(t)))}var m_=new X(K.comparator),h_=new Dh(K.comparator);function Q(...e){let t=h_;for(let n of e)t=t.add(n);return t}var g_=new Dh(G);function __(){return g_}function v_(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:gh(t)?`-0`:t}}function y_(e){return{integerValue:``+e}}function b_(e,t){return _h(t)?y_(t):v_(e,t)}var x_=class{constructor(){this._=void 0}};function S_(e,t,n){return e instanceof T_?function(e,t){let n={fields:{[Ih]:{stringValue:Fh},[Rh]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zh(t)&&(t=Bh(t)),t&&(n.fields[Lh]=t),{mapValue:n}}(n,t):e instanceof E_?D_(e,t):e instanceof O_?k_(e,t):function(e,t){let n=w_(e,t),r=j_(n)+j_(e.Ee);return ag(n)&&ag(e.Ee)?y_(r):v_(e.serializer,r)}(e,t)}function C_(e,t,n){return e instanceof E_?D_(e,t):e instanceof O_?k_(e,t):n}function w_(e,t){return e instanceof A_?function(e){return ag(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var T_=class extends x_{},E_=class extends x_{constructor(e){super(),this.elements=e}};function D_(e,t){let n=M_(t);for(let t of e.elements)n.some((e=>Zh(e,t)))||n.push(t);return{arrayValue:{values:n}}}var O_=class extends x_{constructor(e){super(),this.elements=e}};function k_(e,t){let n=M_(t);for(let t of e.elements)n=n.filter((e=>!Zh(e,t)));return{arrayValue:{values:n}}}var A_=class extends x_{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function j_(e){return Z(e.integerValue||e.doubleValue)}function M_(e){return og(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function N_(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof E_&&t instanceof E_||e instanceof O_&&t instanceof O_?Bm(e.elements,t.elements,Zh):e instanceof A_&&t instanceof A_?Zh(e.Ee,t.Ee):e instanceof T_&&t instanceof T_}(e.transform,t.transform)}var P_=class{constructor(e,t){this.version=e,this.transformResults=t}},F_=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function I_(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var L_=class{};function R_(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new J_(e.key,F_.none()):new U_(e.key,e.data,F_.none());{let n=e.data,r=pg.empty(),i=new Dh(Gm.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new W_(e.key,r,new kh(i.toArray()),F_.none())}}function z_(e,t,n){e instanceof U_?function(e,t,n){let r=e.value.clone(),i=K_(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof W_?function(e,t,n){if(!I_(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=K_(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(G_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function B_(e,t,n,r){return e instanceof U_?function(e,t,n,r){if(!I_(e.precondition,t))return n;let i=e.value.clone(),a=q_(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof W_?function(e,t,n,r){if(!I_(e.precondition,t))return n;let i=q_(e.fieldTransforms,r,t),a=t.data;return a.setAll(G_(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return I_(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function V_(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=w_(r.transform,e||null);i!=null&&(n===null&&(n=pg.empty()),n.set(r.field,i))}return n||null}function H_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&Bm(e,t,((e,t)=>N_(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var U_=class extends L_{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},W_=class extends L_{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function G_(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function K_(e,t,n){let r=new Map;V(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,C_(o,s,n[i]))}return r}function q_(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,S_(e,a,t))}return r}var J_=class extends L_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Y_=class extends L_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},X_=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&z_(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=B_(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=B_(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=f_();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=R_(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(J.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Q())}isEqual(e){return this.batchId===e.batchId&&Bm(this.mutations,e.mutations,((e,t)=>H_(e,t)))&&Bm(this.baseMutations,e.baseMutations,((e,t)=>H_(e,t)))}},Z_=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){V(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=function(){return m_}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},Q_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},$_=class{constructor(e,t){this.count=e,this.unchangedNames=t}},ev,$;function tv(e){switch(e){case U.OK:return B(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return B(15467,{code:e})}}function nv(e){if(e===void 0)return xm(`GRPC error has no .code`),U.UNKNOWN;switch(e){case ev.OK:return U.OK;case ev.CANCELLED:return U.CANCELLED;case ev.UNKNOWN:return U.UNKNOWN;case ev.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ev.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ev.INTERNAL:return U.INTERNAL;case ev.UNAVAILABLE:return U.UNAVAILABLE;case ev.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ev.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ev.NOT_FOUND:return U.NOT_FOUND;case ev.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ev.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ev.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ev.ABORTED:return U.ABORTED;case ev.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ev.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ev.DATA_LOSS:return U.DATA_LOSS;default:return B(39323,{code:e})}}($=ev||={})[$.OK=0]=`OK`,$[$.CANCELLED=1]=`CANCELLED`,$[$.UNKNOWN=2]=`UNKNOWN`,$[$.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,$[$.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,$[$.NOT_FOUND=5]=`NOT_FOUND`,$[$.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,$[$.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,$[$.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,$[$.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,$[$.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,$[$.ABORTED=10]=`ABORTED`,$[$.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,$[$.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,$[$.INTERNAL=13]=`INTERNAL`,$[$.UNAVAILABLE=14]=`UNAVAILABLE`,$[$.DATA_LOSS=15]=`DATA_LOSS`;var rv=null,iv=new rm([4294967295,4294967295],0);function av(e){let t=Fm().encode(e),n=new im;return n.update(t),new Uint8Array(n.digest())}function ov(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new rm([n,r],0),new rm([i,a],0)]}var sv=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new cv(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new cv(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new cv(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=rm.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(rm.fromNumber(n)));return r.compare(iv)===1&&(r=new rm([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let[t,n]=ov(av(e));for(let e=0;e<this.hashCount;e++){let r=this.pe(t,n,e);if(!this.ye(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.fe===0)return;let[t,n]=ov(av(e));for(let e=0;e<this.hashCount;e++){let r=this.pe(t,n,e);this.we(r)}}we(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},cv=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},lv=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,uv.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(J.min(),i,new X(G),s_(),Q())}},uv=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,Q(),Q(),Q())}},dv=class{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}},fv=class{constructor(e,t){this.targetId=e,this.De=t}},pv=class{constructor(e,t,n=jh.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},mv=class{constructor(){this.ve=0,this.Ce=_v(),this.Fe=jh.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Q(),t=Q(),n=Q();return this.Ce.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:B(38017,{changeType:i})}})),new uv(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=_v()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){--this.ve,V(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},hv=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=s_(),this.je=gv(),this.Je=gv(),this.He=new X(G)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{let n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:B(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((e,n)=>{this.nt(n)&&t(n)}))}it(e){let t=e.targetId,n=e.De.count,r=this.st(t);if(r){let i=r.target;if(Hg(i))if(n===0){let e=new K(i.path);this.Xe(t,e,hg.newNoDocument(e,J.min()))}else V(n===1,20013,{expectedCount:n});else{let r=this.ot(t);if(r!==n){let n=this._t(e),i=n?this.ut(n,e,r):1;if(i!==0){this.rt(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.He=this.He.insert(t,e)}rv?.ct(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>{var t;return(t=r?.mightContain(e))!=null&&t}}),a}(r,e.De,this.We.lt(),n,i))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=Ph(n).toUint8Array()}catch(e){if(e instanceof Ah)return Sm(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new sv(a,r,i)}catch(e){return Sm(e instanceof cv?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.fe===0?null:o}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){let n=this.We.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.We.lt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,n,null),r++)})),r}Pt(e){let t=new Map;this.Ge.forEach(((n,r)=>{let i=this.st(r);if(i){if(n.current&&Hg(i.target)){let t=new K(i.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,hg.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}}));let n=Q();this.Je.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.st(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.ze.forEach(((t,n)=>n.setReadTime(e)));let r=new lv(e,t,this.He,this.ze,n);return this.ze=s_(),this.je=gv(),this.Je=gv(),this.He=new X(G),r}Ze(e,t){if(!this.nt(e))return;let n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new mv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dh(G),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dh(G),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||z(`WatchChangeAggregator`,`Detected inactive target`,e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function gv(){return new X(K.comparator)}function _v(){return new X(K.comparator)}var vv={asc:`ASCENDING`,desc:`DESCENDING`},yv={"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`},bv={and:`AND`,or:`OR`},xv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Sv(e,t){return e.useProto3Json||hh(t)?t:{value:t}}function Cv(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function wv(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Tv(e,t){return Cv(e,t.toTimestamp())}function Ev(e){return V(!!e,49232),J.fromTimestamp(function(e){let t=Nh(e);return new th(t.seconds,t.nanos)}(e))}function Dv(e,t){return Ov(e,t).canonicalString()}function Ov(e,t){let n=function(e){return new Um([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function kv(e){let t=Um.fromString(e);return V(Qv(t),10190,{key:t.toString()}),t}function Av(e,t){return Dv(e.databaseId,t.path)}function jv(e,t){let n=kv(t);if(n.get(1)!==e.databaseId.projectId)throw new W(U.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new W(U.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new K(Fv(n))}function Mv(e,t){return Dv(e.databaseId,t)}function Nv(e){let t=kv(e);return t.length===4?Um.emptyPath():Fv(t)}function Pv(e){return new Um([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function Fv(e){return V(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function Iv(e,t,n){return{name:Av(e,t),fields:n.value.mapValue.fields}}function Lv(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:B(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(V(t===void 0||typeof t==`string`,58123),jh.fromBase64String(t||``)):(V(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),jh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new pv(r,i,a,o&&function(e){return new W(e.code===void 0?U.UNKNOWN:nv(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=jv(e,r.document.name),a=Ev(r.document.updateTime),o=r.document.createTime?Ev(r.document.createTime):J.min(),s=new pg({mapValue:{fields:r.document.fields}}),c=hg.newFoundDocument(i,a,o,s);n=new dv(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=jv(e,r.document),a=r.readTime?Ev(r.readTime):J.min(),o=hg.newNoDocument(i,a);n=new dv([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=jv(e,r.document);n=new dv([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return B(11601,{At:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new $_(r,i),o=e.targetId;n=new fv(o,a)}}return n}function Rv(e,t){let n;if(t instanceof U_)n={update:Iv(e,t.key,t.value)};else if(t instanceof J_)n={delete:Av(e,t.key)};else if(t instanceof W_)n={update:Iv(e,t.key,t.data),updateMask:Zv(t.fieldMask)};else{if(!(t instanceof Y_))return B(16599,{Rt:t.type});n={verify:Av(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof T_)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof E_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof O_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof A_)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw B(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?B(27497):{exists:t.exists}:{updateTime:Tv(e,t.updateTime)}}(e,t.precondition)),n}function zv(e,t){return e&&e.length>0?(V(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?Ev(e.updateTime):Ev(t);return n.isEqual(J.min())&&(n=Ev(t)),new P_(n,e.transformResults||[])}(e,t)))):[]}function Bv(e,t){return{documents:[Mv(e,t.path)]}}function Vv(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=Mv(e,i);let a=function(e){if(e.length!==0)return Xv(Cg.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:Jv(e.field),direction:Gv(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=Sv(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:i}}function Hv(e){let t=Nv(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){V(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=Wv(e);return t instanceof Cg&&Tg(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new yg(Yv(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,hh(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new gg(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new gg(e.values||[],t)}(n.endAt)),Wg(t,i,o,a,s,`F`,c,l)}function Uv(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return B(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Wv(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?B(30097,{filter:e}):function(e){return Cg.create(e.compositeFilter.filters.map((e=>Wv(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return B(1026)}}(e.compositeFilter.op))}(e):function(e){return Sg.create(Yv(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return B(58110);default:return B(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=Yv(e.unaryFilter.field);return Sg.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=Yv(e.unaryFilter.field);return Sg.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=Yv(e.unaryFilter.field);return Sg.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=Yv(e.unaryFilter.field);return Sg.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return B(61313);default:return B(60726)}}(e)}function Gv(e){return vv[e]}function Kv(e){return yv[e]}function qv(e){return bv[e]}function Jv(e){return{fieldPath:e.canonicalString()}}function Yv(e){return Gm.fromServerFormat(e.fieldPath)}function Xv(e){return e instanceof Sg?function(e){if(e.op===`==`){if(cg(e.value))return{unaryFilter:{field:Jv(e.field),op:`IS_NAN`}};if(sg(e.value))return{unaryFilter:{field:Jv(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(cg(e.value))return{unaryFilter:{field:Jv(e.field),op:`IS_NOT_NAN`}};if(sg(e.value))return{unaryFilter:{field:Jv(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:Jv(e.field),op:Kv(e.op),value:e.value}}}(e):e instanceof Cg?function(e){let t=e.getFilters().map((e=>Xv(e)));return t.length===1?t[0]:{compositeFilter:{op:qv(e.op),filters:t}}}(e):B(54877,{filter:e})}function Zv(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Qv(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}var $v=class e{constructor(e,t,n,r,i=J.min(),a=J.min(),o=jh.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},ey=class{constructor(e){this.gt=e}};function ty(e){let t=Hv({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?Zg(t,t.limit,`L`):t}var ny=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if(`nullValue`in e)this.Ct(t,5);else if(`booleanValue`in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if(`integerValue`in e)this.Ct(t,15),t.Ft(Z(e.integerValue));else if(`doubleValue`in e){let n=Z(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),gh(n)?t.Ft(0):t.Ft(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ct(t,20),typeof n==`string`&&(n=Nh(n)),t.Mt(`${n.seconds||``}`),t.Ft(n.nanos||0)}else if(`stringValue`in e)this.xt(e.stringValue,t),this.Ot(t);else if(`bytesValue`in e)this.Ct(t,30),t.Nt(Ph(e.bytesValue)),this.Ot(t);else if(`referenceValue`in e)this.Bt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else `mapValue`in e?fg(e)?this.Ct(t,2**53-1):ug(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):`arrayValue`in e?(this.qt(e.arrayValue,t),this.Ot(t)):B(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let n=e.fields||{};this.Ct(t,55);for(let e of Object.keys(n))this.xt(e,t),this.Dt(n[e],t)}Lt(e,t){let n=e.fields||{};this.Ct(t,53);let r=Yh,i=n[r].arrayValue?.values?.length||0;this.Ct(t,15),t.Ft(Z(i)),this.xt(r,t),this.Dt(n[r],t)}qt(e,t){let n=e.values||[];this.Ct(t,50);for(let e of n)this.Dt(e,t)}Bt(e,t){this.Ct(t,37),K.fromName(e).path.forEach((e=>{this.Ct(t,60),this.$t(e,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};ny.Ut=new ny;var ry=class{constructor(){this.Dn=new iy}addToCollectionParentIndex(e,t){return this.Dn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(oh.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(oh.min())}updateCollectionGroup(e,t,n){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}},iy=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Dh(Um.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Dh(Um.comparator)).toArray()}};new Uint8Array;var ay={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oy=41943040,sy=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};sy.DEFAULT_COLLECTION_PERCENTILE=10,sy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sy.DEFAULT=new sy(oy,sy.DEFAULT_COLLECTION_PERCENTILE,sy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sy.DISABLED=new sy(-1,0,0);var cy=class e{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new e(0)}static ur(){return new e(-1)}},ly=`LruGarbageCollector`,uy=1048576;function dy([e,t],[n,r]){let i=G(e,n);return i===0?G(t,r):i}var fy=class{constructor(e){this.Tr=e,this.buffer=new Dh(dy),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();dy(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},py=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&=(this.Ar.cancel(),null)}get started(){return this.Ar!==null}Rr(e){z(ly,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){fh(e)?z(ly,`Ignoring IndexedDB error during garbage collection: `,e):await uh(e)}await this.Rr(3e5)}))}},my=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(ph.ue);let n=new fy(t);return this.Vr.forEachTarget(e,(e=>n.Er(e.sequenceNumber))).next((()=>this.Vr.gr(e,(e=>n.Er(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z(`LruGarbageCollector`,`Garbage collection skipped; disabled`),Y.resolve(ay)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(z(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ay):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(z(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),bm()<=L.DEBUG&&z(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function hy(e,t){return new my(e,t)}var gy=class{constructor(){this.changes=new a_((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hg.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):Y.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},_y=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},vy=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&B_(n.mutation,e,kh.empty(),th.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Q()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Q()){let r=d_();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=l_();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=d_();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Q())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=s_(),a=p_(),o=function(){return p_()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof W_)?i=i.insert(t.key,t):o===void 0?a.set(t.key,kh.empty()):(a.set(t.key,o.mutation.getFieldMask()),B_(o.mutation,t,o.mutation.getFieldMask(),th.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new _y(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=p_(),r=new X(((e,t)=>e-t)),i=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||kh.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||Q()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=f_();c.forEach((e=>{if(!i.has(e)){let r=R_(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return Y.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return K.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Y.resolve(d_()),o=nh,s=i;return a.next((t=>Y.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Y.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Q()))).next((e=>({batchId:o,changes:u_(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next((e=>{let t=l_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=l_();return this.indexManager.getCollectionParents(e,i).next((o=>Y.forEach(o,(o=>{let s=function(e,t){return new Ug(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,hg.newInvalidDocument(r)))}));let n=l_();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&B_(a.mutation,r,kh.empty(),th.now()),t_(t,r)&&(n=n.insert(e,r))})),n}))}},yy=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ev(e.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:ty(e.bundledQuery),readTime:Ev(e.readTime)}}(t)),Y.resolve()}},by=class{constructor(){this.overlays=new X(K.comparator),this.kr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){let n=d_();return Y.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.wt(e,t,r)})),Y.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.kr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.kr.delete(n)),Y.resolve()}getOverlaysForCollection(e,t,n){let r=d_(),i=t.length+1,a=new K(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Y.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new X(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=d_(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=d_(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Y.resolve(o)}wt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Q_(t,n));let i=this.kr.get(t);i===void 0&&(i=Q(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}},xy=class{constructor(){this.sessionToken=jh.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}},Sy=class{constructor(){this.qr=new Dh(Cy.Qr),this.$r=new Dh(Cy.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let n=new Cy(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Wr(new Cy(e,t))}Gr(e,t){e.forEach((e=>this.removeReference(e,t)))}zr(e){let t=new K(new Um([])),n=new Cy(t,e),r=new Cy(t,e+1),i=[];return this.$r.forEachInRange([n,r],(e=>{this.Wr(e),i.push(e.key)})),i}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new K(new Um([])),n=new Cy(t,e),r=new Cy(t,e+1),i=Q();return this.$r.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new Cy(e,0),n=this.qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},Cy=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return K.comparator(e.key,t.key)||G(e.Hr,t.Hr)}static Ur(e,t){return G(e.Hr,t.Hr)||K.comparator(e.key,t.key)}},wy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dh(Cy.Qr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new X_(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Yr=this.Yr.add(new Cy(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Y.resolve(a)}lookupMutationBatch(e,t){return Y.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),i=r<0?0:r;return Y.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?mh:this.er-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new Cy(t,0),r=new Cy(t,1/0),i=[];return this.Yr.forEachInRange([n,r],(e=>{let t=this.Zr(e.Hr);i.push(t)})),Y.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Dh(G);return t.forEach((e=>{let t=new Cy(e,0),r=new Cy(e,1/0);this.Yr.forEachInRange([t,r],(e=>{n=n.add(e.Hr)}))})),Y.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;K.isDocumentKey(i)||(i=i.child(``));let a=new Cy(new K(i),0),o=new Dh(G);return this.Yr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)}),a),Y.resolve(this.ei(o))}ei(e){let t=[];return e.forEach((e=>{let n=this.Zr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){V(this.ti(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Yr;return Y.forEach(t.mutations,(r=>{let i=new Cy(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=n}))}rr(e){}containsKey(e,t){let n=new Cy(t,0),r=this.Yr.firstAfterOrEqual(n);return Y.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},Ty=class{constructor(e){this.ni=e,this.docs=function(){return new X(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return Y.resolve(n?n.document.mutableCopy():hg.newInvalidDocument(t))}getEntries(e,t){let n=s_();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():hg.newInvalidDocument(e))})),Y.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=s_(),a=t.path,o=new K(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||sh(ah(o),n)<=0||(r.has(o.key)||t_(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Y.resolve(i)}getAllFromCollectionGroup(e,t,n,r){B(9500)}ri(e,t){return Y.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ey(this)}getSize(e){return Y.resolve(this.size)}},Ey=class extends gy{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)})),Y.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}},Dy=class{constructor(e){this.persistence=e,this.ii=new a_((e=>Bg(e)),Vg),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.si=0,this.oi=new Sy,this.targetCount=0,this._i=cy.ar()}forEachTarget(e,t){return this.ii.forEach(((e,n)=>t(n))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),Y.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new cy(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.hr(t),Y.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),--this.targetCount,Y.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.ii.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Y.waitFor(i).next((()=>r))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){let n=this.ii.get(t)||null;return Y.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),Y.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Y.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){let n=this.oi.Jr(t);return Y.resolve(n)}containsKey(e,t){return Y.resolve(this.oi.containsKey(t))}},Oy=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new ph(0),this.ci=!1,this.ci=!0,this.li=new xy,this.referenceDelegate=e(this),this.hi=new Dy(this),this.indexManager=new ry,this.remoteDocumentCache=function(e){return new Ty(e)}((e=>this.referenceDelegate.Pi(e))),this.serializer=new ey(t),this.Ti=new yy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new by,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new wy(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){z(`MemoryPersistence`,`Starting transaction:`,e);let r=new ky(this.ui.next());return this.referenceDelegate.Ii(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ei(e,t){return Y.or(Object.values(this.ai).map((n=>()=>n.containsKey(e,t))))}},ky=class extends lh{constructor(e){super(),this.currentSequenceNumber=e}},Ay=class e{constructor(e){this.persistence=e,this.Ai=new Sy,this.Ri=null}static Vi(t){return new e(t)}get mi(){if(this.Ri)return this.Ri;throw B(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),Y.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((e=>this.mi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.mi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.mi,(n=>{let r=K.fromPath(n);return this.fi(e,r).next((e=>{e||t.removeEntry(r,J.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Y.or([()=>Y.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},jy=class e{constructor(e,t){this.persistence=e,this.gi=new a_((e=>yh(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=hy(this,t)}static Vi(t,n){return new e(t,n)}Ii(){}di(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}yr(e){let t=0;return this.gr(e,(e=>{t++})).next((()=>t))}gr(e,t){return Y.forEach(this.gi,((n,r)=>this.Sr(e,n,r).next((e=>e?Y.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ri(e,(r=>this.Sr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,J.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Y.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ig(e.data.value)),t}Sr(e,t,n){return Y.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.gi.get(t);return Y.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},My=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(t,n){let r=Q(),i=Q();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},Ny=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},Py=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return rs()?8:dh(Xo())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ps(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ys(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new Ny;return this.ws(e,t,n).next((r=>{if(i.result=r,this.Rs)return this.Ss(e,t,n,r.size)}))})).next((()=>i.result))}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(bm()<=L.DEBUG&&z(`QueryEngine`,`SDK will not create cache indexes for query:`,e_(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.Vs,`documents`),Y.resolve()):(bm()<=L.DEBUG&&z(`QueryEngine`,`Query:`,e_(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.fs*r?(bm()<=L.DEBUG&&z(`QueryEngine`,`The SDK decides to create cache indexes for query:`,e_(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,Yg(t))):Y.resolve())}ps(e,t){if(Kg(t))return Y.resolve(null);let n=Yg(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Zg(t,null,`F`),n=Yg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=Q(...r);return this.gs.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.bs(t,r);return this.Ds(t,a,i,n.readTime)?this.ps(e,Zg(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ys(e,t,n,r){return Kg(t)||r.isEqual(J.min())?Y.resolve(null):this.gs.getDocuments(e,n).next((i=>{let a=this.bs(t,i);return this.Ds(t,a,n,r)?Y.resolve(null):(bm()<=L.DEBUG&&z(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),e_(t)),this.vs(e,a,t,ih(r,nh)).next((e=>e)))}))}bs(e,t){let n=new Dh(r_(e));return t.forEach(((t,r)=>{t_(e,r)&&(n=n.add(r))})),n}Ds(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,t,n){return bm()<=L.DEBUG&&z(`QueryEngine`,`Using full collection scan to execute query:`,e_(t)),this.gs.getDocumentsMatchingQuery(e,t,oh.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},Fy=`LocalStore`,Iy=3e8,Ly=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new X(G),this.Ms=new a_((e=>Bg(e)),Vg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vy(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Fs)))}};function Ry(e,t,n,r){return new Ly(e,t,n,r)}async function zy(e,t){let n=H(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=Q();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Bs:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function By(e,t){let n=H(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=Y.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);V(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Q();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function Vy(e){let t=H(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.hi.getLastRemoteSnapshotVersion(e)))}function Hy(e,t){let n=H(e),r=t.snapshotVersion,i=n.Fs;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.hi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.hi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(jh.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Iy?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.hi.updateTargetData(e,l))}));let s=s_(),c=Q();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Uy(e,a,t.documentUpdates).next((e=>{s=e.Ls,c=e.ks}))),!r.isEqual(J.min())){let t=n.hi.getLastRemoteSnapshotVersion(e).next((t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Y.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Fs=i,e)))}function Uy(e,t,n){let r=Q(),i=Q();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=s_();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(J.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):z(Fy,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{Ls:r,ks:i}}))}function Wy(e,t){let n=H(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=mh),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Gy(e,t){let n=H(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.hi.getTargetData(e,t).next((i=>i?(r=i,Y.resolve(r)):n.hi.allocateTargetId(e).next((i=>(r=new $v(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.hi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Fs.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e}))}async function Ky(e,t,n){let r=H(e),i=r.Fs.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!fh(e))throw e;z(Fy,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function qy(e,t,n){let r=H(e),i=J.min(),a=Q();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=H(e),i=r.Ms.get(n);return i===void 0?r.hi.getTargetData(t,n):Y.resolve(r.Fs.get(i))}(r,e,Yg(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:J.min(),n?a:Q()))).next((e=>(Jy(r,n_(t),e),{documents:e,qs:a})))))}function Jy(e,t,n){let r=e.xs.get(t)||J.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.xs.set(t,r)}var Yy=class{constructor(){this.activeTargetIds=__()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Xy=class{constructor(){this.Fo=new Yy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||`not-current`}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Yy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Zy=class{xo(e){}shutdown(){}},Qy=`ConnectivityMonitor`,$y=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener(`online`,this.Oo),window.removeEventListener(`offline`,this.Bo)}qo(){window.addEventListener(`online`,this.Oo),window.addEventListener(`offline`,this.Bo)}No(){z(Qy,`Network connectivity changed: AVAILABLE`);for(let e of this.ko)e(0)}Lo(){z(Qy,`Network connectivity changed: UNAVAILABLE`);for(let e of this.ko)e(1)}static C(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},eb=null;function tb(){return eb===null?eb=function(){return 268435456+Math.round(2147483648*Math.random())}():eb++,`0x`+eb.toString(16)}var nb=`RestConnection`,rb={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},ib=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+`://`+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===Uh?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){let a=tb(),o=this.Go(e,t.toUriEncodedString());z(nb,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(s,r,i);let{host:c}=new URL(o),l=Ho(c);return this.jo(e,o,s,n,l).then((t=>(z(nb,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Sm(nb,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}zo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+vm}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Go(e,t){let n=rb[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}},ab=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}},ob=`WebChannelConnection`,sb=class extends ib{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,i){let a=tb();return new Promise(((i,o)=>{let s=new sm;s.setWithCredentials(!0),s.listenOnce(lm.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case um.NO_ERROR:let t=s.getResponseJson();z(ob,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case um.TIMEOUT:z(ob,`RPC '${e}' ${a} timed out`),o(new W(U.DEADLINE_EXCEEDED,`Request time out`));break;case um.HTTP_ERROR:let n=s.getStatus();if(z(ob,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new W(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(U).indexOf(t)>=0?t:U.UNKNOWN}(t.status),t.message)):o(new W(U.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new W(U.UNAVAILABLE,`Connection failed.`));break;default:B(9055,{c_:e,streamId:a,l_:s.getLastErrorCode(),h_:s.getLastError()})}}finally{z(ob,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);z(ob,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}P_(e,t,n){let r=tb(),i=[this.$o,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=mm(),o=pm(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.zo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);z(ob,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.T_(u);let d=!1,f=!1,p=new ab({Ho:t=>{f?z(ob,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(z(ob,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),z(ob,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Yo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,cm.EventType.OPEN,(()=>{f||(z(ob,`RPC '${e}' stream ${r} transport opened.`),p.s_())})),m(u,cm.EventType.CLOSE,(()=>{f||(f=!0,z(ob,`RPC '${e}' stream ${r} transport closed`),p.__(),this.I_(u))})),m(u,cm.EventType.ERROR,(t=>{f||(f=!0,Sm(ob,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.__(new W(U.UNAVAILABLE,`The operation could not be completed`)))})),m(u,cm.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];V(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){z(ob,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=ev[e];if(t!==void 0)return nv(t)}(t),i=a.message;n===void 0&&(n=U.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.__(new W(n,i)),u.close()}else z(ob,`RPC '${e}' stream ${r} received:`,n),p.a_(n)}})),m(o,fm.STAT_EVENT,(t=>{t.stat===dm.PROXY?z(ob,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===dm.NOPROXY&&z(ob,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.o_()}),0),p}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}};function cb(){return typeof document<`u`?document:null}function lb(e){return new xv(e,!0)}var ub=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&z(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}},db=`PersistentStream`,fb=class{constructor(e,t,n,r,i,a,o,s){this.Fi=e,this.w_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ub(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state===4?this.O_():this.auth()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&=(this.D_.cancel(),null)}Q_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e===4?t&&t.code===U.RESOURCE_EXHAUSTED?(xm(t.toString()),xm(`Using maximum backoff delay to prevent overloading the backend.`),this.F_.f_()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.F_.reset(),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.b_===t&&this.W_(e,n)}),(t=>{e((()=>{let e=new W(U.UNKNOWN,`Fetching auth token failed: `+t.message);return this.G_(e)}))}))}W_(e,t){let n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.e_((()=>{n((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((e=>{n((()=>this.G_(e)))})),this.stream.onMessage((e=>{n((()=>++this.C_==1?this.j_(e):this.onNext(e)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return z(db,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(z(db,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},pb=class extends fb{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}z_(e,t){return this.connection.P_(`Listen`,e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Lv(this.serializer,e),n=function(e){if(!(`targetChange`in e))return J.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?J.min():t.readTime?Ev(t.readTime):J.min()}(e);return this.listener.J_(t,n)}H_(e){let t={};t.database=Pv(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=Hg(r)?{documents:Bv(e,r)}:{query:Vv(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=wv(e,t.resumeToken);let r=Sv(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(J.min())>0){n.readTime=Cv(e,t.snapshotVersion.toTimestamp());let r=Sv(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=Uv(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){let t={};t.database=Pv(this.serializer),t.removeTarget=e,this.k_(t)}},mb=class extends fb{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_(`Write`,e,t)}j_(e){return V(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,V(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){V(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=zv(e.writeResults,e.commitTime),n=Ev(e.commitTime);return this.listener.ta(n,t)}na(){let e={};e.database=Pv(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>Rv(this.serializer,e)))};this.k_(t)}},hb=class{},gb=class extends hb{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new W(U.FAILED_PRECONDITION,`The client has already been terminated.`)}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,Ov(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new W(U.UNKNOWN,e.toString())}))}Jo(e,t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Jo(e,Ov(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new W(U.UNKNOWN,e.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}},_b=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua(`Unknown`),this.oa=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this.oa=null,this.ca(`Backend didn't respond within 10 seconds.`),this.ua(`Offline`),Promise.resolve()))))}la(e){this.state===`Online`?this.ua(`Unknown`):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua(`Offline`)))}set(e){this.ha(),this.sa=0,e===`Online`&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xm(t),this._a=!1):z(`OnlineStateTracker`,t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}},vb=`RemoteStore`,yb=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo((e=>{n.enqueueAndForget((async()=>{Ob(this)&&(z(vb,`Restarting streams for network reachability change.`),await async function(e){let t=H(e);t.Ia.add(4),await xb(t),t.Aa.set(`Unknown`),t.Ia.delete(4),await bb(t)}(this))}))})),this.Aa=new _b(n,r)}};async function bb(e){if(Ob(e))for(let t of e.da)await t(!0)}async function xb(e){for(let t of e.da)await t(!1)}function Sb(e,t){let n=H(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Db(n)?Eb(n):qb(n).x_()&&wb(n,t))}function Cb(e,t){let n=H(e),r=qb(n);n.Ta.delete(t),r.x_()&&Tb(n,t),n.Ta.size===0&&(r.x_()?r.B_():Ob(n)&&n.Aa.set(`Unknown`))}function wb(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(J.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}qb(e).H_(t)}function Tb(e,t){e.Ra.$e(t),qb(e).Y_(t)}function Eb(e){e.Ra=new hv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),qb(e).start(),e.Aa.aa()}function Db(e){return Ob(e)&&!qb(e).M_()&&e.Ta.size>0}function Ob(e){return H(e).Ia.size===0}function kb(e){e.Ra=void 0}async function Ab(e){e.Aa.set(`Online`)}async function jb(e){e.Ta.forEach(((t,n)=>{wb(e,t)}))}async function Mb(e,t){kb(e),Db(e)?(e.Aa.la(t),Eb(e)):e.Aa.set(`Unknown`)}async function Nb(e,t,n){if(e.Aa.set(`Online`),t instanceof pv&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){z(vb,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await Pb(e,n)}else if(t instanceof dv?e.Ra.Ye(t):t instanceof fv?e.Ra.it(t):e.Ra.et(t),!n.isEqual(J.min()))try{let t=await Vy(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Ra.Pt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ta.get(r);i&&e.Ta.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ta.get(t);r&&(e.Ta.set(t,r.withResumeToken(jh.EMPTY_BYTE_STRING,r.snapshotVersion)),Tb(e,t),wb(e,new $v(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){z(vb,`Failed to raise snapshot:`,t),await Pb(e,t)}}async function Pb(e,t,n){if(!fh(t))throw t;e.Ia.add(1),await xb(e),e.Aa.set(`Offline`),n||=()=>Vy(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{z(vb,`Retrying IndexedDB access`),await n(),e.Ia.delete(1),await bb(e)}))}function Fb(e,t){return t().catch((n=>Pb(e,n,t)))}async function Ib(e){let t=H(e),n=Jb(t),r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:mh;for(;Lb(t);)try{let e=await Wy(t.localStore,r);if(e===null){t.Pa.length===0&&n.B_();break}r=e.batchId,Rb(t,e)}catch(e){await Pb(t,e)}zb(t)&&Bb(t)}function Lb(e){return Ob(e)&&e.Pa.length<10}function Rb(e,t){e.Pa.push(t);let n=Jb(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function zb(e){return Ob(e)&&!Jb(e).M_()&&e.Pa.length>0}function Bb(e){Jb(e).start()}async function Vb(e){Jb(e).na()}async function Hb(e){let t=Jb(e);for(let n of e.Pa)t.X_(n.mutations)}async function Ub(e,t,n){let r=e.Pa.shift(),i=Z_.from(r,t,n);await Fb(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Ib(e)}async function Wb(e,t){t&&Jb(e).Z_&&await async function(e,t){if(function(e){return tv(e)&&e!==U.ABORTED}(t.code)){let n=e.Pa.shift();Jb(e).N_(),await Fb(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Ib(e)}}(e,t),zb(e)&&Bb(e)}async function Gb(e,t){let n=H(e);n.asyncQueue.verifyOperationInProgress(),z(vb,`RemoteStore received new credentials`);let r=Ob(n);n.Ia.add(3),await xb(n),r&&n.Aa.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await bb(n)}async function Kb(e,t){let n=H(e);t?(n.Ia.delete(2),await bb(n)):t||(n.Ia.add(2),await xb(n),n.Aa.set(`Unknown`))}function qb(e){return e.Va||(e.Va=function(e,t,n){let r=H(e);return r.ia(),new pb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Ab.bind(null,e),e_:jb.bind(null,e),n_:Mb.bind(null,e),J_:Nb.bind(null,e)}),e.da.push((async t=>{t?(e.Va.N_(),Db(e)?Eb(e):e.Aa.set(`Unknown`)):(await e.Va.stop(),kb(e))}))),e.Va}function Jb(e){return e.ma||(e.ma=function(e,t,n){let r=H(e);return r.ia(),new mb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:Vb.bind(null,e),n_:Wb.bind(null,e),ea:Hb.bind(null,e),ta:Ub.bind(null,e)}),e.da.push((async t=>{t?(e.ma.N_(),await Ib(e)):(await e.ma.stop(),e.Pa.length>0&&(z(vb,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))}))),e.ma}var Yb=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Tm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(U.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Xb(e,t){if(xm(`AsyncQueue`,`${t}: ${e}`),fh(e))return new W(U.UNAVAILABLE,`${t}: ${e}`);throw e}var Zb=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||K.comparator(t.key,n.key):(e,t)=>K.comparator(e.key,t.key),this.keyedMap=l_(),this.sortedSet=new X(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},Qb=class{constructor(){this.fa=new X(K.comparator)}track(e){let t=e.doc.key,n=this.fa.get(t);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(t,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(t):e.type===1&&n.type===2?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):B(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal(((t,n)=>{e.push(n)})),e}},$b=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,Zb.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},ex=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}},tx=class{constructor(){this.queries=nx(),this.onlineState=`Unknown`,this.Da=new Set}terminate(){(function(e,t){let n=H(e),r=n.queries;n.queries=nx(),r.forEach(((e,n)=>{for(let e of n.wa)e.onError(t)}))})(this,new W(U.ABORTED,`Firestore shutting down`))}};function nx(){return new a_((e=>$g(e)),Qg)}async function rx(e,t){let n=H(e),r=3,i=t.query,a=n.queries.get(i);a?!a.Sa()&&t.ba()&&(r=2):(a=new ex,r=t.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=Xb(e,`Initialization of query '${e_(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.wa.push(t),t.va(n.onlineState),a.ya&&t.Ca(a.ya)&&sx(n)}async function ix(e,t){let n=H(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.wa.indexOf(t);e>=0&&(a.wa.splice(e,1),a.wa.length===0?i=t.ba()?0:1:!a.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ax(e,t){let n=H(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.wa)t.Ca(e)&&(r=!0);i.ya=e}}r&&sx(n)}function ox(e,t,n){let r=H(e),i=r.queries.get(t);if(i)for(let e of i.wa)e.onError(n);r.queries.delete(t)}function sx(e){e.Da.forEach((e=>{e.next()}))}var cx,lx;(lx=cx||={}).Fa=`default`,lx.Cache=`cache`;var ux=class{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState=`Unknown`,this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new $b(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let n=t!==`Offline`;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=$b.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cx.Cache}},dx=class{constructor(e){this.key=e}},fx=class{constructor(e){this.key=e}},px=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Q(),this.mutatedKeys=Q(),this.Xa=r_(e),this.eu=new Zb(this.Xa)}get tu(){return this.Ha}nu(e,t){let n=t?t.ru:new Qb,r=t?t.eu:this.eu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=t_(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.iu(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.Xa(u,s)>0||c&&this.Xa(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{eu:a,ru:n,Ds:o,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc))),this.su(n),r=r!=null&&r;let o=t&&!r?this.ou():[],s=this.Za.size===0&&this.current&&!r?1:0,c=s!==this.Ya;return this.Ya=s,a.length!==0||c?{snapshot:new $b(this.query,e.eu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Qb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((e=>this.Ha=this.Ha.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ha=this.Ha.delete(e))),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Q(),this.eu.forEach((e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))}));let t=[];return e.forEach((e=>{this.Za.has(e)||t.push(new fx(e))})),this.Za.forEach((n=>{e.has(n)||t.push(new dx(n))})),t}uu(e){this.Ha=e.qs,this.Za=Q();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return $b.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},mx=`SyncEngine`,hx=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},gx=class{constructor(e){this.key=e,this.lu=!1}},_x=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new a_((e=>$g(e)),Qg),this.Tu=new Map,this.Iu=new Set,this.du=new X(K.comparator),this.Eu=new Map,this.Au=new Sy,this.Ru={},this.Vu=new Map,this.mu=cy.ur(),this.onlineState=`Unknown`,this.fu=void 0}get isPrimaryClient(){return!0===this.fu}};async function vx(e,t,n=!0){let r=Bx(e),i,a=r.Pu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await bx(r,t,n,!0),i}async function yx(e,t){await bx(Bx(e),t,!0,!1)}async function bx(e,t,n,r){let i=await Gy(e.localStore,Yg(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await xx(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&Sb(e.remoteStore,i),s}async function xx(e,t,n,r,i){e.gu=(t,n,r)=>async function(e,t,n,r){let i=t.view.nu(n);i.Ds&&(i=await qy(e.localStore,t.query,!1).then((({documents:e})=>t.view.nu(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return Px(e,t.targetId,s._u),s.snapshot}(e,t,n,r);let a=await qy(e.localStore,t,!0),o=new px(t,a.qs),s=o.nu(a.documents),c=uv.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);Px(e,n,l._u);let u=new hx(t,n,o);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),l.snapshot}async function Sx(e,t,n){let r=H(e),i=r.Pu.get(t),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter((e=>!Qg(e,t)))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ky(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cb(r.remoteStore,i.targetId),Mx(r,i.targetId)})).catch(uh)):(Mx(r,i.targetId),await Ky(r.localStore,i.targetId,!0))}async function Cx(e,t){let n=H(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cb(n.remoteStore,r.targetId))}async function wx(e,t,n){let r=Vx(e);try{let e=await function(e,t){let n=H(e),r=th.now(),i=t.reduce(((e,t)=>e.add(t.key)),Q()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=s_(),c=Q();return n.Os.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=V_(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new W_(e.key,t,mg(t.value.mapValue),F_.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:u_(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||=new X(G),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await Lx(r,e.changes),await Ib(r.remoteStore)}catch(e){let t=Xb(e,`Failed to persist write`);n.reject(t)}}async function Tx(e,t){let n=H(e);try{let e=await Hy(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Eu.get(t);r&&(V(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?V(r.lu,14607):e.removedDocuments.size>0&&(V(r.lu,42227),r.lu=!1))})),await Lx(n,e,t)}catch(e){await uh(e)}}function Ex(e,t,n){let r=H(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Pu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=H(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.wa)e.va(t)&&(r=!0)})),r&&sx(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Dx(e,t,n){let r=H(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Eu.get(t),a=i&&i.key;if(a){let e=new X(K.comparator);e=e.insert(a,hg.newNoDocument(a,J.min()));let n=Q().add(a);await Tx(r,new lv(J.min(),new Map,new X(G),e,n)),r.du=r.du.remove(a),r.Eu.delete(t),Ix(r)}else await Ky(r.localStore,t,!1).then((()=>Mx(r,t,n))).catch(uh)}async function Ox(e,t){let n=H(e),r=t.batch.batchId;try{let e=await By(n.localStore,t);jx(n,r,null),Ax(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await Lx(n,e)}catch(e){await uh(e)}}async function kx(e,t,n){let r=H(e);try{let e=await function(e,t){let n=H(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(V(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);jx(r,t,n),Ax(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await Lx(r,e)}catch(e){await uh(e)}}function Ax(e,t){(e.Vu.get(t)||[]).forEach((e=>{e.resolve()})),e.Vu.delete(t)}function jx(e,t,n){let r=H(e),i=r.Ru[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function Mx(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach((t=>{e.Au.containsKey(t)||Nx(e,t)}))}function Nx(e,t){e.Iu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(Cb(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Ix(e))}function Px(e,t,n){for(let r of n)r instanceof dx?(e.Au.addReference(r.key,t),Fx(e,r)):r instanceof fx?(z(mx,`Document no longer in limbo: `+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||Nx(e,r.key)):B(19791,{yu:r})}function Fx(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(z(mx,`New document in limbo: `+n),e.Iu.add(r),Ix(e))}function Ix(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Iu.values().next().value;e.Iu.delete(t);let n=new K(Um.fromString(t)),r=e.mu.next();e.Eu.set(r,new gx(n)),e.du=e.du.insert(n,r),Sb(e.remoteStore,new $v(Yg(Gg(n.path)),r,`TargetPurposeLimboResolution`,ph.ue))}}async function Lx(e,t,n){let r=H(e),i=[],a=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach(((e,s)=>{o.push(r.gu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=My.Es(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.hu.J_(i),await async function(e,t){let n=H(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>Y.forEach(t,(t=>Y.forEach(t.Is,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Y.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!fh(e))throw e;z(Fy,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Fs.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(t,i)}}}(r.localStore,a))}async function Rx(e,t){let n=H(e);if(!n.currentUser.isEqual(t)){z(mx,`User change. New user:`,t.toKey());let e=await zy(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach((e=>{e.forEach((e=>{e.reject(new W(U.CANCELLED,t))}))})),e.Vu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Lx(n,e.Bs)}}function zx(e,t){let n=H(e),r=n.Eu.get(t);if(r&&r.lu)return Q().add(r.key);{let e=Q(),r=n.Tu.get(t);if(!r)return e;for(let t of r){let r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function Bx(e){let t=H(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dx.bind(null,t),t.hu.J_=ax.bind(null,t.eventManager),t.hu.pu=ox.bind(null,t.eventManager),t}function Vx(e){let t=H(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ox.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kx.bind(null,t),t}var Hx=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=lb(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Ry(this.persistence,new Py,e.initialUser,this.serializer)}Du(e){return new Oy(Ay.Vi,this.serializer)}bu(e){return new Xy}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Hx.provider={build:()=>new Hx};var Ux=class extends Hx{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){V(this.persistence.referenceDelegate instanceof jy,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new py(n,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes===void 0?sy.DEFAULT:sy.withCacheSize(this.cacheSizeBytes);return new Oy((e=>jy.Vi(e,t)),this.serializer)}},Wx=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ex(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rx.bind(null,this.syncEngine),await Kb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tx}()}createDatastore(e){let t=lb(e.databaseInfo.databaseId),n=function(e){return new sb(e)}(e.databaseInfo);return function(e,t,n,r){return new gb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new yb(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ex(this.syncEngine,e,0)),function(){return $y.C()?new $y:new Zy}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new _x(e,t,n,r,i,a);return o&&(s.fu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){let t=H(e);z(vb,`RemoteStore shutting down.`),t.Ia.add(5),await xb(t),t.Ea.shutdown(),t.Aa.set(`Unknown`)}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}};Wx.provider={build:()=>new Wx};var Gx=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xm(`Uncaught Error in snapshot listener:`,e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},Kx=`FirestoreClient`,qx=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=_m.UNAUTHENTICATED,this.clientId=Im.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{z(Kx,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(z(Kx,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Tm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Xb(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function Jx(e,t){e.asyncQueue.verifyOperationInProgress(),z(Kx,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await zy(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>{Sm(`Terminating Firestore due to IndexedDb database deletion`),e.terminate().then((()=>{z(`Terminating Firestore due to IndexedDb database deletion completed successfully`)})).catch((e=>{Sm(`Terminating Firestore due to IndexedDb database deletion failed`,e)}))})),e._offlineComponents=t}async function Yx(e,t){e.asyncQueue.verifyOperationInProgress();let n=await Xx(e);z(Kx,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Gb(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Gb(t.remoteStore,n))),e._onlineComponents=t}async function Xx(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){z(Kx,`Using user provided OfflineComponentProvider`);try{await Jx(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===U.FAILED_PRECONDITION||e.code===U.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;Sm(`Error using user provided cache. Falling back to memory cache: `+n),await Jx(e,new Hx)}}else z(Kx,`Using default OfflineComponentProvider`),await Jx(e,new Ux(void 0));return e._offlineComponents}async function Zx(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(z(Kx,`Using user provided OnlineComponentProvider`),await Yx(e,e._uninitializedComponentsProvider._online)):(z(Kx,`Using default OnlineComponentProvider`),await Yx(e,new Wx))),e._onlineComponents}function Qx(e){return Zx(e).then((e=>e.syncEngine))}async function $x(e){let t=await Zx(e),n=t.eventManager;return n.onListen=vx.bind(null,t.syncEngine),n.onUnlisten=Sx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=yx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Cx.bind(null,t.syncEngine),n}function eS(e,t,n={}){let r=new Tm;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Gx({next:s=>{a.Ou(),t.enqueueAndForget((()=>ix(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new W(U.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new W(U.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new ux(Gg(n.path),a,{includeMetadataChanges:!0,ka:!0});return rx(e,o)}(await $x(e),e.asyncQueue,t,n,r))),r.promise}function tS(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var nS=new Map,rS=`firestore.googleapis.com`,iS=!0,aS=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(U.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=rS,this.ssl=iS}else this.host=e.host,this.ssl=e.ssl??iS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uy)throw new W(U.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}qm(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tS(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},oS=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new aS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new W(U.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new W(U.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new aS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Dm;switch(e.type){case`firstParty`:return new jm(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new W(U.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=nS.get(e);t&&(z(`ComponentProvider`,`Removing Datastore`),nS.delete(e),t.terminate())}(this),Promise.resolve()}};function sS(e,t,n,r={}){e=Zm(e,oS);let i=Ho(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),s=`${t}:${n}`;i&&(Uo(`https://${s}`),Yo(`Firestore`,!0)),a.host!==rS&&a.host!==s&&Sm(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c=Object.assign(Object.assign({},a),{host:s,ssl:i,emulatorOptions:r});if(!fs(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=_m.MOCK_USER;else{t=Wo(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new W(U.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new _m(i)}e._authCredentials=new Om(new Em(t,n))}}var cS=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},lS=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uS(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Qm(n,e._jsonSchema))return new e(t,r||null,new K(Um.fromString(n.referencePath)))}};lS._jsonSchemaVersion=`firestore/documentReference/1.0`,lS._jsonSchema={type:q(`string`,lS._jsonSchemaVersion),referencePath:q(`string`)};var uS=class e extends cS{constructor(e,t,n){super(e,t,Gg(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new lS(this.firestore,null,new K(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function dS(e,t,...n){if(e=xs(e),arguments.length===1&&(t=Im.newId()),Km(`doc`,`path`,t),e instanceof oS){let r=Um.fromString(t,...n);return Jm(r),new lS(e,null,new K(r))}{if(!(e instanceof lS||e instanceof uS))throw new W(U.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Um.fromString(t,...n));return Jm(r),new lS(e.firestore,e instanceof uS?e.converter:null,new K(r))}}var fS=`AsyncQueue`,pS=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ub(this,`async_queue_retry`),this.oc=()=>{let e=cb();e&&z(fS,`Visibility state changed to `+e.visibilityState),this.F_.y_()},this._c=e;let t=cb();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=cb();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));let t=new Tm;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!fh(e))throw e;z(fS,`Operation failed with retryable error: `+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){let t=this._c.then((()=>(this.nc=!0,e().catch((e=>{throw this.tc=e,this.nc=!1,xm(`INTERNAL UNHANDLED ERROR: `,mS(e)),e})).then((e=>(this.nc=!1,e))))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=Yb.createAndSchedule(this,e,t,n,(e=>this.lc(e)));return this.ec.push(r),r}ac(){this.tc&&B(47125,{hc:mS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.ec)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function mS(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function hS(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}var gS=class extends oS{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new pS,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new pS(e),this._firestoreClient=void 0,await e}}};function _S(e,t){let n=typeof e==`object`?e:Jc(),r=typeof e==`string`?e:t||Uh,i=Hc(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=Ro(`firestore`);e&&sS(i,...e)}return i}function vS(e){if(e._terminated)throw new W(U.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||yS(e),e._firestoreClient}function yS(e){var t,n;let r=e._freezeSettings(),i=function(e,t,n,r){return new Hh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,tS(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,r);e._componentsProvider||(t=r.localCache)!=null&&t._offlineComponentProvider&&(n=r.localCache)!=null&&n._onlineComponentProvider&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new qx(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var bS=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(jh.fromBase64String(t))}catch(e){throw new W(U.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(jh.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qm(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};bS._jsonSchemaVersion=`firestore/bytes/1.0`,bS._jsonSchema={type:q(`string`,bS._jsonSchemaVersion),bytes:q(`string`)};var xS=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new W(U.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new Gm(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},SS=class{constructor(e){this._methodName=e}},CS=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(U.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new W(U.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return G(this._lat,e._lat)||G(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Qm(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};CS._jsonSchemaVersion=`firestore/geoPoint/1.0`,CS._jsonSchema={type:q(`string`,CS._jsonSchemaVersion),latitude:q(`number`),longitude:q(`number`)};var wS=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qm(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new W(U.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};wS._jsonSchemaVersion=`firestore/vectorValue/1.0`,wS._jsonSchema={type:q(`string`,wS._jsonSchemaVersion),vectorValues:q(`object`)};var TS=/^__.*__$/,ES=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new U_(e,this.data,t,this.fieldTransforms):new W_(e,this.data,this.fieldMask,t,this.fieldTransforms)}},DS=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new W_(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function OS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{Ec:e})}}var kS=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){let t=this.path?.child(e),n=this.Rc({path:t,mc:!1});return n.fc(e),n}gc(e){let t=this.path?.child(e),n=this.Rc({path:t,mc:!1});return n.Ac(),n}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return US(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc(`Document fields must not be empty`);if(OS(this.Ec)&&TS.test(e))throw this.wc(`Document fields cannot begin and end with "__"`)}},AS=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||lb(e)}Dc(e,t,n,r=!1){return new kS({Ec:e,methodName:t,bc:n,path:Gm.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function jS(e){let t=e._freezeSettings(),n=lb(e._databaseId);return new AS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function MS(e,t,n,r,i,a={}){let o=e.Dc(a.merge||a.mergeFields?2:0,t,n,i);zS(`Data must be an object, but it was:`,o,r);let s=LS(r,o),c,l;if(a.merge)c=new kh(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=BS(t,r,n);if(!o.contains(i))throw new W(U.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);WS(e,i)||e.push(i)}c=new kh(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new ES(new pg(s),c,l)}var NS=class e extends SS{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}};function PS(e,t,n,r){let i=e.Dc(1,t,n);zS(`Data must be an object, but it was:`,i,r);let a=[],o=pg.empty();return Ch(r,((e,r)=>{let s=HS(t,e,n);r=xs(r);let c=i.gc(s);if(r instanceof NS)a.push(s);else{let e=IS(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new DS(o,new kh(a),i.fieldTransforms)}function FS(e,t,n,r,i,a){let o=e.Dc(1,t,n),s=[BS(t,r,n)],c=[i];if(a.length%2!=0)throw new W(U.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(BS(t,a[e])),c.push(a[e+1]);let l=[],u=pg.empty();for(let e=s.length-1;e>=0;--e)if(!WS(l,s[e])){let t=s[e],n=c[e];n=xs(n);let r=o.gc(t);if(n instanceof NS)l.push(t);else{let e=IS(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new DS(u,new kh(l),o.fieldTransforms)}function IS(e,t){if(RS(e=xs(e)))return zS(`Unsupported field value:`,t,e),LS(e,t);if(e instanceof SS)return function(e,t){if(!OS(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=IS(i,t.yc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=xs(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return b_(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=th.fromDate(e);return{timestampValue:Cv(t.serializer,n)}}if(e instanceof th){let n=new th(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Cv(t.serializer,n)}}if(e instanceof CS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bS)return{bytesValue:wv(t.serializer,e._byteString)};if(e instanceof lS){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Dv(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof wS)return function(e,t){return{mapValue:{fields:{[Gh]:{stringValue:Jh},[Yh]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.wc(`VectorValues must only contain numeric values.`);return v_(t.serializer,e)}))}}}}}}(e,t);throw t.wc(`Unsupported field value: ${Xm(e)}`)}(e,t)}function LS(e,t){let n={};return wh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ch(e,((e,r)=>{let i=IS(r,t.Vc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function RS(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof th||e instanceof CS||e instanceof bS||e instanceof lS||e instanceof SS||e instanceof wS)}function zS(e,t,n){if(!RS(n)||!Ym(n)){let r=Xm(n);throw r===`an object`?t.wc(e+` a custom object`):t.wc(e+` `+r)}}function BS(e,t,n){if((t=xs(t))instanceof xS)return t._internalPath;if(typeof t==`string`)return HS(e,t);throw US(`Field path arguments must be of type string or `,e,!1,void 0,n)}var VS=RegExp(`[~\\*/\\[\\]]`);function HS(e,t,n){if(t.search(VS)>=0)throw US(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new xS(...t.split(`.`))._internalPath}catch{throw US(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function US(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new W(U.INVALID_ARGUMENT,s+e+c)}function WS(e,t){return e.some((e=>e.isEqual(t)))}var GS=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lS(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new KS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(qS(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},KS=class extends GS{data(){return super.data()}};function qS(e,t){return typeof t==`string`?HS(e,t):t instanceof xS?t._internalPath:t._delegate._internalPath}function JS(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new W(U.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var YS=class{convertValue(e,t=`none`){switch(Xh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Z(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ph(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return Ch(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){return new wS((e.fields?.[Yh].arrayValue?.values)?.map((e=>Z(e.doubleValue))))}convertGeoPoint(e){return new CS(Z(e.latitude),Z(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Bh(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(Vh(e));default:return null}}convertTimestamp(e){let t=Nh(e);return new th(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=Um.fromString(e);V(Qv(n),9688,{name:e});let r=new Wh(n.get(1),n.get(3)),i=new K(n.popFirst(5));return r.isEqual(t)||xm(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};function XS(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var ZS=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},QS=class e extends GS{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $S(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(qS(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(U.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};QS._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,QS._jsonSchema={type:q(`string`,QS._jsonSchemaVersion),bundleSource:q(`string`,`DocumentSnapshot`),bundleName:q(`string`),bundle:q(`string`)};var $S=class extends QS{data(e={}){return super.data(e)}},eC=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ZS(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new $S(this._firestore,this._userDataWriter,n.key,n,new ZS(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(U.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new $S(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ZS(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new $S(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ZS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:tC(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(U.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=Im.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function tC(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return B(61501,{type:e})}}function nC(e){e=Zm(e,lS);let t=Zm(e.firestore,gS);return eS(vS(t),e._key).then((n=>cC(t,e,n)))}eC._jsonSchemaVersion=`firestore/querySnapshot/1.0`,eC._jsonSchema={type:q(`string`,eC._jsonSchemaVersion),bundleSource:q(`string`,`QuerySnapshot`),bundleName:q(`string`),bundle:q(`string`)};var rC=class extends YS{constructor(e){super(),this.firestore=e}convertBytes(e){return new bS(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new lS(this.firestore,null,t)}};function iC(e,t,n){e=Zm(e,lS);let r=Zm(e.firestore,gS),i=XS(e.converter,t,n);return sC(r,[MS(jS(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,F_.none())])}function aC(e,t,n,...r){e=Zm(e,lS);let i=Zm(e.firestore,gS),a=jS(i),o;return o=typeof(t=xs(t))==`string`||t instanceof xS?FS(a,`updateDoc`,e._key,t,n,r):PS(a,`updateDoc`,e._key,t),sC(i,[o.toMutation(e._key,F_.exists(!0))])}function oC(e,...t){e=xs(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||hS(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(hS(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof lS)o=Zm(e.firestore,gS),s=Gg(e._key.path),a={next:n=>{t[r]&&t[r](cC(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=Zm(e,cS);o=Zm(n.firestore,gS),s=n._query;let i=new rC(o);a={next:e=>{t[r]&&t[r](new eC(o,i,n,e))},error:t[r+1],complete:t[r+2]},JS(e._query)}return function(e,t,n,r){let i=new Gx(r),a=new ux(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>rx(await $x(e),a))),()=>{i.Ou(),e.asyncQueue.enqueueAndForget((async()=>ix(await $x(e),a)))}}(vS(o),s,i,a)}function sC(e,t){return function(e,t){let n=new Tm;return e.asyncQueue.enqueueAndForget((async()=>wx(await Qx(e),t,n))),n.promise}(vS(e),t)}function cC(e,t,n){let r=n.docs.get(t._key);return new QS(e,new rC(e),t._key,r,new ZS(n.hasPendingWrites,n.fromCache),t.converter)}(function(e,t=!0){(function(e){vm=e})(Kc),Vc(new Ss(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new gS(new km(e.getProvider(`auth-internal`)),new Nm(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new W(U.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Wh(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),Yc(hm,gm,e),Yc(hm,gm,`esm2017`)})(),Yc(`firebase`,`11.10.0`,`app`);const lC=qc({apiKey:`AIzaSyDrkRVSTQKy1gqL5_swbuZhdphQNGXUw2k`,authDomain:`kampen-37d71.firebaseapp.com`,projectId:`kampen-37d71`,storageBucket:`kampen-37d71.firebasestorage.app`,messagingSenderId:`464287390083`,appId:`1:464287390083:web:b6e2581df3345b081a3eb6`});function uC(e,t){let n={},r=Object.entries(e).filter(([,e])=>e===`high`).length;for(let[i,a]of Object.entries(e))a===`low`?n[i]={score:t.lowScore}:r>t.threshold?n[i]={score:0}:n[i]={score:t.highScore};if(t.roundNumber>=3){let e=Object.keys(n),t=e.length,r=Math.floor(t/4),i=Math.floor(t/4),a=e.slice().sort(()=>Math.random()-.5),o=a.slice(0,r),s=a.slice(r,r+i);for(let e of o){let t=Math.floor(Math.random()*3)+1;n[e]&&(n[e].adjustment=t,n[e].score+=t)}for(let e of s){let t=Math.floor(Math.random()*3)+1;n[e]&&(n[e].adjustment=-t,n[e].score-=t)}}return n}var dC=_S(lC);async function fC(e,t){let n=Math.random().toString(36).substring(2,5),r={id:n,gameConfig:e,currentRound:1,status:`waiting`,createdBy:t,createdAt:Date.now(),players:{},roundChoices:{},roundResults:{},votingEnabled:!1};return await iC(dS(dC,`sessions`,n),r),n}async function pC(e,t){let n=Math.random().toString(36).substring(2,9),r={id:n,username:t,sessionId:e,totalScore:0,roundChoices:{},roundScores:{},joinedAt:Date.now()},i=dS(dC,`sessions`,e);if(!(await nC(i)).exists())throw Error(`Session not found`);return await aC(i,{[`players.${n}`]:r}),n}async function mC(e,t,n,r){await aC(dS(dC,`sessions`,e),{[`roundChoices.${n}.${t}`]:r,[`players.${t}.roundChoices.${n}`]:r})}async function hC(e){let t=dS(dC,`sessions`,e),n=await nC(t);if(!n.exists())throw Error(`Session not found`);let r=n.data(),i=r.currentRound,a=r.gameConfig.rounds[i-1];if(!a)throw Error(`Round configuration not found`);let o=uC(r.roundChoices[i]||{},a),s={...r.players};for(let[e,t]of Object.entries(o))s[e]&&(s[e].roundScores[i]=t.score,s[e].totalScore+=t.score,s[e].adjustments||(s[e].adjustments={}),t.adjustment!==void 0&&(s[e].adjustments[i]=t.adjustment));let c=i+1,l=c>r.gameConfig.rounds.length;await aC(t,{[`roundResults.${i}`]:o,players:s,currentRound:c,status:l?`finished`:`playing`,votingEnabled:!1})}async function gC(e){await aC(dS(dC,`sessions`,e),{status:`playing`,votingEnabled:!1})}function _C(e,t){return oC(dS(dC,`sessions`,e),e=>{e.exists()&&t(e.data())})}function vC(e){return Object.values(e.players).map(e=>({username:e.username,totalScore:e.totalScore,playerId:e.id,roundScores:Object.keys(e.roundScores).sort((e,t)=>parseInt(e)-parseInt(t)).map(t=>({score:e.roundScores[parseInt(t)]||0,adjustment:e.adjustments&&e.adjustments[parseInt(t)]!==void 0?e.adjustments[parseInt(t)]:void 0}))})).sort((e,t)=>t.totalScore-e.totalScore)}async function yC(e,t){await aC(dS(dC,`sessions`,e),{votingEnabled:t})}var bC={class:`home-screen`},xC={class:`container`},SC={class:`button-group`},CC={key:0,class:`join-form`},wC=[`readonly`,`disabled`],TC=[`disabled`],EC={key:0,class:`error`},DC=Gn({__name:`HomeScreen`,emits:[`teacherClick`,`studentJoin`],setup(e,{emit:t}){let n=t,r=M(!1),i=M(``),a=M(!1);function o(){let e=window.location.hash.replace(`#`,``).trim();e.length>0&&(i.value=e,a.value=!0,r.value=!0)}or(()=>{o(),window.addEventListener(`hashchange`,o)}),ur(()=>{window.removeEventListener(`hashchange`,o)});let s=M(``),c=M(``),l=M(!1);async function u(){if(!i.value.trim()||!s.value.trim()){c.value=`Please enter session code and username`;return}l.value=!0,c.value=``;try{let e=await pC(i.value,s.value);n(`studentJoin`,{sessionId:i.value,playerId:e,username:s.value})}catch(e){console.error(`Join session error:`,e),c.value=`Failed to join session. Check the code and try again.`}finally{l.value=!1}}return(e,t)=>(P(),F(`div`,bC,[I(`div`,xC,[t[5]||=I(`h1`,null,`Kampen`,-1),t[6]||=I(`p`,{class:`subtitle`},`Naturtilstanden`,-1),I(`div`,SC,[I(`button`,{class:`btn btn-teacher`,onClick:t[0]||=t=>e.$emit(`teacherClick`)},`  Host `),I(`button`,{class:`btn btn-student`,onClick:t[1]||=e=>r.value=!r.value},`  Join `)]),r.value?(P(),F(`div`,CC,[t[4]||=I(`h2`,null,`Join a game session`,-1),jn(I(`input`,{"onUpdate:modelValue":t[2]||=e=>i.value=e,type:`text`,placeholder:`Enter session code`,class:`input`,readonly:a.value,disabled:a.value,onKeyup:_o(u,[`enter`])},null,40,wC),[[ho,i.value]]),jn(I(`input`,{"onUpdate:modelValue":t[3]||=e=>s.value=e,type:`text`,placeholder:`Enter your username`,class:`input`,onKeyup:_o(u,[`enter`])},null,544),[[ho,s.value]]),I(`button`,{class:`btn btn-join`,onClick:u,disabled:l.value},T(l.value?`Joining...`:`Join Session`),9,TC),c.value?(P(),F(`p`,EC,T(c.value),1)):Zi(``,!0)])):Zi(``,!0)])]))}}),OC=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},kC=OC(DC,[[`__scopeId`,`data-v-f63d287b`]]);const AC={gameName:`Kampen`,rounds:[{roundNumber:1,lowScore:1,highScore:3,threshold:3,description:`Hvis mer enn 3 personer velger risikabelt, fr alle som valgte risikabelt 0 poeng`},{roundNumber:2,lowScore:1,highScore:5,threshold:4,description:`Hvis mer enn 4 personer velger risikabelt, fr alle som valgte risikabelt 0 poeng`},{roundNumber:3,lowScore:5,highScore:10,threshold:3,description:`Hvis mer enn 3 personer velger risikabelt, fr alle som valgte risikabelt 0 poeng`},{roundNumber:4,lowScore:5,highScore:10,threshold:8,description:`Hvis mer enn 8 personer velger risikabelt, fr alle som valgte risikabelt 0 poeng`},{roundNumber:5,lowScore:5,highScore:20,threshold:5,description:`Hvis mer enn 5 personer velger risikabelt, fr alle som valgte risikabelt 0 poeng`},{roundNumber:6,lowScore:20,highScore:30,threshold:5,description:`Hvis mer enn 5 personer velger risikabelt, fr alle som valgte risikabelt 0 poeng`}]};var jC={class:`leaderboard`},MC={class:`leaderboard-content`},NC={key:0,class:`empty`},PC={key:1,class:`scores-table`},FC={class:`rank`},IC={class:`name`},LC={class:`score`},RC={class:`rounds`},zC={key:1},BC=OC(Gn({__name:`Leaderboard`,props:{session:{}},setup(e){let t=e,n=wa(()=>vC(t.session));return(e,t)=>(P(),F(`div`,jC,[t[2]||=I(`h3`,null,` Leaderboard`,-1),I(`div`,MC,[n.value.length===0?(P(),F(`div`,NC,[...t[0]||=[I(`p`,null,`No players yet`,-1)]])):(P(),F(`div`,PC,[t[1]||=Xi(`<div class="table-header" data-v-b1475829><span class="rank" data-v-b1475829>Rank</span><span class="name" data-v-b1475829>Player</span><span class="score" data-v-b1475829>Total Points</span><span class="rounds" data-v-b1475829>Round Scores</span></div>`,1),(P(!0),F(Ai,null,gr(n.value,(e,t)=>(P(),F(`div`,{key:e.playerId,class:`table-row`},[I(`span`,FC,T(t+1),1),I(`span`,IC,T(e.username),1),I(`span`,LC,T(e.totalScore),1),I(`span`,RC,[e.roundScores.length?(P(!0),F(Ai,{key:0},gr(e.roundScores,(t,n)=>(P(),F(`span`,{key:n,class:`round-score`},[Yi(T(t.score)+` `,1),t.adjustment===void 0?Zi(``,!0):(P(),F(`span`,{key:0,class:ye([`adj-badge`,t.adjustment>0?`adj-bonus`:`adj-penalty`])},T(t.adjustment>0?`+`:``)+T(t.adjustment),3)),n<e.roundScores.length-1?(P(),F(`span`,zC,` | `)):Zi(``,!0)]))),128)):(P(),F(Ai,{key:1},[Yi(`-`)],64))])]))),128))]))])]))}}),[[`__scopeId`,`data-v-b1475829`]]),VC={class:`teacher-dashboard`},HC={class:`header`},UC={class:`container`},WC={key:0,class:`setup-section`},GC=[`disabled`],KC={key:1,class:`game-section`},qC={class:`session-info`},JC={class:`code`},YC={class:`invite-link-row`},XC=[`value`],ZC={key:0,class:`copy-status`,style:{color:`#222`,background:`#fff`,border:`1.5px solid #bbb`,borderRadius:`4px`,padding:`2px 6px`,marginLeft:`8px`,fontSize:`0.95em`,display:`inline-block`,boxShadow:`0 1px 2px rgba(0,0,0,0.06)`}},QC={key:0,class:`game-state`},$C={class:`info-box`},ew={key:0,class:`round-config`},tw={key:0,class:`description`},nw={class:`controls`},rw={key:3,class:`waiting`},iw=OC(Gn({__name:`TeacherDashboard`,emits:[`back`],setup(e){let t=M(``);function n(){let e=`ofstad.co/kampen#${a.value}`;if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(e).then(()=>{t.value=`Copied!`,setTimeout(()=>t.value=``,1200)});else{let n=document.createElement(`input`);n.value=e,document.body.appendChild(n),n.select(),document.execCommand(`copy`),document.body.removeChild(n),t.value=`Copied!`,setTimeout(()=>t.value=``,1200)}}async function r(){i.value&&await yC(i.value,!0)}let i=M(``),a=M(``),o=M(null),s=M(!1),c=M(!1),l=M(null);async function u(){c.value=!0;try{let e=await fC(AC,`teacher`);i.value=e,a.value=e,s.value=!0,l.value=_C(e,e=>{o.value=e})}catch(e){console.error(`Failed to create session:`,e)}finally{c.value=!1}}async function d(){if(i.value)try{await gC(i.value)}catch(e){console.error(`Failed to start round:`,e)}}async function f(){if(i.value)try{await hC(i.value)}catch(e){console.error(`Failed to advance round:`,e)}}let p=wa(()=>o.value?o.value.gameConfig.rounds[o.value.currentRound-1]:null),m=wa(()=>{if(!o.value||!p.value)return!1;let e=o.value.roundChoices[o.value.currentRound]||{};return Object.keys(o.value.players).length>0&&Object.keys(e).length===Object.keys(o.value.players).length});return(e,i)=>(P(),F(`div`,VC,[I(`header`,HC,[i[2]||=I(`h1`,null,`Host Panel`,-1),I(`button`,{class:`btn-back`,onClick:i[0]||=t=>e.$emit(`back`)},` Back`)]),I(`div`,UC,[s.value?(P(),F(`div`,KC,[I(`div`,qC,[I(`h2`,null,[i[4]||=Yi(`Session Code: `,-1),I(`span`,JC,T(a.value),1)]),i[5]||=I(`p`,null,`Share this code with players to join the game`,-1),I(`div`,YC,[I(`input`,{class:`invite-link-input`,value:`ofstad.co/kampen#${a.value}`,readonly:``,onFocus:i[1]||=e=>{let t=e.target;t&&t.select()}},null,40,XC),I(`button`,{class:`btn btn-primary`,onClick:n},`Copy Link`),t.value?(P(),F(`span`,ZC,T(t.value),1)):Zi(``,!0)])]),o.value?(P(),F(`div`,QC,[I(`div`,$C,[I(`p`,null,[i[6]||=I(`strong`,null,`Round:`,-1),Yi(` `+T(o.value.currentRound)+`/`+T(o.value.gameConfig.rounds.length),1)]),I(`p`,null,[i[7]||=I(`strong`,null,`Players:`,-1),Yi(` `+T(Object.keys(o.value.players).length),1)]),I(`p`,null,[i[8]||=I(`strong`,null,`Status:`,-1),Yi(` `+T(o.value.status),1)])]),p.value?(P(),F(`div`,ew,[i[12]||=I(`h3`,null,`Current Round Configuration`,-1),I(`p`,null,[i[9]||=I(`strong`,null,`Safe Points (guaranteed):`,-1),Yi(` `+T(p.value.lowScore),1)]),I(`p`,null,[i[10]||=I(`strong`,null,`Risky Points (if threshold not exceeded):`,-1),Yi(` `+T(p.value.highScore),1)]),I(`p`,null,[i[11]||=I(`strong`,null,`Threshold:`,-1),Yi(` If more than `+T(p.value.threshold)+` choose risky, they get 0`,1)]),p.value.description?(P(),F(`p`,tw,T(p.value.description),1)):Zi(``,!0)])):Zi(``,!0),I(`div`,nw,[o.value.status===`waiting`?(P(),F(`button`,{key:0,class:`btn btn-success`,onClick:d},` Start Round `)):Zi(``,!0),o.value.status===`playing`&&!o.value.votingEnabled?(P(),F(`button`,{key:1,class:`btn btn-warning`,onClick:r},` Show Voting `)):Zi(``,!0),o.value.status===`playing`&&m.value?(P(),F(`button`,{key:2,class:`btn btn-primary`,onClick:f},` Calculate Scores & Next Round `)):Zi(``,!0),o.value.status===`playing`&&!m.value?(P(),F(`p`,rw,`  Waiting for `+T(Object.keys(o.value.players).length-Object.keys(o.value.roundChoices[o.value.currentRound]||{}).length)+` players to submit... `,1)):Zi(``,!0)]),o.value?(P(),Bi(BC,{key:1,session:o.value},null,8,[`session`])):Zi(``,!0)])):Zi(``,!0)])):(P(),F(`div`,WC,[i[3]||=I(`h2`,null,`Create a game session`,-1),I(`button`,{class:`btn btn-primary`,onClick:u,disabled:c.value},T(c.value?`Creating...`:`Create New Session`),9,GC)]))])]))}}),[[`__scopeId`,`data-v-f1b0a106`]]),aw={class:`student-game`},ow={class:`header`},sw={class:`username`},cw={key:0},lw={key:0,class:`finished-section`},uw={class:`final-scores`},dw={class:`rank`},fw={class:`name`},pw={class:`score`},mw={key:1},hw={key:0,class:`round-complete-section`},gw={key:2,class:`waiting-host-msg`},_w={class:`status-bar`},vw={class:`progress`},yw={class:`bar`},bw={key:1,class:`waiting-section`},xw={key:2,class:`round-section`},Sw={class:`round-config`},Cw={key:0,class:`description`},ww={key:0},Tw={key:0,class:`choice-section`},Ew={class:`choice-buttons`},Dw={class:`points`},Ow={class:`points`},kw=[`disabled`],Aw={key:1,class:`submitted`},jw={class:`success`},Mw={key:1,class:`waiting-voting`},Nw={key:1,class:`loading`},Pw=OC(Gn({__name:`StudentGame`,props:{sessionId:{},playerId:{},username:{}},emits:[`back`],setup(e){let t=e,n=M(null),r=M(null),i=M(!1),a=M(!1),o=M(null),s=M(!1),c=wa(()=>n.value?.createdBy===t.playerId);Ln(()=>n.value&&n.value.status===`playing`&&l(),async e=>{e?(s.value=!0,await yn()):s.value=!1});function l(){if(!n.value)return!1;let e=n.value.roundChoices[n.value.currentRound]||{};return Object.keys(n.value.players).length>0&&Object.keys(e).length===Object.keys(n.value.players).length}async function u(){n.value&&(await gC(n.value.id),s.value=!1)}or(async()=>{t.sessionId&&(o.value=_C(t.sessionId,e=>{n.value=e,d()}))}),ur(()=>{o.value&&o.value()});function d(){if(!n.value)return;let e=n.value.currentRound,a=n.value.roundChoices[e]||{};if(i.value=t.playerId in a,i.value){let e=a[t.playerId];(e===`low`||e===`high`)&&(r.value=e)}}async function f(){if(!(!r.value||!n.value)){a.value=!0;try{await mC(n.value.id,t.playerId,n.value.currentRound,r.value)}catch(e){console.error(`Failed to submit choice:`,e)}finally{a.value=!1}}}let p=wa(()=>n.value?n.value.gameConfig.rounds[n.value.currentRound-1]:null),m=wa(()=>n.value?.status===`finished`),h=wa(()=>n.value?Object.values(n.value.players).map(e=>({username:e.username,totalScore:e.totalScore})).sort((e,t)=>t.totalScore-e.totalScore):[]);return(t,o)=>(P(),F(`div`,aw,[I(`header`,ow,[I(`div`,null,[I(`h1`,null,T(n.value?.gameConfig.gameName||`Loading...`),1),I(`p`,sw,`Playing as: `+T(e.username),1)]),I(`button`,{class:`btn-back`,onClick:o[0]||=e=>t.$emit(`back`)},` Back`)]),I(`div`,{class:ye([`container`,{"round-complete":s.value}])},[n.value?(P(),F(`div`,cw,[m.value?(P(),F(`div`,lw,[o[3]||=I(`h2`,null,` Game Over!`,-1),o[4]||=I(`p`,null,`Final Results:`,-1),I(`div`,uw,[(P(!0),F(Ai,null,gr(h.value,(e,t)=>(P(),F(`div`,{key:t,class:`score-entry`},[I(`span`,dw,T(t+1)+`.`,1),I(`span`,fw,T(e.username),1),I(`span`,pw,T(e.totalScore)+` pts`,1)]))),128))])])):(P(),F(`div`,mw,[s.value?(P(),F(`div`,hw,[o[5]||=I(`h2`,{class:`round-complete-title`},`Round Complete!`,-1),n.value?(P(),Bi(BC,{key:0,session:n.value},null,8,[`session`])):Zi(``,!0),c.value&&n.value.status===`waiting`?(P(),F(`button`,{key:1,class:`btn btn-primary`,onClick:u},`Next Round`)):(P(),F(`p`,gw,`Waiting for host to start next round...`))])):Zi(``,!0),I(`div`,_w,[I(`div`,vw,[I(`span`,null,`Round `+T(n.value.currentRound)+`/`+T(n.value.gameConfig.rounds.length),1),I(`div`,yw,[I(`div`,{class:`fill`,style:w({width:`${n.value.currentRound/n.value.gameConfig.rounds.length*100}%`})},null,4)])])]),n.value.status===`waiting`&&!s.value?(P(),F(`div`,bw,[o[6]||=I(`h2`,null,` Waiting for the host to start the round`,-1),I(`p`,null,T(Object.keys(n.value.players).length)+` players have joined`,1)])):n.value.status===`playing`&&p.value&&!s.value?(P(),F(`div`,xw,[I(`div`,Sw,[I(`h2`,null,`Round `+T(n.value.currentRound),1),p.value.description?(P(),F(`p`,Cw,T(p.value.description),1)):Zi(``,!0)]),n.value.votingEnabled?(P(),F(`div`,ww,[i.value?(P(),F(`div`,Aw,[I(`p`,jw,[o[10]||=Yi(` You chose the `,-1),I(`strong`,null,T(r.value===`low`?`safe`:`risky`),1),o[11]||=Yi(` option`,-1)]),o[12]||=I(`p`,{class:`waiting-others`},`Waiting for other players to submit...`,-1)])):(P(),F(`div`,Tw,[o[9]||=I(`h3`,null,`Make your choice:`,-1),I(`div`,Ew,[I(`button`,{class:ye([`choice-btn low-btn`,{active:r.value===`low`}]),onClick:o[1]||=e=>r.value=`low`},[o[7]||=I(`span`,{class:`label`},`Safe Choice`,-1),I(`span`,Dw,`+`+T(p.value.lowScore)+` points`,1)],2),I(`button`,{class:ye([`choice-btn high-btn`,{active:r.value===`high`}]),onClick:o[2]||=e=>r.value=`high`},[o[8]||=I(`span`,{class:`label`},`Risky Choice`,-1),I(`span`,Ow,`+`+T(p.value.highScore)+` points`,1)],2)]),I(`button`,{class:`btn btn-submit`,onClick:f,disabled:!r.value||a.value},T(a.value?`Submitting...`:`Submit Choice`),9,kw)]))])):(P(),F(`div`,Mw,[...o[13]||=[I(`p`,{class:`waiting-others`},`Waiting for host to enable voting...`,-1)]]))])):Zi(``,!0),n.value&&!s.value?(P(),Bi(BC,{key:3,session:n.value},null,8,[`session`])):Zi(``,!0)]))])):(P(),F(`div`,Nw,[...o[14]||=[I(`p`,null,`Laster inn spill-sesjonen...`,-1)]]))],2)]))}}),[[`__scopeId`,`data-v-1e5bd590`]]),Fw={class:`app`};xo(OC(Gn({__name:`App`,setup(e){let t=$p(lC),n=M(`home`),r=M(``),i=M(``),a=M(``);or(async()=>{try{await Id(t)}catch(e){console.error(`Auth error:`,e)}let e=localStorage.getItem(`kampen_sessionId`),o=localStorage.getItem(`kampen_playerId`),s=localStorage.getItem(`kampen_username`);e&&o&&s&&(r.value=e,i.value=o,a.value=s,n.value=`student`)});function o(){n.value=`teacher`}function s(e){r.value=e.sessionId,i.value=e.playerId,a.value=e.username,n.value=`student`,localStorage.setItem(`kampen_sessionId`,e.sessionId),localStorage.setItem(`kampen_playerId`,e.playerId),localStorage.setItem(`kampen_username`,e.username)}function c(){n.value=`home`,r.value=``,i.value=``,localStorage.removeItem(`kampen_sessionId`),localStorage.removeItem(`kampen_playerId`),localStorage.removeItem(`kampen_username`)}return(e,t)=>(P(),F(`div`,Fw,[n.value===`home`?(P(),Bi(kC,{key:0,onTeacherClick:o,onStudentJoin:s})):n.value===`teacher`?(P(),Bi(iw,{key:1,onBack:c})):n.value===`student`?(P(),Bi(Pw,{key:2,"session-id":r.value,"player-id":i.value,username:a.value,onBack:c},null,8,[`session-id`,`player-id`,`username`])):Zi(``,!0)]))}}),[[`__scopeId`,`data-v-78ad80a2`]])).mount(`#app`);